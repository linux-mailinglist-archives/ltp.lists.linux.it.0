Return-Path: <ltp-bounces+lists+linux-ltp=lfdr.de@lists.linux.it>
X-Original-To: lists+linux-ltp@lfdr.de
Delivered-To: lists+linux-ltp@lfdr.de
Received: from picard.linux.it (picard.linux.it [213.254.12.146])
	by mail.lfdr.de (Postfix) with ESMTPS id 1739D19808
	for <lists+linux-ltp@lfdr.de>; Fri, 10 May 2019 07:27:54 +0200 (CEST)
Received: from picard.linux.it (localhost [IPv6:::1])
	by picard.linux.it (Postfix) with ESMTP id D02273EA1D0
	for <lists+linux-ltp@lfdr.de>; Fri, 10 May 2019 07:27:53 +0200 (CEST)
X-Original-To: ltp@lists.linux.it
Delivered-To: ltp@picard.linux.it
Received: from in-3.smtp.seeweb.it (in-3.smtp.seeweb.it
 [IPv6:2001:4b78:1:20::3])
 by picard.linux.it (Postfix) with ESMTP id 33AFE3EA13F
 for <ltp@lists.linux.it>; Fri, 10 May 2019 07:27:49 +0200 (CEST)
Received: from mail-yw1-xc42.google.com (mail-yw1-xc42.google.com
 [IPv6:2607:f8b0:4864:20::c42])
 (using TLSv1.2 with cipher ECDHE-RSA-AES128-GCM-SHA256 (128/128 bits))
 (No client certificate requested)
 by in-3.smtp.seeweb.it (Postfix) with ESMTPS id F28D31A00CC5
 for <ltp@lists.linux.it>; Fri, 10 May 2019 07:27:47 +0200 (CEST)
Received: by mail-yw1-xc42.google.com with SMTP id e74so3781318ywe.11
 for <ltp@lists.linux.it>; Thu, 09 May 2019 22:27:47 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20161025;
 h=mime-version:references:in-reply-to:from:date:message-id:subject:to
 :cc; bh=v4YF9yroVvK0DEUUPIpnimw26/AI6qb/zZ8cHVfb9go=;
 b=sxG+NWE1r0+M+SgGUQzs75druN3EGQE/B0P0pXwLhCCG9Paq2zHBJGzdUxstpngQf8
 cNDNpRkqyBPhkQspxCNShoDk2uP0fmsZwDL+/oB34nRijAuWV0KULEiL5sthWzY603B2
 DyufQEacb+mZY8LTatgCtAB9VlGvtRdwMvvbkImckAcXIHY9NFi1UFosluzX1imGFql9
 lI0n/qDGok1oOsyiOvct37+HMZLy8eArOB22mVY/LXlDEnquINOvKk0/I1FqCJygeRzZ
 8nPFmu9iguA6pUz/aCDDNY+JagpRqiv6gSEiM+ul7R8ev+22QVx4CHR/aSkyAV9j8/Iv
 olyg==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:mime-version:references:in-reply-to:from:date
 :message-id:subject:to:cc;
 bh=v4YF9yroVvK0DEUUPIpnimw26/AI6qb/zZ8cHVfb9go=;
 b=XdIe4D957lsAo0EPHHnjysTjykXNx+hbfXjdOHV3fWETsxFCiUJkuqQLYL/0DyPJzV
 eNuITGAeGWO571/++MwzKg1goGjJtZKw7Kr1fxWpPSPPe+Wy1+GGmDfPbjyj9CHNZhTj
 TbmGVoXFNmYFvfEeWYVtaPNLHroRYI5iT3NobQPvdGRhUNbpUACex1s6KLeYKZFjqz9k
 /FU452TPN8pNFzZ2vYaUDk5swvXlkc3wJvcwgYCRq/RiNHZX27Jnqf3Y5n3pAlln5Zi1
 ASiWVqxSoejFWPTLCuXXCMRTYrwCXFrUWXOuV3+8QOxdpueuLYvFvHn8KFEhegDrbeL1
 2tcA==
X-Gm-Message-State: APjAAAWYG4qGtOJKXc+eiwgKqqgddaI9wZAVqyfCeRF1rMkTr1pQImvc
 i/oDM8yrgF71ul6qX/P4v9JcoJUsYR1BfNMQ7Mw=
X-Google-Smtp-Source: APXvYqyvEiDgy7mKFyjsXHnd3crL6Y+5WMZWDvQhTAPv47CNNsQ1x2hje7sIKA5q7TfnsYF7gNwJETIgP924cD1SERU=
X-Received: by 2002:a0d:ff82:: with SMTP id p124mr4777682ywf.409.1557466066602; 
 Thu, 09 May 2019 22:27:46 -0700 (PDT)
MIME-Version: 1.0
References: <CAOQ4uxjDyx7JFBSmkDe-rHNe=NriT710Ldsva=s+HasaDL0CTw@mail.gmail.com>
 <20190510044217.5215-1-xzhou@redhat.com>
In-Reply-To: <20190510044217.5215-1-xzhou@redhat.com>
From: Amir Goldstein <amir73il@gmail.com>
Date: Fri, 10 May 2019 08:27:35 +0300
Message-ID: <CAOQ4uxi1=Xj59GvyrJf9HiMgGvRYTC8HGG8UOZKz3B8zgGh52g@mail.gmail.com>
To: Murphy Zhou <xzhou@redhat.com>
X-Virus-Scanned: clamav-milter 0.99.2 at in-3.smtp.seeweb.it
X-Virus-Status: Clean
X-Spam-Status: No, score=0.1 required=7.0 tests=DKIM_SIGNED,DKIM_VALID,
 DKIM_VALID_AU,FREEMAIL_FROM,SPF_PASS autolearn=disabled version=3.4.0
X-Spam-Checker-Version: SpamAssassin 3.4.0 (2014-02-07) on in-3.smtp.seeweb.it
Cc: Li Wang <liwan@redhat.com>, ltp@lists.linux.it
Subject: Re: [LTP] [PATCH v4] syscalls/swap{on,
 off}: fail softly if FIBMAP ioctl trial fails
X-BeenThere: ltp@lists.linux.it
X-Mailman-Version: 2.1.18
Precedence: list
List-Id: Linux Test Project <ltp.lists.linux.it>
List-Unsubscribe: <https://lists.linux.it/options/ltp>,
 <mailto:ltp-request@lists.linux.it?subject=unsubscribe>
List-Archive: <http://lists.linux.it/pipermail/ltp/>
List-Post: <mailto:ltp@lists.linux.it>
List-Help: <mailto:ltp-request@lists.linux.it?subject=help>
List-Subscribe: <https://lists.linux.it/listinfo/ltp>,
 <mailto:ltp-request@lists.linux.it?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: ltp-bounces+lists+linux-ltp=lfdr.de@lists.linux.it
Sender: "ltp" <ltp-bounces+lists+linux-ltp=lfdr.de@lists.linux.it>

T24gRnJpLCBNYXkgMTAsIDIwMTkgYXQgNzo0MiBBTSBNdXJwaHkgWmhvdSA8eHpob3VAcmVkaGF0
LmNvbT4gd3JvdGU6Cj4KPiBBZGQgYSB0ZXN0IGhlbHBlciB0byBkbyBhIEZJQk1BUCBpb2N0bCB0
ZXN0LiBSZW1vdmUgb2xkIGZzIHR5cGUgd2hpdGVsaXN0IGNvZGUuCgpJZiB5b3Ugd291bGRuJ3Qg
aGF2ZSBqdXN0IGRvbmUgdGhhdCBpdCB3b3VsZCBoYXZlIGJlZW4gZ29vZC4KQnV0IHlvdXIgcGF0
Y2ggYWxzbyBjaGFuZ2VzIGEgbG90IG9mIHRoZSBsb2dpYyBhbmQgb3V0cHV0IG1lc3NhZ2VzLAp3
aGljaCBpcyBsZXNzIGdvb2QuCkZvciBCVFJGUywgd2l0aCBhIGtlcm5lbCB0aGF0IGRvZXMgbm90
IHN1cHBvcnQgc3dhcG9uL29mZiwgdGVzdCBsb2dpYwpzaG91bGQgaGF2ZSBzdGF5ZWQgdGhlIHNh
bWUgYW5kIHByb2R1Y2UgbW9yZSBvciBsZXNzIHRoZSBzYW1lIG91dHB1dC4KVGhpcyB3b3VsZCBo
YXZlIG1hZGUgcmV2aWV3IG11Y2ggZWFzaWVyIGFuZCBsZXNzIGNoYW5jZSBvZiBicmVha2luZyB0
aGluZ3MuCgo+IExlYXZlIHN3YXBvZmYwMiBhbG9uZSBiZWNhdXNlIGl0J3MgcGVybWlzc2lvbiBj
aGVja2luZyBvbmx5IGluIGl0Lgo+Cj4gU2lnbmVkLW9mZi1ieTogTXVycGh5IFpob3UgPHh6aG91
QHJlZGhhdC5jb20+Cj4gLS0tCj4gdjI6Cj4gICBUZXN0IEZJQk1BUCBpbnN0ZWFkIG9mIGZzdHlw
ZSB3aGl0ZWxpc3QuCj4gdjM6Cj4gICBGaXggZnNfdHlwZSB1bmRlY2xhcmVkIGluIHN3YXBvZmYw
MS5jLgo+IHY0Ogo+ICAgRmFpbCBzb2Z0bHkgaWYgRklCTUFQIG5pdCBzdXBwb3J0ZWQsIGluc3Rl
YWQgb2Ygc2tpcCBlbnRpcmUgdGVzdGNhc2UuCj4KPiAgaW5jbHVkZS90c3RfZnMuaCAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIHwgIDUgKysKPiAgbGliL3RzdF9pb2N0bC5jICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIHwgMzkgKysrKysrKysrKysrKysKPiAgdGVzdGNhc2VzL2tl
cm5lbC9zeXNjYWxscy9zd2Fwb2ZmL3N3YXBvZmYwMS5jIHwgNDYgKysrKysrKysrLS0tLS0tLQo+
ICB0ZXN0Y2FzZXMva2VybmVsL3N5c2NhbGxzL3N3YXBvZmYvc3dhcG9mZjAyLmMgfCAxMCAtLS0t
Cj4gIHRlc3RjYXNlcy9rZXJuZWwvc3lzY2FsbHMvc3dhcG9uL3N3YXBvbjAxLmMgICB8IDIzICsr
KystLS0tCj4gIHRlc3RjYXNlcy9rZXJuZWwvc3lzY2FsbHMvc3dhcG9uL3N3YXBvbjAyLmMgICB8
IDMxICsrKysrKy0tLS0tCj4gIHRlc3RjYXNlcy9rZXJuZWwvc3lzY2FsbHMvc3dhcG9uL3N3YXBv
bjAzLmMgICB8IDUyICsrKysrKysrKy0tLS0tLS0tLS0KPiAgNyBmaWxlcyBjaGFuZ2VkLCAxMjEg
aW5zZXJ0aW9ucygrKSwgODUgZGVsZXRpb25zKC0pCj4gIGNyZWF0ZSBtb2RlIDEwMDY0NCBsaWIv
dHN0X2lvY3RsLmMKPgo+IGRpZmYgLS1naXQgYS9pbmNsdWRlL3RzdF9mcy5oIGIvaW5jbHVkZS90
c3RfZnMuaAo+IGluZGV4IGIyYjE5YWRhNi4uNDIzY2E4MmVjIDEwMDY0NAo+IC0tLSBhL2luY2x1
ZGUvdHN0X2ZzLmgKPiArKysgYi9pbmNsdWRlL3RzdF9mcy5oCj4gQEAgLTE3Miw2ICsxNzIsMTEg
QEAgY29uc3QgY2hhciAqKnRzdF9nZXRfc3VwcG9ydGVkX2ZzX3R5cGVzKHZvaWQpOwo+ICAgKi8K
PiAgdm9pZCB0c3RfZmlsbF9mcyhjb25zdCBjaGFyICpwYXRoLCBpbnQgdmVyYm9zZSk7Cj4KPiAr
LyoKPiArICogdGVzdCBpZiBGSUJNQVAgaW9jdGwgaXMgc3VwcG9ydGVkCj4gKyAqLwo+ICtpbnQg
dHN0X2ZpYm1hcChjb25zdCBjaGFyICpmaWxlbmFtZSwgY29uc3QgY2hhciAqZnN0eXBlKTsKPiAr
Cj4gICNpZmRlZiBUU1RfVEVTVF9IX18KPiAgc3RhdGljIGlubGluZSBsb25nIHRzdF9mc190eXBl
KGNvbnN0IGNoYXIgKnBhdGgpCj4gIHsKPiBkaWZmIC0tZ2l0IGEvbGliL3RzdF9pb2N0bC5jIGIv
bGliL3RzdF9pb2N0bC5jCj4gbmV3IGZpbGUgbW9kZSAxMDA2NDQKPiBpbmRleCAwMDAwMDAwMDAu
LmY2M2ViNTU2NQo+IC0tLSAvZGV2L251bGwKPiArKysgYi9saWIvdHN0X2lvY3RsLmMKPiBAQCAt
MCwwICsxLDM5IEBACj4gKy8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBHUEwtMi4wLW9yLWxh
dGVyCj4gKwo+ICsjaW5jbHVkZSA8ZXJybm8uaD4KPiArI2luY2x1ZGUgPHN0ZGlvLmg+Cj4gKyNp
bmNsdWRlIDxzdGRsaWIuaD4KPiArI2luY2x1ZGUgPHN5cy9pb2N0bC5oPgo+ICsjaW5jbHVkZSA8
bGludXgvZnMuaD4KPiArCj4gKyNkZWZpbmUgVFNUX05PX0RFRkFVTFRfTUFJTgo+ICsKPiArI2lu
Y2x1ZGUgInRzdF90ZXN0LmgiCj4gKwo+ICtpbnQgdHN0X2ZpYm1hcChjb25zdCBjaGFyICpmaWxl
bmFtZSwgY29uc3QgY2hhciAqZnN0eXBlKQo+ICt7Cj4gKyAgICAgICAvKiB0ZXN0IGlmIEZJQk1B
UCBpb2N0bCBpcyBzdXBwb3J0ZWQgKi8KPiArICAgICAgIGludCBmZCwgYmxvY2sgPSAwOwo+ICsK
PiArICAgICAgIHRzdF9yZXMoVElORk8sICJUZXN0aW5nIGlmIEZJQk1BUCBpb2N0bCBpcyBzdXBw
b3J0ZWQgb24gJXMiLCBmc3R5cGUpOwoKcGFzc2luZyB0aGUgZnN0eXBlIGludG8gdGhpcyBoZWxw
ZXIgc2VlbXMgcXVpdGUgaXJyZWxldmFudCB0byBtZS4KdGhlIFRJTkZPIHByaW50IGRvZXNuJ3Qg
anVzdGlmeSBpdCBJTU8KSXRzIG5vdCBldmVuIGFuIGltcG9ydGFudCBpbmZvIElNTywgc28gYXMg
bG9uZyBhcyB5b3UgaGF2ZSB0aGUgcHJpbnQKd2hlbiBGSUJNQVAgbm90IHN1cHBvcnRlZAoKPiAr
Cj4gKyAgICAgICBmZCA9IG9wZW4oZmlsZW5hbWUsIE9fUkRXUiB8IE9fQ1JFQVQsIDA2NjYpOwo+
ICsgICAgICAgaWYgKGZkIDwgMCkgewo+ICsgICAgICAgICAgICAgICB0c3RfcmVzKFRXQVJOIHwg
VEVSUk5PLAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAib3BlbiglcywgT19SRFdSIHwgT19D
UkVBVCwgMDY2NikgZmFpbGVkIiwgZmlsZW5hbWUpOwo+ICsgICAgICAgICAgICAgICByZXR1cm4g
MTsKPiArICAgICAgIH0KPiArCj4gKyAgICAgICBpZiAoaW9jdGwoZmQsIEZJQk1BUCwgJmJsb2Nr
KSkgewo+ICsgICAgICAgICAgICAgICB0c3RfcmVzKFRJTkZPLCAiRklCTUFQIGlvY3RsIGlzIE5P
VCBzdXBwb3J0ZWQiKTsKPiArICAgICAgICAgICAgICAgY2xvc2UoZmQpOwo+ICsgICAgICAgICAg
ICAgICByZXR1cm4gMTsKPiArICAgICAgIH0KPiArICAgICAgIHRzdF9yZXMoVElORk8sICJGSUJN
QVAgaW9jdGwgaXMgc3VwcG9ydGVkIik7Cj4gKwo+ICsgICAgICAgaWYgKGNsb3NlKGZkKSkgewo+
ICsgICAgICAgICAgICAgICB0c3RfcmVzKFRXQVJOIHwgVEVSUk5PLCAiY2xvc2UoZmQpIGZhaWxl
ZCIpOwo+ICsgICAgICAgICAgICAgICByZXR1cm4gMTsKPiArICAgICAgIH0KPiArICAgICAgIHJl
dHVybiAwOwo+ICt9Cj4gZGlmZiAtLWdpdCBhL3Rlc3RjYXNlcy9rZXJuZWwvc3lzY2FsbHMvc3dh
cG9mZi9zd2Fwb2ZmMDEuYyBiL3Rlc3RjYXNlcy9rZXJuZWwvc3lzY2FsbHMvc3dhcG9mZi9zd2Fw
b2ZmMDEuYwo+IGluZGV4IGE2M2U2NjFhNS4uZmJjZTY2ZmM4IDEwMDY0NAo+IC0tLSBhL3Rlc3Rj
YXNlcy9rZXJuZWwvc3lzY2FsbHMvc3dhcG9mZi9zd2Fwb2ZmMDEuYwo+ICsrKyBiL3Rlc3RjYXNl
cy9rZXJuZWwvc3lzY2FsbHMvc3dhcG9mZi9zd2Fwb2ZmMDEuYwo+IEBAIC0zMiw2ICszMiw3IEBA
IHN0YXRpYyB2b2lkIHZlcmlmeV9zd2Fwb2ZmKHZvaWQpOwo+Cj4gIGNoYXIgKlRDSUQgPSAic3dh
cG9mZjAxIjsKPiAgaW50IFRTVF9UT1RBTCA9IDE7Cj4gK2ludCBmaWJtYXAgPSAxOwo+Cj4gIHN0
YXRpYyBsb25nIGZzX3R5cGU7Cj4KPiBAQCAtNTUsMjIgKzU2LDI2IEBAIGludCBtYWluKGludCBh
YywgY2hhciAqKmF2KQo+ICBzdGF0aWMgdm9pZCB2ZXJpZnlfc3dhcG9mZih2b2lkKQo+ICB7Cj4g
ICAgICAgICBpZiAobHRwX3N5c2NhbGwoX19OUl9zd2Fwb24sICIuL3N3YXBmaWxlMDEiLCAwKSAh
PSAwKSB7Cj4gLSAgICAgICAgICAgICAgIGlmIChmc190eXBlID09IFRTVF9CVFJGU19NQUdJQyAm
JiBlcnJubyA9PSBFSU5WQUwpIHsKPiAtICAgICAgICAgICAgICAgICAgICAgICB0c3RfYnJrbShU
Q09ORiwgY2xlYW51cCwKPiAtICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiU3dhcGZp
bGVzIG9uIEJUUkZTIGFyZSBub3QgaW1wbGVtZW50ZWQiKTsKPiArICAgICAgICAgICAgICAgaWYg
KGZpYm1hcCA9PSAxKSB7CgpUaGlzIGNoYW5nZXMgYm90aCBsb2dpYyBhbmQgb3V0cHV0IG1lc3Nh
Z2UuCkkgZG9uJ3Qgc2VlIGEgZ29vZCByZWFzb24gZm9yIHlvdSB0byBkbyB0aGF0LgpQbGVhc2Ug
a2VlcCB0aGUgZXJybm8gPT0gRUlOVkFMIGNoZWNrIGFuZCB0aGUgbWVzc2FnZSBmb3JtYXQgZm9y
IFRDT05GIGNhc2UKU2FtZSBjb21tZW50IGZvciBhbGwgdGhlIG90aGVyIHBsYWNlcyBpdCBhcHBs
aWVzCgo+ICsgICAgICAgICAgICAgICAgICAgICAgIHRzdF9yZXNtKFRCUk9LLCAiRmFpbGVkIHRv
IHR1cm4gb24gdGhlIHN3YXAgZmlsZSIKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAiLCBza2lwcGluZyB0ZXN0IGl0ZXJhdGlvbiIpOwo+ICsgICAgICAgICAgICAgICAgICAgICAg
IHJldHVybjsKPiArICAgICAgICAgICAgICAgfSBlbHNlIHsKPiArICAgICAgICAgICAgICAgICAg
ICAgICB0c3RfcmVzbShUQ09ORiwgIkZhaWxlZCB0byB0dXJuIG9uIHRoZSBzd2FwIGZpbGUiCj4g
KyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIiwga2VlcCBnb2luZyBmb3Igc2FuaXR5
IGNoZWNrIik7Cj4gICAgICAgICAgICAgICAgIH0KPiAtCj4gLSAgICAgICAgICAgICAgIHRzdF9y
ZXNtKFRCUk9LLCAiRmFpbGVkIHRvIHR1cm4gb24gdGhlIHN3YXAgZmlsZSIKPiAtICAgICAgICAg
ICAgICAgICAgICAgICAgIiwgc2tpcHBpbmcgdGVzdCBpdGVyYXRpb24iKTsKPiAtICAgICAgICAg
ICAgICAgcmV0dXJuOwo+ICAgICAgICAgfQo+Cj4gICAgICAgICBURVNUKGx0cF9zeXNjYWxsKF9f
TlJfc3dhcG9mZiwgIi4vc3dhcGZpbGUwMSIpKTsKPgo+ICAgICAgICAgaWYgKFRFU1RfUkVUVVJO
ID09IC0xKSB7Cj4gLSAgICAgICAgICAgICAgIHRzdF9yZXNtKFRGQUlMIHwgVFRFUlJOTywgIkZh
aWxlZCB0byB0dXJuIG9mZiBzd2FwZmlsZSwiCj4gLSAgICAgICAgICAgICAgICAgICAgICAgICIg
c3lzdGVtIHJlYm9vdCBhZnRlciBleGVjdXRpb24gb2YgTFRQICIKPiAtICAgICAgICAgICAgICAg
ICAgICAgICAgInRlc3Qgc3VpdGUgaXMgcmVjb21tZW5kZWQuIik7Cj4gKyAgICAgICAgICAgICAg
IGlmIChmaWJtYXAgPT0gMSkgewoKTm8gcmVhc29uIHRvIGRvIHRoYXQuCklmIGZpbGVzeXN0ZW0g
d2FzIGFscmVhZHkgcHJvdmVuIHRvIHN1cHBvcnQgc3dwYW9uKCksIHN3YXBvZmYoKSBtdXN0IHN1
Y2NlZWQuCklmIGZzIGRvZXNuJ3Qgc3VwcG9ydCBzd2Fwb24oKSwgdGVzdCBzaG91bGQgYmFpbCBv
dXQgYW5kIG5vdCB0cnkgc3dhcG9mZigpCgo+ICsgICAgICAgICAgICAgICAgICAgICAgIHRzdF9y
ZXNtKFRGQUlMIHwgVFRFUlJOTywgIkZhaWxlZCB0byB0dXJuIG9mZiBzd2FwZmlsZSwiCj4gKyAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIiBzeXN0ZW0gcmVib290IGFmdGVyIGV4ZWN1
dGlvbiBvZiBMVFAgIgo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ0ZXN0IHN1
aXRlIGlzIHJlY29tbWVuZGVkLiIpOwo+ICsgICAgICAgICAgICAgICB9IGVsc2Ugewo+ICsgICAg
ICAgICAgICAgICAgICAgICAgIHRzdF9yZXNtKFRDT05GLCAiRmFpbGVkIHRvIHR1cm4gb2ZmIHN3
YXBmaWxlIik7Cj4gKyAgICAgICAgICAgICAgIH0KPiAgICAgICAgIH0gZWxzZSB7Cj4gICAgICAg
ICAgICAgICAgIHRzdF9yZXNtKFRQQVNTLCAiU3VjY2VlZGVkIHRvIHR1cm4gb2ZmIHN3YXBmaWxl
Iik7Cj4gICAgICAgICB9Cj4gQEAgLTg2LDEzICs5MSwxMSBAQCBzdGF0aWMgdm9pZCBzZXR1cCh2
b2lkKQo+Cj4gICAgICAgICB0c3RfdG1wZGlyKCk7Cj4KPiAtICAgICAgIHN3aXRjaCAoKGZzX3R5
cGUgPSB0c3RfZnNfdHlwZShjbGVhbnVwLCAiLiIpKSkgewo+IC0gICAgICAgY2FzZSBUU1RfTkZT
X01BR0lDOgo+IC0gICAgICAgY2FzZSBUU1RfVE1QRlNfTUFHSUM6Cj4gLSAgICAgICAgICAgICAg
IHRzdF9icmttKFRDT05GLCBjbGVhbnVwLAo+IC0gICAgICAgICAgICAgICAgICAgICAgICAiQ2Fu
bm90IGRvIHN3YXBvZmYgb24gYSBmaWxlIG9uICVzIGZpbGVzeXN0ZW0iLAo+IC0gICAgICAgICAg
ICAgICAgICAgICAgICB0c3RfZnNfdHlwZV9uYW1lKGZzX3R5cGUpKTsKPiAtICAgICAgIGJyZWFr
Owo+ICsgICAgICAgZnNfdHlwZSA9IHRzdF9mc190eXBlKGNsZWFudXAsICIuIik7Cj4gKyAgICAg
ICBpZiAodHN0X2ZpYm1hcCgiLi90c3RfZmlibWFwIiwgdHN0X2ZzX3R5cGVfbmFtZShmc190eXBl
KSkpIHsKPiArICAgICAgICAgICAgICAgdHN0X3Jlc20oVENPTkYsCj4gKyAgICAgICAgICAgICAg
ICAgICAgICAgICJXaWxsIG5vdCByZXBvcnQgRkFJTCBhcyBGSUJNQVAgaW9jdGwgbm90IHN1cHBv
cnRlZCIpOwoKSGVyZSBwcmludGluZyBmcyBuYW1lIHdvdWxkIGJlIHVzZWZ1bCBJTU8KCj4gKyAg
ICAgICAgICAgICAgIGZpYm1hcCA9IDA7Cj4gICAgICAgICB9Cj4KPiAgICAgICAgIGlmICghdHN0
X2ZzX2hhc19mcmVlKE5VTEwsICIuIiwgNjQsIFRTVF9NQikpIHsKPiBAQCAtMTAzLDggKzEwNiwx
MyBAQCBzdGF0aWMgdm9pZCBzZXR1cCh2b2lkKQo+ICAgICAgICAgaWYgKHRzdF9maWxsX2ZpbGUo
InN3YXBmaWxlMDEiLCAweDAwLCAxMDI0LCA2NTUzNikpCj4gICAgICAgICAgICAgICAgIHRzdF9i
cmttKFRCUk9LLCBjbGVhbnVwLCAiRmFpbGVkIHRvIGNyZWF0ZSBmaWxlIGZvciBzd2FwIik7Cj4K
PiAtICAgICAgIGlmIChzeXN0ZW0oIm1rc3dhcCBzd2FwZmlsZTAxID4gdG1wZmlsZSAyPiYxIikg
IT0gMCkKPiAtICAgICAgICAgICAgICAgdHN0X2Jya20oVEJST0ssIGNsZWFudXAsICJGYWlsZWQg
dG8gbWFrZSBzd2FwZmlsZSIpOwo+ICsgICAgICAgaWYgKHN5c3RlbSgibWtzd2FwIHN3YXBmaWxl
MDEgPiB0bXBmaWxlIDI+JjEiKSAhPSAwKSB7Cj4gKyAgICAgICAgICAgICAgIGlmIChmaWJtYXAg
PT0gMSkgewo+ICsgICAgICAgICAgICAgICAgICAgICAgIHRzdF9icmttKFRCUk9LLCBjbGVhbnVw
LCAiRmFpbGVkIHRvIG1ha2Ugc3dhcGZpbGUiKTsKPiArICAgICAgICAgICAgICAgfSBlbHNlIHsK
PiArICAgICAgICAgICAgICAgICAgICAgICB0c3RfcmVzbShUQ09ORiwgIkZhaWxlZCB0byBtYWtl
IHN3YXBmaWxlIik7CgpZb3Ugc2VlLCB0aGlzIG1lc3NhZ2UgZG9lcyBub3QgYWxpZ24gd2l0aCB0
aGUgb3V0Y29tZSAoc2tpcCkuCklzIHRoaXMgcmVhbGx5IG5lZWRlZD8gZG9lcyBta3N3YXAgZmFp
bCBvbiB0bXBmcz8KSWYgaXQgZG9lcywgdGhlbiBzdXJlbHkgdGhlIGVudGlyZSB0ZXN0IGNhbiBi
ZSBza2lwcGVkCgo+ICsgICAgICAgICAgICAgICB9Cj4gKyAgICAgICB9Cj4gIH0KPgo+ICBzdGF0
aWMgdm9pZCBjbGVhbnVwKHZvaWQpCj4gZGlmZiAtLWdpdCBhL3Rlc3RjYXNlcy9rZXJuZWwvc3lz
Y2FsbHMvc3dhcG9mZi9zd2Fwb2ZmMDIuYyBiL3Rlc3RjYXNlcy9rZXJuZWwvc3lzY2FsbHMvc3dh
cG9mZi9zd2Fwb2ZmMDIuYwo+IGluZGV4IGI1YzYzMTJhMS4uMjI2NzQ0OWViIDEwMDY0NAo+IC0t
LSBhL3Rlc3RjYXNlcy9rZXJuZWwvc3lzY2FsbHMvc3dhcG9mZi9zd2Fwb2ZmMDIuYwo+ICsrKyBi
L3Rlc3RjYXNlcy9rZXJuZWwvc3lzY2FsbHMvc3dhcG9mZi9zd2Fwb2ZmMDIuYwo+IEBAIC0xMjQs
NyArMTI0LDYgQEAgc3RhdGljIHZvaWQgY2xlYW51cDAxKHZvaWQpCj4KPiAgc3RhdGljIHZvaWQg
c2V0dXAodm9pZCkKPiAgewo+IC0gICAgICAgbG9uZyB0eXBlOwo+ICAgICAgICAgc3RydWN0IHBh
c3N3ZCAqbm9ib2R5Owo+Cj4gICAgICAgICB0c3Rfc2lnKEZPUkssIERFRl9IQU5ETEVSLCBjbGVh
bnVwKTsKPiBAQCAtMTM4LDE1ICsxMzcsNiBAQCBzdGF0aWMgdm9pZCBzZXR1cCh2b2lkKQo+Cj4g
ICAgICAgICB0c3RfdG1wZGlyKCk7Cj4KPiAtICAgICAgIHN3aXRjaCAoKHR5cGUgPSB0c3RfZnNf
dHlwZShjbGVhbnVwLCAiLiIpKSkgewo+IC0gICAgICAgY2FzZSBUU1RfTkZTX01BR0lDOgo+IC0g
ICAgICAgY2FzZSBUU1RfVE1QRlNfTUFHSUM6Cj4gLSAgICAgICAgICAgICAgIHRzdF9icmttKFRD
T05GLCBjbGVhbnVwLAo+IC0gICAgICAgICAgICAgICAgICAgICAgICAiQ2Fubm90IGRvIHN3YXBv
ZmYgb24gYSBmaWxlIG9uICVzIGZpbGVzeXN0ZW0iLAo+IC0gICAgICAgICAgICAgICAgICAgICAg
ICB0c3RfZnNfdHlwZV9uYW1lKHR5cGUpKTsKPiAtICAgICAgIGJyZWFrOwo+IC0gICAgICAgfQo+
IC0KPiAgICAgICAgIGlmICghdHN0X2ZzX2hhc19mcmVlKE5VTEwsICIuIiwgMSwgVFNUX0tCKSkg
ewo+ICAgICAgICAgICAgICAgICB0c3RfYnJrbShUQlJPSywgY2xlYW51cCwKPiAgICAgICAgICAg
ICAgICAgICAgICAgICAgIkluc3VmZmljaWVudCBkaXNrIHNwYWNlIHRvIGNyZWF0ZSBzd2FwIGZp
bGUiKTsKPiBkaWZmIC0tZ2l0IGEvdGVzdGNhc2VzL2tlcm5lbC9zeXNjYWxscy9zd2Fwb24vc3dh
cG9uMDEuYyBiL3Rlc3RjYXNlcy9rZXJuZWwvc3lzY2FsbHMvc3dhcG9uL3N3YXBvbjAxLmMKPiBp
bmRleCAzMjUzOGY4MmIuLjA0MTljYWUyOCAxMDA2NDQKPiAtLS0gYS90ZXN0Y2FzZXMva2VybmVs
L3N5c2NhbGxzL3N3YXBvbi9zd2Fwb24wMS5jCj4gKysrIGIvdGVzdGNhc2VzL2tlcm5lbC9zeXNj
YWxscy9zd2Fwb24vc3dhcG9uMDEuYwo+IEBAIC0zMSw2ICszMSw3IEBAIHN0YXRpYyB2b2lkIGNs
ZWFudXAodm9pZCk7Cj4KPiAgY2hhciAqVENJRCA9ICJzd2Fwb24wMSI7Cj4gIGludCBUU1RfVE9U
QUwgPSAxOwo+ICtpbnQgZmlibWFwID0gMTsKPgo+ICBzdGF0aWMgbG9uZyBmc190eXBlOwo+Cj4g
QEAgLTM5LDEyICs0MCwxMSBAQCBzdGF0aWMgdm9pZCB2ZXJpZnlfc3dhcG9uKHZvaWQpCj4gICAg
ICAgICBURVNUKGx0cF9zeXNjYWxsKF9fTlJfc3dhcG9uLCAiLi9zd2FwZmlsZTAxIiwgMCkpOwo+
Cj4gICAgICAgICBpZiAoVEVTVF9SRVRVUk4gPT0gLTEpIHsKPiAtICAgICAgICAgICAgICAgaWYg
KGZzX3R5cGUgPT0gVFNUX0JUUkZTX01BR0lDICYmIGVycm5vID09IEVJTlZBTCkgewo+IC0gICAg
ICAgICAgICAgICAgICAgICAgIHRzdF9icmttKFRDT05GLCBjbGVhbnVwLAo+IC0gICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICJTd2FwZmlsZSBvbiBCVFJGUyBub3QgaW1wbGVtZXRlZCIp
Owo+IC0gICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKPiArICAgICAgICAgICAgICAgaWYg
KGZpYm1hcCA9PSAwKSB7Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgdHN0X3Jlc20oVENPTkYs
ICJGYWlsZWQgdG8gdHVybiBvbiBzd2FwZmlsZSIpOwoKUGxlYXNlIHRha2UgY2FyZSB0byBub3Qg
Y2hhbmdlIGxvZ2ljLgpZb3UgcmVwbGNhZWQgdHN0X2Jya20gd2l0aCB0c3RfcmVzbS4gSW50ZW50
aW9uYWw/CllvdSBhbHNvIGNoYW5nZSB0aGUgbWVhbmluZyBvZiB0aGUgd2FybmluZyBtZXNzYWdl
IHRvIHRoZSB3b3JzZSBJTU8KCj4gKyAgICAgICAgICAgICAgIH0gZWxzZSB7Cj4gKyAgICAgICAg
ICAgICAgICAgICAgICAgdHN0X3Jlc20oVEZBSUwgfCBUVEVSUk5PLCAiRmFpbGVkIHRvIHR1cm4g
b24gc3dhcGZpbGUiKTsKPiAgICAgICAgICAgICAgICAgfQo+IC0gICAgICAgICAgICAgICB0c3Rf
cmVzbShURkFJTCB8IFRURVJSTk8sICJGYWlsZWQgdG8gdHVybiBvbiBzd2FwZmlsZSIpOwo+ICAg
ICAgICAgfSBlbHNlIHsKPiAgICAgICAgICAgICAgICAgdHN0X3Jlc20oVFBBU1MsICJTdWNjZWVk
ZWQgdG8gdHVybiBvbiBzd2FwZmlsZSIpOwo+ICAgICAgICAgICAgICAgICAvKndlIG5lZWQgdG8g
dHVybiB0aGlzIHN3YXAgZmlsZSBvZmYgZm9yIC1pIG9wdGlvbiAqLwo+IEBAIC01OCw3ICs1OCw2
IEBAIHN0YXRpYyB2b2lkIHZlcmlmeV9zd2Fwb24odm9pZCkKPgo+ICBpbnQgbWFpbihpbnQgYWMs
IGNoYXIgKiphdikKPiAgewo+IC0KPiAgICAgICAgIGludCBsYzsKPgo+ICAgICAgICAgdHN0X3Bh
cnNlX29wdHMoYWMsIGF2LCBOVUxMLCBOVUxMKTsKPiBAQCAtODQsMTMgKzgzLDExIEBAIHN0YXRp
YyB2b2lkIHNldHVwKHZvaWQpCj4KPiAgICAgICAgIHRzdF90bXBkaXIoKTsKPgo+IC0gICAgICAg
c3dpdGNoICgoZnNfdHlwZSA9IHRzdF9mc190eXBlKGNsZWFudXAsICIuIikpKSB7Cj4gLSAgICAg
ICBjYXNlIFRTVF9ORlNfTUFHSUM6Cj4gLSAgICAgICBjYXNlIFRTVF9UTVBGU19NQUdJQzoKPiAt
ICAgICAgICAgICAgICAgdHN0X2Jya20oVENPTkYsIGNsZWFudXAsCj4gLSAgICAgICAgICAgICAg
ICAgICAgICAgICJDYW5ub3QgZG8gc3dhcG9uIG9uIGEgZmlsZSBvbiAlcyBmaWxlc3lzdGVtIiwK
PiAtICAgICAgICAgICAgICAgICAgICAgICAgdHN0X2ZzX3R5cGVfbmFtZShmc190eXBlKSk7Cj4g
LSAgICAgICBicmVhazsKPiArICAgICAgIGZzX3R5cGUgPSB0c3RfZnNfdHlwZShjbGVhbnVwLCAi
LiIpOwo+ICsgICAgICAgaWYgKHRzdF9maWJtYXAoIi4vdHN0X2ZpYm1hcCIsIHRzdF9mc190eXBl
X25hbWUoZnNfdHlwZSkpKSB7Cj4gKyAgICAgICAgICAgICAgIHRzdF9yZXNtKFRDT05GLAo+ICsg
ICAgICAgICAgICAgICAgICAgICAgICAiV2lsbCBub3QgcmVwb3J0IEZBSUwgYXMgRklCTUFQIGlv
Y3RsIG5vdCBzdXBwb3J0ZWQiKTsKPiArICAgICAgICAgICAgICAgZmlibWFwID0gMDsKPiAgICAg
ICAgIH0KPgo+ICAgICAgICAgbWFrZV9zd2FwZmlsZShjbGVhbnVwLCAic3dhcGZpbGUwMSIpOwo+
IGRpZmYgLS1naXQgYS90ZXN0Y2FzZXMva2VybmVsL3N5c2NhbGxzL3N3YXBvbi9zd2Fwb24wMi5j
IGIvdGVzdGNhc2VzL2tlcm5lbC9zeXNjYWxscy9zd2Fwb24vc3dhcG9uMDIuYwo+IGluZGV4IDRh
ZjUxMDVjNi4uODEyMGJlOTg3IDEwMDY0NAo+IC0tLSBhL3Rlc3RjYXNlcy9rZXJuZWwvc3lzY2Fs
bHMvc3dhcG9uL3N3YXBvbjAyLmMKPiArKysgYi90ZXN0Y2FzZXMva2VybmVsL3N5c2NhbGxzL3N3
YXBvbi9zd2Fwb24wMi5jCj4gQEAgLTQ0LDYgKzQ0LDcgQEAgc3RhdGljIHZvaWQgY2xlYW51cDAx
KHZvaWQpOwo+Cj4gIGNoYXIgKlRDSUQgPSAic3dhcG9uMDIiOwo+ICBpbnQgVFNUX1RPVEFMID0g
NDsKPiAraW50IGZpYm1hcCA9IDE7Cj4KPiAgc3RhdGljIHVpZF90IG5vYm9keV91aWQ7Cj4gIHN0
YXRpYyBpbnQgZG9fc3dhcG9mZjsKPiBAQCAtODEsMTQgKzgyLDE1IEBAIHN0YXRpYyB2b2lkIHZl
cmlmeV9zd2Fwb24oc3RydWN0IHRlc3RfY2FzZV90ICp0ZXN0KQo+ICAgICAgICAgICAgICAgICBy
ZXR1cm47Cj4gICAgICAgICB9Cj4KPiAtICAgICAgIGlmIChmc190eXBlID09IFRTVF9CVFJGU19N
QUdJQyAmJiBlcnJubyA9PSBFSU5WQUwpIHsKPiAtICAgICAgICAgICAgICAgdHN0X3Jlc20oVENP
TkYsICJTd2FwZmlsZSBvbiBCVFJGUyBub3QgaW1wbGVtZXRlZCIpOwo+IC0gICAgICAgICAgICAg
ICAgICAgICAgIHJldHVybjsKPiArICAgICAgIGlmIChmaWJtYXAgPT0gMSkgewo+ICsgICAgICAg
ICAgICAgICB0c3RfcmVzbShURkFJTCwgInN3YXBvbigyKSBmYWlsZWQgdG8gcHJvZHVjZSBleHBl
Y3RlZCBlcnJvcjoiCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICIgJWQsIGVycm5vOiAlcyBh
bmQgZ290ICVkLiIsIHRlc3QtPmV4cF9lcnJubywKPiArICAgICAgICAgICAgICAgICAgICAgICAg
dGVzdC0+ZXhwX2VycnZhbCwgVEVTVF9FUlJOTyk7CgpDaGFuZ2VzIG1lc3NhZ2UKCj4gKyAgICAg
ICB9IGVsc2Ugewo+ICsgICAgICAgICAgICAgICB0c3RfcmVzbShUQ09ORiwgInN3YXBvbigyKSBm
YWlsZWQgdG8gcHJvZHVjZSBleHBlY3RlZCBlcnJvcjoiCj4gKyAgICAgICAgICAgICAgICAgICAg
ICAgICIgJWQsIGVycm5vOiAlcyBhbmQgZ290ICVkLiIsIHRlc3QtPmV4cF9lcnJubywKPiArICAg
ICAgICAgICAgICAgICAgICAgICAgdGVzdC0+ZXhwX2VycnZhbCwgVEVTVF9FUlJOTyk7Cj4gICAg
ICAgICB9Cj4gLQo+IC0gICAgICAgdHN0X3Jlc20oVEZBSUwsICJzd2Fwb24oMikgZmFpbGVkIHRv
IHByb2R1Y2UgZXhwZWN0ZWQgZXJyb3I6Igo+IC0gICAgICAgICAgICAgICAgIiAlZCwgZXJybm86
ICVzIGFuZCBnb3QgJWQuIiwgdGVzdC0+ZXhwX2Vycm5vLAo+IC0gICAgICAgICAgICAgICAgdGVz
dC0+ZXhwX2VycnZhbCwgVEVTVF9FUlJOTyk7Cj4gIH0KPgo+ICBpbnQgbWFpbihpbnQgYWMsIGNo
YXIgKiphdikKPiBAQCAtMTMyLDEzICsxMzQsMTEgQEAgc3RhdGljIHZvaWQgc2V0dXAodm9pZCkK
Pgo+ICAgICAgICAgdHN0X3RtcGRpcigpOwo+Cj4gLSAgICAgICBzd2l0Y2ggKChmc190eXBlID0g
dHN0X2ZzX3R5cGUoY2xlYW51cCwgIi4iKSkpIHsKPiAtICAgICAgIGNhc2UgVFNUX05GU19NQUdJ
QzoKPiAtICAgICAgIGNhc2UgVFNUX1RNUEZTX01BR0lDOgo+IC0gICAgICAgICAgICAgICB0c3Rf
YnJrbShUQ09ORiwgY2xlYW51cCwKPiAtICAgICAgICAgICAgICAgICAgICAgICAgIkNhbm5vdCBk
byBzd2Fwb24gb24gYSBmaWxlIG9uICVzIGZpbGVzeXN0ZW0iLAo+IC0gICAgICAgICAgICAgICAg
ICAgICAgICB0c3RfZnNfdHlwZV9uYW1lKGZzX3R5cGUpKTsKPiAtICAgICAgIGJyZWFrOwo+ICsg
ICAgICAgZnNfdHlwZSA9IHRzdF9mc190eXBlKGNsZWFudXAsICIuIik7Cj4gKyAgICAgICBpZiAo
dHN0X2ZpYm1hcCgiLi90c3RfZmlibWFwIiwgdHN0X2ZzX3R5cGVfbmFtZShmc190eXBlKSkpIHsK
PiArICAgICAgICAgICAgICAgdHN0X3Jlc20oVENPTkYsCj4gKyAgICAgICAgICAgICAgICAgICAg
ICAgICJXaWxsIG5vdCByZXBvcnQgRkFJTCBhcyBGSUJNQVAgaW9jdGwgbm90IHN1cHBvcnRlZCIp
Owo+ICsgICAgICAgICAgICAgICBmaWJtYXAgPSAwOwo+ICAgICAgICAgfQo+Cj4gICAgICAgICBT
QUZFX1RPVUNIKGNsZWFudXAsICJub3Rzd2FwIiwgMDc3NywgTlVMTCk7Cj4gQEAgLTE0Niw4ICsx
NDYsNyBAQCBzdGF0aWMgdm9pZCBzZXR1cCh2b2lkKQo+ICAgICAgICAgbWFrZV9zd2FwZmlsZShj
bGVhbnVwLCAiYWxyZWFkeXVzZWQiKTsKPgo+ICAgICAgICAgaWYgKGx0cF9zeXNjYWxsKF9fTlJf
c3dhcG9uLCAiYWxyZWFkeXVzZWQiLCAwKSkgewo+IC0gICAgICAgICAgICAgICBpZiAoZnNfdHlw
ZSAhPSBUU1RfQlRSRlNfTUFHSUMgfHwgZXJybm8gIT0gRUlOVkFMKQo+IC0gICAgICAgICAgICAg
ICAgICAgICAgIHRzdF9yZXNtKFRXQVJOIHwgVEVSUk5PLCAic3dhcG9uKGFscmVhZHl1c2VkKSBm
YWlsZWQiKTsKPiArICAgICAgICAgICAgICAgdHN0X3Jlc20oVFdBUk4gfCBURVJSTk8sICJzd2Fw
b24oYWxyZWFkeXVzZWQpIGZhaWxlZCIpOwoKQ2hhbmdlIG9mIGxvZ2ljIGZvciBmaWJtYXAgPT0g
MCBjYXNlCgo+ICAgICAgICAgfSBlbHNlIHsKPiAgICAgICAgICAgICAgICAgZG9fc3dhcG9mZiA9
IDE7Cj4gICAgICAgICB9Cj4gZGlmZiAtLWdpdCBhL3Rlc3RjYXNlcy9rZXJuZWwvc3lzY2FsbHMv
c3dhcG9uL3N3YXBvbjAzLmMgYi90ZXN0Y2FzZXMva2VybmVsL3N5c2NhbGxzL3N3YXBvbi9zd2Fw
b24wMy5jCj4gaW5kZXggOTU1YWMyNDdiLi42OTZkMGEzZGQgMTAwNjQ0Cj4gLS0tIGEvdGVzdGNh
c2VzL2tlcm5lbC9zeXNjYWxscy9zd2Fwb24vc3dhcG9uMDMuYwo+ICsrKyBiL3Rlc3RjYXNlcy9r
ZXJuZWwvc3lzY2FsbHMvc3dhcG9uL3N3YXBvbjAzLmMKPiBAQCAtNDksNiArNDksNyBAQCBzdGF0
aWMgaW50IGNoZWNrX2FuZF9zd2Fwb2ZmKGNvbnN0IGNoYXIgKmZpbGVuYW1lKTsKPgo+ICBjaGFy
ICpUQ0lEID0gInN3YXBvbjAzIjsKPiAgaW50IFRTVF9UT1RBTCA9IDE7Cj4gK2ludCBmaWJtYXAg
PSAxOwo+Cj4gIHN0YXRpYyBpbnQgc3dhcGZpbGVzOwo+Cj4gQEAgLTY1LDYgKzY2LDE0IEBAIHN0
YXRpYyBzdHJ1Y3Qgc3dhcF90ZXN0ZmlsZV90IHsKPgo+ICBpbnQgZXhwZWN0ZWRfZXJybm8gPSBF
UEVSTTsKPgo+ICt2b2lkIHJlY29yZF9mYWlsdXJlX3NvZnQoaW50IGZsYWcsIGNoYXIgKnMsIGlu
dCBleHAsIGNoYXIgKmVycikKPiArewo+ICsgICAgICAgaWYgKGZpYm1hcCAhPSAxKQo+ICsgICAg
ICAgICAgICAgICBmbGFnID0gVENPTkY7Cj4gKwo+ICsgICAgICAgdHN0X3Jlc20oZmxhZywgcywg
ZXhwLCBlcnIpOwo+ICt9Cj4gKwo+ICBpbnQgbWFpbihpbnQgYWMsIGNoYXIgKiphdikKPiAgewo+
ICAgICAgICAgaW50IGxjOwo+IEBAIC04OCwxMCArOTcsMTAgQEAgaW50IG1haW4oaW50IGFjLCBj
aGFyICoqYXYpCj4gICAgICAgICAgICAgICAgICAgICAgICAgdHN0X3Jlc20oVFBBU1MsICJzd2Fw
b24oMikgZ290IGV4cGVjdGVkIGZhaWx1cmUgKCVkKSwiLAo+ICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIGV4cGVjdGVkX2Vycm5vKTsKPiAgICAgICAgICAgICAgICAgfSBlbHNlIGlm
IChURVNUX1JFVFVSTiA8IDApIHsKPiAtICAgICAgICAgICAgICAgICAgICAgICB0c3RfcmVzbShU
RkFJTCB8IFRURVJSTk8sCj4gKyAgICAgICAgICAgICAgICAgICAgICAgcmVjb3JkX2ZhaWx1cmVf
c29mdChURkFJTCB8IFRURVJSTk8sCj4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
InN3YXBvbigyKSBmYWlsZWQgdG8gcHJvZHVjZSBleHBlY3RlZCBlcnJvciAiCj4gLSAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIiglZCkuIFN5c3RlbSByZWJvb3QgcmVjb21tZW5kZWQu
IiwKPiAtICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBlY3RlZF9lcnJubyk7Cj4g
KyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIiglZCksIGdvdCAoJXMpLiBTeXN0ZW0g
cmVib290IHJlY29tbWVuZGVkLiIsCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ZXhwZWN0ZWRfZXJybm8sIHN0cmVycm9yKFRFU1RfRVJSTk8pKTsKPiAgICAgICAgICAgICAgICAg
fSBlbHNlIHsKPiAgICAgICAgICAgICAgICAgICAgICAgICAvKiBQcm9iYWJseSB0aGUgc3lzdGVt
IHN1cHBvcnRzIE1BWF9TV0FQRklMRVMgPiAzMCwKPiAgICAgICAgICAgICAgICAgICAgICAgICAg
KiBsZXQncyB0cnkgd2l0aCBNQVhfU1dBUEZJTEVTID09IDMyICovCj4gQEAgLTEwMyw4ICsxMTIs
MTAgQEAgaW50IG1haW4oaW50IGFjLCBjaGFyICoqYXYpCj4KPiAgICAgICAgICAgICAgICAgICAg
ICAgICAvKiBDaGVjayByZXR1cm4gY29kZSAobm93IHdlJ3JlIGV4cGVjdGluZyBzdWNjZXNzKSAq
Lwo+ICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChURVNUX1JFVFVSTiA8IDApIHsKPiAtICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRzdF9yZXNtKFRGQUlMIHwgVFRFUlJOTywKPiAt
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJzd2Fwb24oMikgZ290IGFu
IHVuZXhwZWN0ZWQgZmFpbHVyZSIpOwo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
cmVjb3JkX2ZhaWx1cmVfc29mdChURkFJTCB8IFRURVJSTk8sCj4gKyAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAic3dhcG9uKDIpIGdvdCBhbiB1bmV4cGVjdGVkIGZhaWx1
cmUiCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiKCVkOiAlcyku
IiwKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRFU1RfUkVUVVJO
LCBzdHJlcnJvcihURVNUX0VSUk5PKSk7Cj4gICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNl
IHsKPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIENhbGwgc3dhcG9uIHN5cyBj
YWxsIG9uY2UgYWdhaW4gZm9yIDMzCj4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
KiBub3cgd2UgaGF2ZSB0byByZWNlaXZlIGFuIGVycm9yICovCj4gQEAgLTEyMSw3ICsxMzIsNyBA
QCBpbnQgbWFpbihpbnQgYWMsIGNoYXIgKiphdikKPiAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIiBNQVhfU1dBUEZJTEVTIGlzIDMyIiwKPiAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwZWN0ZWRfZXJybm8p
Owo+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKPiAtICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHN0X3Jlc20oVEZBSUwsCj4gKyAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlY29yZF9mYWlsdXJlX3NvZnQoVEZBSUws
Cj4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJzd2Fw
b24oMikgZmFpbGVkIHRvIHByb2R1Y2UiCj4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICIgZXhwZWN0ZWQgZXJyb3I6ICVkLCBnb3QgJXMuIgo+ICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiIFN5c3RlbSByZWJv
b3QgYWZ0ZXIgZXhlY3V0aW9uIG9mIExUUCIKPiBAQCAtMTQxLDcgKzE1Miw2IEBAIGludCBtYWlu
KGludCBhYywgY2hhciAqKmF2KQo+Cj4gICAgICAgICBjbGVhbnVwKCk7Cj4gICAgICAgICB0c3Rf
ZXhpdCgpOwo+IC0KPiAgfQo+Cj4gIC8qCj4gQEAgLTIxNSw5ICsyMjUsNiBAQCBzdGF0aWMgaW50
IHNldHVwX3N3YXAodm9pZCkKPiAgICAgICAgICAgICAgICAgICAgICAgICAvKiB0dXJuIG9uIHRo
ZSBzd2FwIGZpbGUgKi8KPiAgICAgICAgICAgICAgICAgICAgICAgICByZXMgPSBsdHBfc3lzY2Fs
bChfX05SX3N3YXBvbiwgZmlsZW5hbWUsIDApOwo+ICAgICAgICAgICAgICAgICAgICAgICAgIGlm
IChyZXMgIT0gMCkgewo+IC0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZzX3R5
cGUgPT0gVFNUX0JUUkZTX01BR0lDICYmIGVycm5vID09IEVJTlZBTCkKPiAtICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhpdCgyKTsKPiAtCj4gICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICBpZiAoZXJybm8gPT0gRVBFUk0pIHsKPiAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnRmKCJTdWNjZXNzZnVsbHkgY3JlYXRlZCAlZCAi
Cj4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAic3dhcGZp
bGVzXG4iLCBqKTsKPiBAQCAtMjI1LDcgKzIzMiw4IEBAIHN0YXRpYyBpbnQgc2V0dXBfc3dhcCh2
b2lkKQo+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKPiAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnRmKCJGYWlsZWQgdG8gY3JlYXRl
ICIKPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJzd2Fw
ZmlsZTogJXNcbiIsIGZpbGVuYW1lKTsKPiAtICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgZXhpdCgxKTsKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgaWYgKGZpYm1hcCA9PSAxKQo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIGV4aXQoMSk7Cj4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9
Cj4gICAgICAgICAgICAgICAgICAgICAgICAgfQo+ICAgICAgICAgICAgICAgICB9Cj4gQEAgLTIz
MywxNSArMjQxLDggQEAgc3RhdGljIGludCBzZXR1cF9zd2FwKHZvaWQpCj4gICAgICAgICB9IGVs
c2UKPiAgICAgICAgICAgICAgICAgd2FpdHBpZChwaWQsICZzdGF0dXMsIDApOwo+Cj4gLSAgICAg
ICBzd2l0Y2ggKFdFWElUU1RBVFVTKHN0YXR1cykpIHsKPiAtICAgICAgIGNhc2UgMDoKPiAtICAg
ICAgIGJyZWFrOwo+IC0gICAgICAgY2FzZSAyOgo+IC0gICAgICAgICAgICAgICB0c3RfYnJrbShU
Q09ORiwgY2xlYW51cCwgIlN3YXBmaWxlIG9uIEJUUkZTIG5vdCBpbXBsZW1ldGVkIik7Cj4gLSAg
ICAgICBicmVhazsKPiAtICAgICAgIGRlZmF1bHQ6Cj4gKyAgICAgICBpZiAoV0VYSVRTVEFUVVMo
c3RhdHVzKSkgewo+ICAgICAgICAgICAgICAgICB0c3RfYnJrbShURkFJTCwgY2xlYW51cCwgIkZh
aWxlZCB0byBzZXR1cCBzd2FwcyIpOwo+IC0gICAgICAgYnJlYWs7Cj4gICAgICAgICB9Cj4KPiAg
ICAgICAgIC8qIENyZWF0ZSBhbGwgbmVlZGVkIGV4dHJhIHN3YXBmaWxlcyBmb3IgdGVzdGluZyAq
Lwo+IEBAIC0yNDksNyArMjUwLDYgQEAgc3RhdGljIGludCBzZXR1cF9zd2FwKHZvaWQpCj4gICAg
ICAgICAgICAgICAgIG1ha2Vfc3dhcGZpbGUoY2xlYW51cCwgc3dhcF90ZXN0ZmlsZXNbal0uZmls
ZW5hbWUpOwo+Cj4gICAgICAgICByZXR1cm4gMDsKPiAtCj4gIH0KPgo+ICAvKgo+IEBAIC0zMzMs
MTMgKzMzMywxMSBAQCBzdGF0aWMgdm9pZCBzZXR1cCh2b2lkKQo+Cj4gICAgICAgICB0c3RfdG1w
ZGlyKCk7Cj4KPiAtICAgICAgIHN3aXRjaCAoKGZzX3R5cGUgPSB0c3RfZnNfdHlwZShjbGVhbnVw
LCAiLiIpKSkgewo+IC0gICAgICAgY2FzZSBUU1RfTkZTX01BR0lDOgo+IC0gICAgICAgY2FzZSBU
U1RfVE1QRlNfTUFHSUM6Cj4gLSAgICAgICAgICAgICAgIHRzdF9icmttKFRDT05GLCBjbGVhbnVw
LAo+IC0gICAgICAgICAgICAgICAgICAgICAgICAiQ2Fubm90IGRvIHN3YXBvbiBvbiBhIGZpbGUg
b24gJXMgZmlsZXN5c3RlbSIsCj4gLSAgICAgICAgICAgICAgICAgICAgICAgIHRzdF9mc190eXBl
X25hbWUoZnNfdHlwZSkpOwo+IC0gICAgICAgYnJlYWs7Cj4gKyAgICAgICBmc190eXBlID0gdHN0
X2ZzX3R5cGUoY2xlYW51cCwgIi4iKTsKPiArICAgICAgIGlmICh0c3RfZmlibWFwKCIuL3RzdF9m
aWJtYXAiLCB0c3RfZnNfdHlwZV9uYW1lKGZzX3R5cGUpKSkgewo+ICsgICAgICAgICAgICAgICB0
c3RfcmVzbShUQ09ORiwKPiArICAgICAgICAgICAgICAgICAgICAgICAgIldpbGwgbm90IHJlcG9y
dCBGQUlMIGFzIEZJQk1BUCBpb2N0bCBub3Qgc3VwcG9ydGVkIik7Cj4gKyAgICAgICAgICAgICAg
IGZpYm1hcCA9IDA7Cj4gICAgICAgICB9Cj4KPiAgICAgICAgIFRFU1RfUEFVU0U7Cj4gLS0KPiAy
LjIxLjAKPgoKLS0gCk1haWxpbmcgbGlzdCBpbmZvOiBodHRwczovL2xpc3RzLmxpbnV4Lml0L2xp
c3RpbmZvL2x0cAo=
