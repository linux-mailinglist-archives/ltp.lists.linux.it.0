Return-Path: <ltp-bounces+lists+linux-ltp=lfdr.de@lists.linux.it>
X-Original-To: lists+linux-ltp@lfdr.de
Delivered-To: lists+linux-ltp@lfdr.de
Received: from picard.linux.it (picard.linux.it [IPv6:2001:1418:10:5::2])
	by mail.lfdr.de (Postfix) with ESMTPS id 8F01A22634
	for <lists+linux-ltp@lfdr.de>; Sun, 19 May 2019 07:25:54 +0200 (CEST)
Received: from picard.linux.it (localhost [IPv6:::1])
	by picard.linux.it (Postfix) with ESMTP id 6B0B03EA5C0
	for <lists+linux-ltp@lfdr.de>; Sun, 19 May 2019 07:25:54 +0200 (CEST)
X-Original-To: ltp@lists.linux.it
Delivered-To: ltp@picard.linux.it
Received: from in-4.smtp.seeweb.it (in-4.smtp.seeweb.it [217.194.8.4])
 by picard.linux.it (Postfix) with ESMTP id E50E33EA1BF
 for <ltp@lists.linux.it>; Sun, 19 May 2019 07:25:51 +0200 (CEST)
Received: from mail-pg1-x541.google.com (mail-pg1-x541.google.com
 [IPv6:2607:f8b0:4864:20::541])
 (using TLSv1.2 with cipher ECDHE-RSA-AES128-GCM-SHA256 (128/128 bits))
 (No client certificate requested)
 by in-4.smtp.seeweb.it (Postfix) with ESMTPS id 26EDA1000B33
 for <ltp@lists.linux.it>; Sun, 19 May 2019 07:25:43 +0200 (CEST)
Received: by mail-pg1-x541.google.com with SMTP id a3so5206618pgb.3
 for <ltp@lists.linux.it>; Sat, 18 May 2019 22:25:46 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=mbobrowski-org.20150623.gappssmtp.com; s=20150623;
 h=date:from:to:cc:subject:message-id:references:mime-version
 :content-disposition:in-reply-to:user-agent;
 bh=DRsUh2bfDErqHpoew7jIB16N2eBQ3mV6DLXHHVd7upg=;
 b=tXstX8PUbOawlBZrlRpeDscskQxL6goFveRuDsMVsC4Kj5yg7TLROb61ez8n8O+AX7
 YStvpRAurTXyTAtERyVE8BUsYr6YHXPasHN5rJrZ0j0N4JfgJD9E+YDpYdl0kqLeer/o
 CV2/4lbl8xrmpB0bIEjgzBJI9pE/ep8D5q/NcZW1LGGjQQ6tgLpYbW7viDmTHsSZINbZ
 BGTXwRuo24S2a9JJnU94COZtGDMvlPCfqVcQkzLxByBfgRlPtQjpGYbpHaxckIeLYs6x
 xp1EaYU/Vyuzv0lpDWoIe0SHrqe/AJSCIP77olajS/ofL66PPCCEfOV62uTJTdrcr/mw
 5Ryw==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:date:from:to:cc:subject:message-id:references
 :mime-version:content-disposition:in-reply-to:user-agent;
 bh=DRsUh2bfDErqHpoew7jIB16N2eBQ3mV6DLXHHVd7upg=;
 b=QtpdDPgRqwIrb23bftUkOnfAq9KdgpyM3H4nfXCifyBLsqE1CbRHWlGxm4MTGfc/Zq
 RHDy6MBY9lj4ET2g+c3LeE+ozSx87vsUglv6k54jkurEKul+LawFLom3ZMW6cS3AnOgD
 XP9Vus3JI6wJH6nnG6YXAnbiZ5mqeCkPxKLuFpBQXhFUOjKBWt9NTw6aXiLVh48GhlCO
 foSEzJ+ajVxptmZY+tusZ6tciDs4B3lNYDjtNBsvw/mJPViIlzLAWqsjQ7ud3jXM58Z+
 y71j9XpeSxotA/Kyqr431XuBGDRw/nPFrB/YMQjRXeqNh/IZTRD5PiJuKoztrPKeHDG7
 AWAA==
X-Gm-Message-State: APjAAAVAK/xmUxLcfM7znEzhe0mcSbGzTqIF12INcQb1BbFf1quEtxIy
 9Fx18cEuVmb66RIQ3J+5g5Un/PXqAw==
X-Google-Smtp-Source: APXvYqytLU/389+bUvrB/Ha6zNR+wh1KImXy9yXem/oRvQ7JjIP2e92gUF+m+12+E9agx9TDjClIJg==
X-Received: by 2002:a63:a55:: with SMTP id z21mr68197283pgk.440.1558243544310; 
 Sat, 18 May 2019 22:25:44 -0700 (PDT)
Received: from poseidon.Home (n114-74-156-190.sbr2.nsw.optusnet.com.au.
 [114.74.156.190])
 by smtp.gmail.com with ESMTPSA id o7sm19709854pfp.168.2019.05.18.22.25.40
 (version=TLS1_2 cipher=ECDHE-RSA-CHACHA20-POLY1305 bits=256/256);
 Sat, 18 May 2019 22:25:43 -0700 (PDT)
Date: Sun, 19 May 2019 15:25:35 +1000
From: Matthew Bobrowski <mbobrowski@mbobrowski.org>
To: ltp@lists.linux.it
Message-ID: <5a1302c56c25f53395757727ec509169bdd6bc03.1558242368.git.mbobrowski@mbobrowski.org>
References: <cover.1558242368.git.mbobrowski@mbobrowski.org>
MIME-Version: 1.0
Content-Disposition: inline
In-Reply-To: <cover.1558242368.git.mbobrowski@mbobrowski.org>
User-Agent: Mutt/1.11.3 (2019-02-01)
X-Virus-Scanned: clamav-milter 0.99.2 at in-4.smtp.seeweb.it
X-Virus-Status: Clean
X-Spam-Status: No, score=0.1 required=7.0 tests=DKIM_SIGNED,DKIM_VALID,
 SPF_HELO_NONE,SPF_NONE autolearn=disabled version=3.4.0
X-Spam-Checker-Version: SpamAssassin 3.4.0 (2014-02-07) on in-4.smtp.seeweb.it
Cc: jack@suse.cz
Subject: [LTP] [PATCH v3 1/3] syscalls/fanotify13: new test to verify
 FAN_REPORT_FID functionality
X-BeenThere: ltp@lists.linux.it
X-Mailman-Version: 2.1.18
Precedence: list
List-Id: Linux Test Project <ltp.lists.linux.it>
List-Unsubscribe: <https://lists.linux.it/options/ltp>,
 <mailto:ltp-request@lists.linux.it?subject=unsubscribe>
List-Archive: <http://lists.linux.it/pipermail/ltp/>
List-Post: <mailto:ltp@lists.linux.it>
List-Help: <mailto:ltp-request@lists.linux.it?subject=help>
List-Subscribe: <https://lists.linux.it/listinfo/ltp>,
 <mailto:ltp-request@lists.linux.it?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: ltp-bounces+lists+linux-ltp=lfdr.de@lists.linux.it
Sender: "ltp" <ltp-bounces+lists+linux-ltp=lfdr.de@lists.linux.it>

QSBuZXdseSBkZWZpbmVkIHRlc3QgZmlsZSB0byB2YWxpZGF0ZSB0aGUgZmFub3RpZnkgRkFOX1JF
UE9SVF9GSUQKZnVuY3Rpb25hbGl0eS4gQSBuZXcgbGluZSBlbnRyeSBmb3IgdGhpcyB0ZXN0IGZp
bGUgaGFzIGJlZW4gYWRkZWQgd2l0aGluCnJ1bnRlc3Qvc3lzY2FsbHMuCgpBZGRpdGlvbmFsbHks
IGRlZmluZWQgYSBoZWxwZXIgZnVuY3Rpb24gdGhhdCBjYW4gYmUgdXNlZCB0byBvYnRhaW4KX19r
ZXJuZWxfZnNpZF90IGFuZCBmaWxlX2hhbmRsZSBvYmplY3RzLiBUaGlzIGhlbHBlciB3aWxsIGJl
IHVzZWQgYnkKdGVzdCBmaWxlcyByZWxhdGVkIHRvIHZlcmlmeWluZyBGQU5fUkVQT1JUX0ZJRC4g
VGhlIG5hbWVfdG9faGFuZGxlX2F0KCkKZnVuY3Rpb24gaXMgY29uZGl0aW9uYWxseSBhZGRlZCB0
byBhY2NvbW1vZGF0ZSBmb3IgYnVpbGRzIG9uIG9sZGVyCmRpc3RyaWJ1dGlvbnMuCgpTaWduZWQt
b2ZmLWJ5OiBNYXR0aGV3IEJvYnJvd3NraSA8bWJvYnJvd3NraUBtYm9icm93c2tpLm9yZz4KUmV2
aWV3ZWQtYnk6IEFtaXIgR29sZHN0ZWluIDxhbWlyNzNpbEBnbWFpbC5jb20+Ci0tLQogY29uZmln
dXJlLmFjICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAxICsKIHJ1bnRlc3Qv
c3lzY2FsbHMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICAgMSArCiB0ZXN0Y2FzZXMv
a2VybmVsL3N5c2NhbGxzL2Zhbm90aWZ5Ly5naXRpZ25vcmUgfCAgIDEgKwogdGVzdGNhc2VzL2tl
cm5lbC9zeXNjYWxscy9mYW5vdGlmeS9mYW5vdGlmeS5oIHwgIDU2ICsrKy0KIC4uLi9rZXJuZWwv
c3lzY2FsbHMvZmFub3RpZnkvZmFub3RpZnkxMy5jICAgICB8IDMxMyArKysrKysrKysrKysrKysr
KysKIDUgZmlsZXMgY2hhbmdlZCwgMzY5IGluc2VydGlvbnMoKyksIDMgZGVsZXRpb25zKC0pCiBj
cmVhdGUgbW9kZSAxMDA2NDQgdGVzdGNhc2VzL2tlcm5lbC9zeXNjYWxscy9mYW5vdGlmeS9mYW5v
dGlmeTEzLmMKCmRpZmYgLS1naXQgYS9jb25maWd1cmUuYWMgYi9jb25maWd1cmUuYWMKaW5kZXgg
NTNhZDc4NGQ3Li5hYzRkODViMGUgMTAwNjQ0Ci0tLSBhL2NvbmZpZ3VyZS5hYworKysgYi9jb25m
aWd1cmUuYWMKQEAgLTY4LDYgKzY4LDcgQEAgQUNfQ0hFQ0tfRlVOQ1MoWyBcCiAgICAga2NtcCBc
CiAgICAgbWtkaXJhdCBcCiAgICAgbWtub2RhdCBcCisgICAgbmFtZV90b19oYW5kbGVfYXQgXAog
ICAgIG9wZW5hdCBcCiAgICAgcHJlYWR2IFwKICAgICBwcmVhZHYyIFwKZGlmZiAtLWdpdCBhL3J1
bnRlc3Qvc3lzY2FsbHMgYi9ydW50ZXN0L3N5c2NhbGxzCmluZGV4IDJiOGNhNzE5Yi4uZGZkYzZj
YmY5IDEwMDY0NAotLS0gYS9ydW50ZXN0L3N5c2NhbGxzCisrKyBiL3J1bnRlc3Qvc3lzY2FsbHMK
QEAgLTUzNyw2ICs1MzcsNyBAQCBmYW5vdGlmeTA5IGZhbm90aWZ5MDkKIGZhbm90aWZ5MTAgZmFu
b3RpZnkxMAogZmFub3RpZnkxMSBmYW5vdGlmeTExCiBmYW5vdGlmeTEyIGZhbm90aWZ5MTIKK2Zh
bm90aWZ5MTMgZmFub3RpZnkxMwogCiBpb3Blcm0wMSBpb3Blcm0wMQogaW9wZXJtMDIgaW9wZXJt
MDIKZGlmZiAtLWdpdCBhL3Rlc3RjYXNlcy9rZXJuZWwvc3lzY2FsbHMvZmFub3RpZnkvLmdpdGln
bm9yZSBiL3Rlc3RjYXNlcy9rZXJuZWwvc3lzY2FsbHMvZmFub3RpZnkvLmdpdGlnbm9yZQppbmRl
eCA0MjU2YjhjZDMuLjE2YmRkOTllNSAxMDA2NDQKLS0tIGEvdGVzdGNhc2VzL2tlcm5lbC9zeXNj
YWxscy9mYW5vdGlmeS8uZ2l0aWdub3JlCisrKyBiL3Rlc3RjYXNlcy9rZXJuZWwvc3lzY2FsbHMv
ZmFub3RpZnkvLmdpdGlnbm9yZQpAQCAtMTAsNCArMTAsNSBAQAogL2Zhbm90aWZ5MTAKIC9mYW5v
dGlmeTExCiAvZmFub3RpZnkxMgorL2Zhbm90aWZ5MTMKIC9mYW5vdGlmeV9jaGlsZApkaWZmIC0t
Z2l0IGEvdGVzdGNhc2VzL2tlcm5lbC9zeXNjYWxscy9mYW5vdGlmeS9mYW5vdGlmeS5oIGIvdGVz
dGNhc2VzL2tlcm5lbC9zeXNjYWxscy9mYW5vdGlmeS9mYW5vdGlmeS5oCmluZGV4IDE0NjU0Yjdj
Ny4uZDZlMjU5MDAyIDEwMDY0NAotLS0gYS90ZXN0Y2FzZXMva2VybmVsL3N5c2NhbGxzL2Zhbm90
aWZ5L2Zhbm90aWZ5LmgKKysrIGIvdGVzdGNhc2VzL2tlcm5lbC9zeXNjYWxscy9mYW5vdGlmeS9m
YW5vdGlmeS5oCkBAIC0yOSw2ICsyOSwxMSBAQAogI2RlZmluZQlfX0ZBTk9USUZZX0hfXwogCiAj
aW5jbHVkZSAiY29uZmlnLmgiCisjaW5jbHVkZSA8c3lzL3N0YXRmcy5oPgorI2luY2x1ZGUgPHN5
cy90eXBlcy5oPgorI2luY2x1ZGUgPHN5cy9zdGF0Lmg+CisjaW5jbHVkZSA8ZXJybm8uaD4KKyNp
bmNsdWRlIDxmY250bC5oPgogCiAjaWYgZGVmaW5lZChIQVZFX1NZU19GQU5PVElGWV9IKQogCkBA
IC01Nyw5ICs2Miw2IEBAIHN0YXRpYyBsb25nIGZhbm90aWZ5X21hcmsoaW50IGZkLCB1bnNpZ25l
ZCBpbnQgZmxhZ3MsIHVpbnQ2NF90IG1hc2ssCiAjaWZuZGVmIEZBTl9SRVBPUlRfVElECiAjZGVm
aW5lIEZBTl9SRVBPUlRfVElECQkweDAwMDAwMTAwCiAjZW5kaWYKLSNpZm5kZWYgRkFOX1JFUE9S
VF9GSUQKLSNkZWZpbmUgRkFOX1JFUE9SVF9GSUQJCTB4MDAwMDAyMDAKLSNlbmRpZgogCiAjaWZu
ZGVmIEZBTl9NQVJLX0lOT0RFCiAjZGVmaW5lIEZBTl9NQVJLX0lOT0RFCQkwCkBAIC04OSw2ICs5
MSw1NCBAQCBzdHJ1Y3QgZmFub3RpZnlfbWFya190eXBlIHsKIAljb25zdCBjaGFyICogbmFtZTsK
IH07CiAKKyNpZm5kZWYgRkFOX1JFUE9SVF9GSUQKKyNkZWZpbmUgRkFOX1JFUE9SVF9GSUQJCTB4
MDAwMDAyMDAKKworc3RydWN0IGZhbm90aWZ5X2V2ZW50X2luZm9faGVhZGVyIHsKKwl1aW50OF90
IGluZm9fdHlwZTsKKwl1aW50OF90IHBhZDsKKwl1aW50MTZfdCBsZW47Cit9OworCitzdHJ1Y3Qg
ZmFub3RpZnlfZXZlbnRfaW5mb19maWQgeworCXN0cnVjdCBmYW5vdGlmeV9ldmVudF9pbmZvX2hl
YWRlciBoZHI7CisJX19rZXJuZWxfZnNpZF90IGZzaWQ7CisJdW5zaWduZWQgY2hhciBoYW5kbGVb
MF07Cit9OworCisvKgorICogSGVscGVyIGZ1bmN0aW9uIHVzZWQgdG8gb2J0YWluIF9fa2VybmVs
X2ZzaWRfdCBhbmQgZmlsZV9oYW5kbGUgb2JqZWN0cworICogZm9yIGEgZ2l2ZW4gcGF0aC4gVXNl
ZCBieSB0ZXN0IGZpbGVzIGNvcnJlbGF0ZWQgdG8gRkFOX1JFUE9SVF9GSUQKKyAqIGZ1bmN0aW9u
YWxpdHkuCisgKi8KK3N0YXRpYyBpbmxpbmUgdm9pZCBmYW5vdGlmeV9nZXRfZmlkKGNvbnN0IGNo
YXIgKnBhdGgsIF9fa2VybmVsX2ZzaWRfdCAqZnNpZCwKKwkJCXN0cnVjdCBmaWxlX2hhbmRsZSAq
aGFuZGxlKQoreworCWludCBtb3VudF9pZDsKKwlzdHJ1Y3Qgc3RhdGZzIHN0YXRzOworCisJaWYg
KHN0YXRmcyhwYXRoLCAmc3RhdHMpID09IC0xKQorCQl0c3RfYnJrKFRCUk9LIHwgVEVSUk5PLAor
CQkJInN0YXRmcyglcywgLi4uKSBmYWlsZWQiLCBwYXRoKTsKKwltZW1jcHkoZnNpZCwgJnN0YXRz
LmZfZnNpZCwgc2l6ZW9mKHN0YXRzLmZfZnNpZCkpOworCisjaWZkZWYgSEFWRV9OQU1FX1RPX0hB
TkRMRV9BVAorCWlmIChuYW1lX3RvX2hhbmRsZV9hdChBVF9GRENXRCwgcGF0aCwgaGFuZGxlLCAm
bW91bnRfaWQsIDApID09IC0xKSB7CisJCWlmIChlcnJubyA9PSBFT1BOT1RTVVBQKSB7CisJCQl0
c3RfYnJrKFRDT05GLAorCQkJCSJmaWxlc3lzdGVtICVzIGRvZXMgbm90IHN1cHBvcnQgZmlsZSBo
YW5kbGVzIiwKKwkJCQl0c3RfZGV2aWNlLT5mc190eXBlKTsKKwkJfQorCQl0c3RfYnJrKFRCUk9L
IHwgVEVSUk5PLAorCQkJIm5hbWVfdG9faGFuZGxlX2F0KEFUX0ZEQ1dELCAlcywgLi4uKSBmYWls
ZWQiLCBwYXRoKTsKKwl9CisjZWxzZQorCXRzdF9icmsoVENPTkYsICJuYW1lX3RvX2hhbmRsZV9h
dCgpIGlzIG5vdCBpbXBsbWVudGVkIik7CisjZW5kaWYgLyogSEFWRV9OQU1FX1RPX0hBTkRMRV9B
VCAqLworfQorCisjZW5kaWYKKwogI2RlZmluZSBJTklUX0ZBTk9USUZZX01BUktfVFlQRSh0KSBc
CiAJeyBGQU5fTUFSS18gIyMgdCwgIkZBTl9NQVJLXyIgI3QgfQogCmRpZmYgLS1naXQgYS90ZXN0
Y2FzZXMva2VybmVsL3N5c2NhbGxzL2Zhbm90aWZ5L2Zhbm90aWZ5MTMuYyBiL3Rlc3RjYXNlcy9r
ZXJuZWwvc3lzY2FsbHMvZmFub3RpZnkvZmFub3RpZnkxMy5jCm5ldyBmaWxlIG1vZGUgMTAwNjQ0
CmluZGV4IDAwMDAwMDAwMC4uODIwZjEzOTBjCi0tLSAvZGV2L251bGwKKysrIGIvdGVzdGNhc2Vz
L2tlcm5lbC9zeXNjYWxscy9mYW5vdGlmeS9mYW5vdGlmeTEzLmMKQEAgLTAsMCArMSwzMTMgQEAK
Ky8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBHUEwtMi4wCisvKgorICogQ29weXJpZ2h0IChj
KSAyMDE4IE1hdHRoZXcgQm9icm93c2tpLiBBbGwgUmlnaHRzIFJlc2VydmVkLgorICoKKyAqIFN0
YXJ0ZWQgYnkgTWF0dGhldyBCb2Jyb3dza2kgPG1ib2Jyb3dza2lAbWJvYnJvd3NraS5vcmc+Cisg
KgorICogREVTQ1JJUFRJT04KKyAqCVZhbGlkYXRlIHRoYXQgdGhlIHZhbHVlcyByZXR1cm5lZCB3
aXRoaW4gYW4gZXZlbnQgd2hlbgorICoJRkFOX1JFUE9SVF9GSUQgaXMgc3BlY2lmaWVkIG1hdGNo
ZXMgdGhvc2UgdGhhdCBhcmUgb2J0YWluZWQgdmlhCisgKglleHBsaWNpdCBpbnZvY2F0aW9uIHRv
IHN5c3RlbSBjYWxscyBzdGF0ZnMoMikgYW5kCisgKgluYW1lX3RvX2hhbmRsZV9hdCgyKS4KKyAq
LworI2RlZmluZSBfR05VX1NPVVJDRQorI2luY2x1ZGUgImNvbmZpZy5oIgorCisjaW5jbHVkZSA8
c3RkaW8uaD4KKyNpbmNsdWRlIDxzdHJpbmcuaD4KKyNpbmNsdWRlIDxzeXMvc3RhdGZzLmg+Cisj
aW5jbHVkZSA8c3lzL3R5cGVzLmg+CisjaW5jbHVkZSA8c3lzL3N0YXQuaD4KKyNpbmNsdWRlIDxm
Y250bC5oPgorI2luY2x1ZGUgPGVycm5vLmg+CisjaW5jbHVkZSA8dW5pc3RkLmg+CisjaW5jbHVk
ZSAidHN0X3Rlc3QuaCIKKyNpbmNsdWRlICJmYW5vdGlmeS5oIgorCisjaWYgZGVmaW5lZChIQVZF
X1NZU19GQU5PVElGWV9IKQorI2luY2x1ZGUgPHN5cy9mYW5vdGlmeS5oPgorCisjZGVmaW5lIFBB
VEhfTEVOIDEyOAorI2RlZmluZSBCVUZfU0laRSAyNTYKKyNkZWZpbmUgRElSX09ORSAiZGlyX29u
ZSIKKyNkZWZpbmUgRklMRV9PTkUgImZpbGVfb25lIgorI2RlZmluZSBGSUxFX1RXTyAiZmlsZV90
d28iCisjZGVmaW5lIE1PVU5UX1BBVEggIm1udHBvaW50IgorI2RlZmluZSBFVkVOVF9NQVggQVJS
QVlfU0laRShvYmplY3RzKQorI2RlZmluZSBESVJfUEFUSF9PTkUgTU9VTlRfUEFUSCIvIkRJUl9P
TkUKKyNkZWZpbmUgRklMRV9QQVRIX09ORSBNT1VOVF9QQVRIIi8iRklMRV9PTkUKKyNkZWZpbmUg
RklMRV9QQVRIX1RXTyBNT1VOVF9QQVRIIi8iRklMRV9UV08KKworc3RydWN0IGV2ZW50X3Qgewor
CXVuc2lnbmVkIGxvbmcgbG9uZyBleHBlY3RlZF9tYXNrOworCV9fa2VybmVsX2ZzaWRfdCBmc2lk
OworCXN0cnVjdCBmaWxlX2hhbmRsZSBoYW5kbGU7CisJY2hhciBidWZbTUFYX0hBTkRMRV9TWl07
Cit9OworCitzdGF0aWMgc3RydWN0IG9iamVjdF90IHsKKwljb25zdCBjaGFyICpwYXRoOworCWlu
dCBpc19kaXI7Cit9IG9iamVjdHNbXSA9IHsKKwl7RklMRV9QQVRIX09ORSwgMH0sCisJe0ZJTEVf
UEFUSF9UV08sIDB9LAorCXtESVJfUEFUSF9PTkUsIDF9Cit9OworCitzdGF0aWMgc3RydWN0IHRl
c3RfY2FzZV90IHsKKwlzdHJ1Y3QgZmFub3RpZnlfbWFya190eXBlIG1hcms7CisJdW5zaWduZWQg
bG9uZyBsb25nIG1hc2s7Cit9IHRlc3RfY2FzZXNbXSA9IHsKKwl7CisJCUlOSVRfRkFOT1RJRllf
TUFSS19UWVBFKElOT0RFKSwKKwkJRkFOX09QRU4gfCBGQU5fQ0xPU0VfTk9XUklURQorCX0sCisJ
eworCQlJTklUX0ZBTk9USUZZX01BUktfVFlQRShJTk9ERSksCisJCUZBTl9PUEVOIHwgRkFOX0NM
T1NFX05PV1JJVEUgfCBGQU5fT05ESVIKKwl9LAorCXsKKwkJSU5JVF9GQU5PVElGWV9NQVJLX1RZ
UEUoTU9VTlQpLAorCQlGQU5fT1BFTiB8IEZBTl9DTE9TRV9OT1dSSVRFCisJfSwKKwl7CisJCUlO
SVRfRkFOT1RJRllfTUFSS19UWVBFKE1PVU5UKSwKKwkJRkFOX09QRU4gfCBGQU5fQ0xPU0VfTk9X
UklURSB8IEZBTl9PTkRJUgorCX0sCisJeworCQlJTklUX0ZBTk9USUZZX01BUktfVFlQRShGSUxF
U1lTVEVNKSwKKwkJRkFOX09QRU4gfCBGQU5fQ0xPU0VfTk9XUklURQorCX0sCisJeworCQlJTklU
X0ZBTk9USUZZX01BUktfVFlQRShGSUxFU1lTVEVNKSwKKwkJRkFOX09QRU4gfCBGQU5fQ0xPU0Vf
Tk9XUklURSB8IEZBTl9PTkRJUgorCX0KK307CisKK3N0YXRpYyBpbnQgZmFub3RpZnlfZmQ7Citz
dGF0aWMgY2hhciBldmVudHNfYnVmW0JVRl9TSVpFXTsKK3N0YXRpYyBzdHJ1Y3QgZXZlbnRfdCBl
dmVudF9zZXRbRVZFTlRfTUFYXTsKKworc3RhdGljIHZvaWQgY3JlYXRlX29iamVjdHModm9pZCkK
K3sKKwl1bnNpZ25lZCBpbnQgaTsKKworCWZvciAoaSA9IDA7IGkgPCBBUlJBWV9TSVpFKG9iamVj
dHMpOyBpKyspIHsKKwkJaWYgKG9iamVjdHNbaV0uaXNfZGlyKQorCQkJU0FGRV9NS0RJUihvYmpl
Y3RzW2ldLnBhdGgsIDA3NTUpOworCQllbHNlCisJCQlTQUZFX0ZJTEVfUFJJTlRGKG9iamVjdHNb
aV0ucGF0aCwgIjAiKTsKKwl9Cit9CisKK3N0YXRpYyB2b2lkIGdldF9vYmplY3Rfc3RhdHModm9p
ZCkKK3sKKwl1bnNpZ25lZCBpbnQgaTsKKwlmb3IgKGkgPSAwOyBpIDwgQVJSQVlfU0laRShvYmpl
Y3RzKTsgaSsrKSB7CisJCWV2ZW50X3NldFtpXS5oYW5kbGUuaGFuZGxlX2J5dGVzID0gTUFYX0hB
TkRMRV9TWjsKKwkJZmFub3RpZnlfZ2V0X2ZpZChvYmplY3RzW2ldLnBhdGgsICZldmVudF9zZXRb
aV0uZnNpZCwKKwkJCQkmZXZlbnRfc2V0W2ldLmhhbmRsZSk7CisJfQorfQorCitzdGF0aWMgdm9p
ZCBkb19zZXR1cCh2b2lkKQoreworCWludCBmZDsKKworCS8qIENoZWNrIGZvciBrZXJuZWwgZmFu
b3RpZnkgc3VwcG9ydCAqLworCWZkID0gU0FGRV9GQU5PVElGWV9JTklUKEZBTl9DTEFTU19OT1RJ
RiwgT19SRE9OTFkpOworCVNBRkVfQ0xPU0UoZmQpOworCisJLyogQ3JlYXRlIGZpbGUgYW5kIGRp
cmVjdG9yeSBvYmplY3RzIGZvciB0ZXN0aW5nICovCisJY3JlYXRlX29iamVjdHMoKTsKKworCS8q
IEdldCB0aGUgZmlsZXN5c3RlbSBmc2lkIGFuZCBmaWxlIGhhbmRsZSBmb3IgZWFjaCBjcmVhdGVk
IG9iamVjdCAqLworCWdldF9vYmplY3Rfc3RhdHMoKTsKK30KKworCitzdGF0aWMgaW50IHNldHVw
X21hcmtzKHVuc2lnbmVkIGludCBmZCwgc3RydWN0IHRlc3RfY2FzZV90ICp0YykKK3sKKwl1bnNp
Z25lZCBpbnQgaTsKKwlzdHJ1Y3QgZmFub3RpZnlfbWFya190eXBlICptYXJrID0gJnRjLT5tYXJr
OworCisJZm9yIChpID0gMDsgaSA8IEFSUkFZX1NJWkUob2JqZWN0cyk7IGkrKykgeworCQlpZiAo
ZmFub3RpZnlfbWFyayhmZCwgRkFOX01BUktfQUREIHwgbWFyay0+ZmxhZywgdGMtPm1hc2ssCisJ
CQkJCUFUX0ZEQ1dELCBvYmplY3RzW2ldLnBhdGgpID09IC0xKSB7CisJCQlpZiAoZXJybm8gPT0g
RUlOVkFMICYmCisJCQkJbWFyay0+ZmxhZyAmIEZBTl9NQVJLX0ZJTEVTWVNURU0pIHsKKwkJCQl0
c3RfcmVzKFRDT05GLAorCQkJCQkiRkFOX01BUktfRklMRVNZU1RFTSBub3Qgc3VwcG9ydGVkIGJ5
ICIKKwkJCQkJImtlcm5lbCIpOworCQkJCXJldHVybiAxOworCQkJfSBlbHNlIGlmIChlcnJubyA9
PSBFTk9ERVYgJiYKKwkJCQkJIWV2ZW50X3NldFtpXS5mc2lkLnZhbFswXSAmJgorCQkJCQkhZXZl
bnRfc2V0W2ldLmZzaWQudmFsWzFdKSB7CisJCQkJdHN0X3JlcyhUQ09ORiwKKwkJCQkJIkZBTl9S
RVBPUlRfRklEIG5vdCBzdXBwb3J0ZWQgb24gIgorCQkJCQkiZmlsZXN5c3RlbSB0eXBlICVzIiwK
KwkJCQkJdHN0X2RldmljZS0+ZnNfdHlwZSk7CisJCQkJcmV0dXJuIDE7CisJCQl9CisJCQl0c3Rf
YnJrKFRCUk9LIHwgVEVSUk5PLAorCQkJCSJmYW5vdGlmeV9tYXJrKCVkLCBGQU5fTUFSS19BREQs
IEZBTl9PUEVOLCAiCisJCQkJIkFUX0ZEQ1dELCAlcykgZmFpbGVkIiwKKwkJCQlmYW5vdGlmeV9m
ZCwgb2JqZWN0c1tpXS5wYXRoKTsKKwkJfQorCisJCS8qIFNldHVwIHRoZSBleHBlY3RlZCBtYXNr
IGZvciBlYWNoIGdlbmVyYXRlZCBldmVudCAqLworCQlldmVudF9zZXRbaV0uZXhwZWN0ZWRfbWFz
ayA9IHRjLT5tYXNrOworCQlpZiAoIW9iamVjdHNbaV0uaXNfZGlyKQorCQkJZXZlbnRfc2V0W2ld
LmV4cGVjdGVkX21hc2sgJj0gfkZBTl9PTkRJUjsKKwl9CisJcmV0dXJuIDA7Cit9CisKK3N0YXRp
YyB2b2lkIGRvX3Rlc3QodW5zaWduZWQgaW50IG51bWJlcikKK3sKKwl1bnNpZ25lZCBpbnQgaTsK
KwlpbnQgbGVuLCBmZHNbQVJSQVlfU0laRShvYmplY3RzKV07CisKKwlzdHJ1Y3QgZmlsZV9oYW5k
bGUgKmV2ZW50X2ZpbGVfaGFuZGxlOworCXN0cnVjdCBmYW5vdGlmeV9ldmVudF9tZXRhZGF0YSAq
bWV0YWRhdGE7CisJc3RydWN0IGZhbm90aWZ5X2V2ZW50X2luZm9fZmlkICpldmVudF9maWQ7CisJ
c3RydWN0IHRlc3RfY2FzZV90ICp0YyA9ICZ0ZXN0X2Nhc2VzW251bWJlcl07CisJc3RydWN0IGZh
bm90aWZ5X21hcmtfdHlwZSAqbWFyayA9ICZ0Yy0+bWFyazsKKworCXRzdF9yZXMoVElORk8sCisJ
CSJUZXN0ICMlZDogRkFOX1JFUE9SVF9GSUQgd2l0aCBtYXJrIGZsYWc6ICVzIiwKKwkJbnVtYmVy
LCBtYXJrLT5uYW1lKTsKKworCWZhbm90aWZ5X2ZkID0gZmFub3RpZnlfaW5pdChGQU5fQ0xBU1Nf
Tk9USUYgfCBGQU5fUkVQT1JUX0ZJRCwgT19SRE9OTFkpOworCWlmIChmYW5vdGlmeV9mZCA9PSAt
MSkgeworCQlpZiAoZXJybm8gPT0gRUlOVkFMKSB7CisJCQl0c3RfcmVzKFRDT05GLAorCQkJCSJG
QU5fUkVQT1JUX0ZJRCBub3Qgc3VwcG9ydGVkIGJ5IGtlcm5lbCIpOworCQkJcmV0dXJuOworCQl9
CisJCXRzdF9icmsoVEJST0sgfCBURVJSTk8sCisJCQkiZmFub3RpZnlfaW5pdChGQU5fQ0xBU1Nf
Tk9USUYgfCBGQU5fUkVQT1JUX0ZJRCwgIgorCQkJIk9fUkRPTkxZKSBmYWlsZWQiKTsKKwl9CisK
KwkvKiBQbGFjZSBtYXJrcyBvbiBhIHNldCBvZiBvYmplY3RzIGFuZCBzZXR1cCB0aGUgZXhwZWN0
ZWQgbWFza3MKKwkgKiBmb3IgZWFjaCBldmVudCB0aGF0IGlzIGV4cGVjdGVkIHRvIGJlIGdlbmVy
YXRlZAorCSAqLworCWlmIChzZXR1cF9tYXJrcyhmYW5vdGlmeV9mZCwgdGMpICE9IDApCisJCXJl
dHVybjsKKworCS8qIEdlbmVyYXRlIHNlcXVlbmNlIG9mIEZBTl9PUEVOIGV2ZW50cyBvbiBvYmpl
Y3RzICovCisJZm9yIChpID0gMDsgaSA8IEFSUkFZX1NJWkUob2JqZWN0cyk7IGkrKykKKwkJZmRz
W2ldID0gU0FGRV9PUEVOKG9iamVjdHNbaV0ucGF0aCwgT19SRE9OTFkpOworCisJLyogR2VuZXJh
dGUgc2VxdWVuY2Ugb2YgRkFOX0NMT1NFX05PV1JJVEUgZXZlbnRzIG9uIG9iamVjdHMuIEVhY2gK
KwkgKiBGQU5fQ0xPU0VfTk9XUklURSBldmVudCBpcyBleHBlY3RlZCB0byBiZSBtZXJnZWQgd2l0
aCBpdHMKKwkgKiByZXNwZWN0aXZlIEZBTl9PUEVOIGV2ZW50IHRoYXQgd2FzIHBlcmZvcm1lZCBv
biB0aGUgc2FtZSBvYmplY3QKKwkgKi8KKwlmb3IgKGkgPSAwOyBpIDwgQVJSQVlfU0laRShvYmpl
Y3RzKTsgaSsrKSB7CisJCWlmIChmZHNbaV0gPiAwKQorCQkJU0FGRV9DTE9TRShmZHNbaV0pOwor
CX0KKworCS8qIFJlYWQgZXZlbnRzIGZyb20gZXZlbnQgcXVldWUgKi8KKwlsZW4gPSBTQUZFX1JF
QUQoMCwgZmFub3RpZnlfZmQsIGV2ZW50c19idWYsIEJVRl9TSVpFKTsKKworCS8qIEl0ZXJhdGUg
b3ZlciBldmVudCBxdWV1ZSAqLworCWZvciAoaSA9IDAsIG1ldGFkYXRhID0gKHN0cnVjdCBmYW5v
dGlmeV9ldmVudF9tZXRhZGF0YSAqKSBldmVudHNfYnVmOworCQlGQU5fRVZFTlRfT0sobWV0YWRh
dGEsIGxlbik7CisJCW1ldGFkYXRhID0gRkFOX0VWRU5UX05FWFQobWV0YWRhdGEsIGxlbiksIGkr
KykgeworCQlldmVudF9maWQgPSAoc3RydWN0IGZhbm90aWZ5X2V2ZW50X2luZm9fZmlkICopICht
ZXRhZGF0YSArIDEpOworCQlldmVudF9maWxlX2hhbmRsZSA9IChzdHJ1Y3QgZmlsZV9oYW5kbGUg
KikgZXZlbnRfZmlkLT5oYW5kbGU7CisKKwkJLyogRmlsZSBkZXNjcmlwdG9yIGlzIHJlZHVuZGFu
dCB3aXRoIEZBTl9SRVBPUlRfRklEICovCisJCWlmIChtZXRhZGF0YS0+ZmQgIT0gRkFOX05PRkQp
CisJCQl0c3RfcmVzKFRGQUlMLAorCQkJCSJVbmV4cGVjdGVkbHkgcmVjZWl2ZWQgZmlsZSBkZXNj
cmlwdG9yICVkIGluICIKKwkJCQkiZXZlbnQuIEV4cGVjdGVkIHRvIGdldCBGQU5fTk9GRCglZCki
LAorCQkJCW1ldGFkYXRhLT5mZCwgRkFOX05PRkQpOworCisJCS8qIEVuc3VyZSB0aGF0IHRoZSBj
b3JyZWN0IG1hc2sgaGFzIGJlZW4gcmVwb3J0ZWQgaW4gZXZlbnQgKi8KKwkJaWYgKG1ldGFkYXRh
LT5tYXNrICE9IGV2ZW50X3NldFtpXS5leHBlY3RlZF9tYXNrKQorCQkJdHN0X3JlcyhURkFJTCwK
KwkJCQkiVW5leHBlY3RlZCBtYXNrIHJlY2VpdmVkOiAlbGx4IChleHBlY3RlZDogIgorCQkJCSIl
bGx4KSBpbiBldmVudCIsCisJCQkJbWV0YWRhdGEtPm1hc2ssCisJCQkJZXZlbnRfc2V0W2ldLmV4
cGVjdGVkX21hc2spOworCisJCS8qIFZlcmlmeSBoYW5kbGVfYnl0ZXMgcmV0dXJuZWQgaW4gZXZl
bnQgKi8KKwkJaWYgKGV2ZW50X2ZpbGVfaGFuZGxlLT5oYW5kbGVfYnl0ZXMKKwkJCQkhPSBldmVu
dF9zZXRbaV0uaGFuZGxlLmhhbmRsZV9ieXRlcykgeworCQkJdHN0X3JlcyhURkFJTCwKKwkJCQki
aGFuZGxlX2J5dGVzICgleCkgcmV0dXJuZWQgaW4gZXZlbnQgZG9lcyBub3QgIgorCQkJCSJlcXVh
bCB0byBoYW5kbGVfYnl0ZXMgKCV4KSByZXR1cm5lZCBpbiAiCisJCQkJIm5hbWVfdG9faGFuZGxl
X2F0KDIpIiwKKwkJCQlldmVudF9maWxlX2hhbmRsZS0+aGFuZGxlX2J5dGVzLAorCQkJCWV2ZW50
X3NldFtpXS5oYW5kbGUuaGFuZGxlX2J5dGVzKTsKKwkJCWNvbnRpbnVlOworCQl9CisKKwkJLyog
VmVyaWZ5IGhhbmRsZV90eXBlIHJldHVybmVkIGluIGV2ZW50ICovCisJCWlmIChldmVudF9maWxl
X2hhbmRsZS0+aGFuZGxlX3R5cGUgIT0KKwkJCQlldmVudF9zZXRbaV0uaGFuZGxlLmhhbmRsZV90
eXBlKSB7CisJCQl0c3RfcmVzKFRGQUlMLAorCQkJCSJoYW5kbGVfdHlwZSAoJXgpIHJldHVybmVk
IGluIGV2ZW50IGRvZXMgbm90ICIKKwkJCQkiZXF1YWwgdG8gaGFuZGxlX3R5cGUgKCV4KSByZXR1
cm5lZCBpbiAiCisJCQkJIm5hbWVfdG9faGFuZGxlX2F0KDIpIiwKKwkJCQlldmVudF9maWxlX2hh
bmRsZS0+aGFuZGxlX3R5cGUsCisJCQkJZXZlbnRfc2V0W2ldLmhhbmRsZS5oYW5kbGVfdHlwZSk7
CisJCQljb250aW51ZTsKKwkJfQorCisJCS8qIFZlcmlmeSBmaWxlIGlkZW50aWZpZXIgZl9oYW5k
bGUgcmV0dXJuZWQgaW4gZXZlbnQgKi8KKwkJaWYgKG1lbWNtcChldmVudF9maWxlX2hhbmRsZS0+
Zl9oYW5kbGUsCisJCQkJZXZlbnRfc2V0W2ldLmhhbmRsZS5mX2hhbmRsZSwKKwkJCQlldmVudF9z
ZXRbaV0uaGFuZGxlLmhhbmRsZV9ieXRlcykgIT0gMCkgeworCQkJdHN0X3JlcyhURkFJTCwKKwkJ
CQkiZXZlbnRfZmlsZV9oYW5kbGUtPmZfaGFuZGxlIGRvZXMgbm90IG1hdGNoICIKKwkJCQkiZXZl
bnRfc2V0W2ldLmhhbmRsZS5mX2hhbmRsZSByZXR1cm5lZCBpbiAiCisJCQkJIm5hbWVfdG9faGFu
ZGxlX2F0KDIpIik7CisJCQljb250aW51ZTsKKwkJfQorCisJCS8qIFZlcmlmeSBmaWxlc3lzdGVt
IElEIGZzaWQgIHJldHVybmVkIGluIGV2ZW50ICovCisJCWlmIChtZW1jbXAoJmV2ZW50X2ZpZC0+
ZnNpZCwgJmV2ZW50X3NldFtpXS5mc2lkLAorCQkJCXNpemVvZihldmVudF9zZXRbaV0uZnNpZCkp
ICE9IDApIHsKKwkJCXRzdF9yZXMoVEZBSUwsCisJCQkJImV2ZW50X2ZpZC5mc2lkICE9IHN0YXQu
Zl9mc2lkIHRoYXQgd2FzICIKKwkJCQkib2J0YWluZWQgdmlhIHN0YXRmcygyKSIpOworCQkJY29u
dGludWU7CisJCX0KKworCQl0c3RfcmVzKFRQQVNTLAorCQkJImdvdCBldmVudDogbWFzaz0lbGx4
LCBwaWQ9JWQsIGZpZD0leC4leC4lbHggdmFsdWVzICIKKwkJCSJyZXR1cm5lZCBpbiBldmVudCBt
YXRjaCB0aG9zZSByZXR1cm5lZCBpbiBzdGF0ZnMoMikgIgorCQkJImFuZCBuYW1lX3RvX2hhbmRs
ZV9hdCgyKSIsCisJCQltZXRhZGF0YS0+bWFzaywKKwkJCWdldHBpZCgpLAorCQkJZXZlbnRfZmlk
LT5mc2lkLnZhbFswXSwKKwkJCWV2ZW50X2ZpZC0+ZnNpZC52YWxbMV0sCisJCQkqKHVuc2lnbmVk
IGxvbmcgKikgZXZlbnRfZmlsZV9oYW5kbGUtPmZfaGFuZGxlKTsKKwl9Cit9CisKK3N0YXRpYyB2
b2lkIGRvX2NsZWFudXAodm9pZCkKK3sKKwlpZiAoZmFub3RpZnlfZmQgPiAwKQorCQlTQUZFX0NM
T1NFKGZhbm90aWZ5X2ZkKTsKK30KKworc3RhdGljIHN0cnVjdCB0c3RfdGVzdCB0ZXN0ID0gewor
CS5zZXR1cCA9IGRvX3NldHVwLAorCS50ZXN0ID0gZG9fdGVzdCwKKwkudGNudCA9IEFSUkFZX1NJ
WkUodGVzdF9jYXNlcyksCisJLmNsZWFudXAgPSBkb19jbGVhbnVwLAorCS5uZWVkc19yb290ID0g
MSwKKwkubmVlZHNfdG1wZGlyID0gMSwKKwkubW91bnRfZGV2aWNlID0gMSwKKwkubW50cG9pbnQg
PSBNT1VOVF9QQVRILAorCS5hbGxfZmlsZXN5c3RlbXMgPSAxCit9OworCisjZWxzZQorCVRTVF9U
RVNUX0NPTkYoIlN5c3RlbSBkb2VzIG5vdCBoYXZlIHJlcXVpcmVkIGZhbm90aWZ5IHN1cHBvcnQi
KTsKKyNlbmRpZgotLSAKMi4yMS4wCgoKLS0gCk1hdHRoZXcgQm9icm93c2tpCgotLSAKTWFpbGlu
ZyBsaXN0IGluZm86IGh0dHBzOi8vbGlzdHMubGludXguaXQvbGlzdGluZm8vbHRwCg==
