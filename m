Return-Path: <ltp-bounces+lists+linux-ltp=lfdr.de@lists.linux.it>
X-Original-To: lists+linux-ltp@lfdr.de
Delivered-To: lists+linux-ltp@lfdr.de
Received: from picard.linux.it (picard.linux.it [IPv6:2001:1418:10:5::2])
	by mail.lfdr.de (Postfix) with ESMTPS id 5AB30294D1D
	for <lists+linux-ltp@lfdr.de>; Wed, 21 Oct 2020 14:58:16 +0200 (CEST)
Received: from picard.linux.it (localhost [IPv6:::1])
	by picard.linux.it (Postfix) with ESMTP id D58503C56B0
	for <lists+linux-ltp@lfdr.de>; Wed, 21 Oct 2020 14:58:15 +0200 (CEST)
X-Original-To: ltp@lists.linux.it
Delivered-To: ltp@picard.linux.it
Received: from in-7.smtp.seeweb.it (in-7.smtp.seeweb.it
 [IPv6:2001:4b78:1:20::7])
 by picard.linux.it (Postfix) with ESMTP id 6E1473C2474
 for <ltp@lists.linux.it>; Wed, 21 Oct 2020 14:58:11 +0200 (CEST)
Received: from heian.cn.fujitsu.com (mail.cn.fujitsu.com [183.91.158.132])
 by in-7.smtp.seeweb.it (Postfix) with ESMTP id 2237E2009C8
 for <ltp@lists.linux.it>; Wed, 21 Oct 2020 14:58:09 +0200 (CEST)
X-IronPort-AV: E=Sophos;i="5.77,401,1596470400"; d="scan'208";a="100375798"
Received: from unknown (HELO cn.fujitsu.com) ([10.167.33.5])
 by heian.cn.fujitsu.com with ESMTP; 21 Oct 2020 20:58:07 +0800
Received: from G08CNEXMBPEKD04.g08.fujitsu.local (unknown [10.167.33.201])
 by cn.fujitsu.com (Postfix) with ESMTP id EBD3B48990FF;
 Wed, 21 Oct 2020 20:58:06 +0800 (CST)
Received: from localhost.localdomain (10.167.220.84) by
 G08CNEXMBPEKD04.g08.fujitsu.local (10.167.33.201) with Microsoft SMTP Server
 (TLS) id 15.0.1497.2; Wed, 21 Oct 2020 20:58:02 +0800
From: Yang Xu <xuyang2018.jy@cn.fujitsu.com>
To: <chrubis@suse.cz>
Date: Wed, 21 Oct 2020 20:57:51 +0800
Message-ID: <1603285074-28392-1-git-send-email-xuyang2018.jy@cn.fujitsu.com>
X-Mailer: git-send-email 1.8.3.1
In-Reply-To: <20200722154558.GB2714@yuki.lan>
References: <20200722154558.GB2714@yuki.lan>
MIME-Version: 1.0
X-Originating-IP: [10.167.220.84]
X-ClientProxiedBy: G08CNEXCHPEKD06.g08.fujitsu.local (10.167.33.205) To
 G08CNEXMBPEKD04.g08.fujitsu.local (10.167.33.201)
X-yoursite-MailScanner-ID: EBD3B48990FF.A054D
X-yoursite-MailScanner: Found to be clean
X-yoursite-MailScanner-From: xuyang2018.jy@cn.fujitsu.com
X-Spam-Status: No, score=0.4 required=7.0 tests=KHOP_HELO_FCRDNS, SPF_HELO_NONE,
 SPF_NONE autolearn=disabled version=3.4.4
X-Virus-Scanned: clamav-milter 0.102.4 at in-7.smtp.seeweb.it
X-Virus-Status: Clean
X-Spam-Checker-Version: SpamAssassin 3.4.4 (2020-01-24) on in-7.smtp.seeweb.it
Subject: [LTP] [PATCH v3 1/4] syscalls/msgstress: Add common file for
 msgstress
X-BeenThere: ltp@lists.linux.it
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Linux Test Project <ltp.lists.linux.it>
List-Unsubscribe: <https://lists.linux.it/options/ltp>,
 <mailto:ltp-request@lists.linux.it?subject=unsubscribe>
List-Archive: <http://lists.linux.it/pipermail/ltp/>
List-Post: <mailto:ltp@lists.linux.it>
List-Help: <mailto:ltp-request@lists.linux.it?subject=help>
List-Subscribe: <https://lists.linux.it/listinfo/ltp>,
 <mailto:ltp-request@lists.linux.it?subject=subscribe>
Cc: ltp@lists.linux.it
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: ltp-bounces+lists+linux-ltp=lfdr.de@lists.linux.it
Sender: "ltp" <ltp-bounces+lists+linux-ltp=lfdr.de@lists.linux.it>

Q29weSBvbGQgbGlibXNnY3RsLmMgdGhyZWUgZnVuY3Rpb25zKGRvcmVhZGVyLGRvd3JpdGVyLCBm
aWxsX2J1ZmZlciwgdmVyaWZ5KQppbnRvIHRoaXMgY29tbW9uIGZpbGUuIFRoZSByZWFzb24gZm9y
IG5vdCBwdXR0aW5nIGl0IGludG8gbGliIGRpcmVjdG9yeSBiZWNhdXNlCm9ubHkgbXNnc3RyZXNz
IGNhc2VzIHVzZSB0aGVzZSBmdW5jdGlvbnMuIFNvIHJhaXNpbmcgdGhlbSBpbnRvIGxpYiBsZXZl
bCBtYWtlcwpubyBzZW5zZS4KClNpZ25lZC1vZmYtYnk6IFlhbmcgWHUgPHh1eWFuZzIwMTguanlA
Y24uZnVqaXRzdS5jb20+Ci0tLQogLi4uL2tlcm5lbC9zeXNjYWxscy9pcGMvbXNnc3RyZXNzL01h
a2VmaWxlICAgIHwgIDIgKy0KIC4uLi9zeXNjYWxscy9pcGMvbXNnc3RyZXNzL21zZ3N0cmVzc19j
b21tb24uYyB8IDk1ICsrKysrKysrKysrKysrKysrKysKIC4uLi9zeXNjYWxscy9pcGMvbXNnc3Ry
ZXNzL21zZ3N0cmVzc19jb21tb24uaCB8IDI2ICsrKysrCiAzIGZpbGVzIGNoYW5nZWQsIDEyMiBp
bnNlcnRpb25zKCspLCAxIGRlbGV0aW9uKC0pCiBjcmVhdGUgbW9kZSAxMDA2NDQgdGVzdGNhc2Vz
L2tlcm5lbC9zeXNjYWxscy9pcGMvbXNnc3RyZXNzL21zZ3N0cmVzc19jb21tb24uYwogY3JlYXRl
IG1vZGUgMTAwNjQ0IHRlc3RjYXNlcy9rZXJuZWwvc3lzY2FsbHMvaXBjL21zZ3N0cmVzcy9tc2dz
dHJlc3NfY29tbW9uLmgKCmRpZmYgLS1naXQgYS90ZXN0Y2FzZXMva2VybmVsL3N5c2NhbGxzL2lw
Yy9tc2dzdHJlc3MvTWFrZWZpbGUgYi90ZXN0Y2FzZXMva2VybmVsL3N5c2NhbGxzL2lwYy9tc2dz
dHJlc3MvTWFrZWZpbGUKaW5kZXggYjgyMWJkYTAxLi4yYzhmYThlNWIgMTAwNjQ0Ci0tLSBhL3Rl
c3RjYXNlcy9rZXJuZWwvc3lzY2FsbHMvaXBjL21zZ3N0cmVzcy9NYWtlZmlsZQorKysgYi90ZXN0
Y2FzZXMva2VybmVsL3N5c2NhbGxzL2lwYy9tc2dzdHJlc3MvTWFrZWZpbGUKQEAgLTYsNyArNiw3
IEBAIHRvcF9zcmNkaXIgICAgICAgICAgICAgID89IC4uLy4uLy4uLy4uLy4uCiBMVFBMSUJTID0g
bHRwaXBjCiAKIGluY2x1ZGUgJCh0b3Bfc3JjZGlyKS9pbmNsdWRlL21rL3Rlc3RjYXNlcy5tawot
CitGSUxURVJfT1VUX01BS0VfVEFSR0VUUyAgICAgICAgIDo9IG1zZ3N0cmVzc19jb21tb24KIExU
UExETElCUyAgKz0gLWxsdHBpcGMKIAogaW5jbHVkZSAkKHRvcF9zcmNkaXIpL2luY2x1ZGUvbWsv
Z2VuZXJpY19sZWFmX3RhcmdldC5tawpkaWZmIC0tZ2l0IGEvdGVzdGNhc2VzL2tlcm5lbC9zeXNj
YWxscy9pcGMvbXNnc3RyZXNzL21zZ3N0cmVzc19jb21tb24uYyBiL3Rlc3RjYXNlcy9rZXJuZWwv
c3lzY2FsbHMvaXBjL21zZ3N0cmVzcy9tc2dzdHJlc3NfY29tbW9uLmMKbmV3IGZpbGUgbW9kZSAx
MDA2NDQKaW5kZXggMDAwMDAwMDAwLi4zNDMxMzU1ZjYKLS0tIC9kZXYvbnVsbAorKysgYi90ZXN0
Y2FzZXMva2VybmVsL3N5c2NhbGxzL2lwYy9tc2dzdHJlc3MvbXNnc3RyZXNzX2NvbW1vbi5jCkBA
IC0wLDAgKzEsOTUgQEAKKy8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBHUEwtMi4wLW9yLWxh
dGVyCisvKgorICogQ29weXJpZ2h0IChjKSBJbnRlcm5hdGlvbmFsIEJ1c2luZXNzIE1hY2hpbmVz
ICBDb3JwLiwgMjAwMgorICogQ29weXJpZ2h0IChjKSAyMDEzIE9yYWNsZSBhbmQvb3IgaXRzIGFm
ZmlsaWF0ZXMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCisgKiBDb3B5cmlnaHQgKGMpIDIwMjAgRlVK
SVRTVSBMSU1JVEVELiBBbGwgcmlnaHRzIHJlc2VydmVk44CCCisgKi8KKworI2RlZmluZSBUU1Rf
Tk9fREVGQVVMVF9NQUlOCisjaW5jbHVkZSAibXNnc3RyZXNzX2NvbW1vbi5oIgorCitpbnQgdmVy
aWZ5KGNoYXIgKmJ1ZiwgY2hhciB2YWwsIGludCBzaXplLCBpbnQgY2hpbGQpCit7CisJd2hpbGUg
KHNpemUtLSA+IDApIHsKKwkJaWYgKCpidWYrKyAhPSB2YWwpIHsKKwkJCXRzdF9yZXMoVEZBSUws
ICJWZXJpZnkgZXJyb3IgaW4gY2hpbGQgJWQsICpidWYgPSAleCwgIgorCQkJCSJ2YWwgPSAleCwg
c2l6ZSA9ICVkXG4iLCBjaGlsZCwgKmJ1ZiwgdmFsLAorCQkJCXNpemUpOworCQkJcmV0dXJuIDE7
CisJCX0KKwl9CisJcmV0dXJuIDA7Cit9CisKK3ZvaWQgZG9fcmVhZGVyKGxvbmcga2V5LCBpbnQg
dGlkLCBsb25nIHR5cGUsIGludCBjaGlsZCwgaW50IG5yZXBzKQoreworCWludCBpLCBzaXplOwor
CWludCBpZDsKKwlzdHJ1Y3QgbWJ1ZmZlciBidWZmZXI7CisKKwlpZCA9IFNBRkVfTVNHR0VUKGtl
eSwgMCk7CisJaWYgKGlkICE9IHRpZCkgeworCQl0c3RfcmVzKFRGQUlMLAorCQkJIk1lc3NhZ2Ug
cXVldWUgbWlzbWF0Y2ggaW4gdGhlIHJlYWRlciBvZiBjaGlsZCBncm91cCIKKwkJCSIgJWQgZm9y
IG1lc3NhZ2UgcXVldWUgaWQgJWRcbiIsIGNoaWxkLCBpZCk7CisJCXJldHVybjsKKwl9CisJZm9y
IChpID0gMDsgaSA8IG5yZXBzOyBpKyspIHsKKwkJbWVtc2V0KCZidWZmZXIsIDAsIHNpemVvZihi
dWZmZXIpKTsKKworCQlzaXplID0gU0FGRV9NU0dSQ1YoaWQsICZidWZmZXIsIDEwMCwgdHlwZSwg
MCk7CisJCWlmIChidWZmZXIudHlwZSAhPSB0eXBlKSB7CisJCQl0c3RfcmVzKFRGQUlMLCAiVHlw
ZSBtaXNtYXRjaCBpbiBjaGlsZCAlZCwgcmVhZCAjJWQsICIKKwkJCQkiZm9yIG1lc3NhZ2UgZ290
ICVsZCwgZXhlY3RlZCAlbGQiLAorCQkJCWNoaWxkLCAoaSArIDEpLCBidWZmZXIudHlwZSwgdHlw
ZSk7CisJCQlyZXR1cm47CisJCX0KKwkJaWYgKGJ1ZmZlci5kYXRhLmxlbiArIDEgIT0gc2l6ZSkg
eworCQkJdHN0X3JlcyhURkFJTCwgIlNpemUgbWlzbWF0Y2ggaW4gY2hpbGQgJWQsIHJlYWQgIyVk
LCAiCisJCQkJImZvciBtZXNzYWdlIGdvdCAlZCwgZXhwZWN0ZWQgJWQiLAorCQkJCWNoaWxkLCAo
aSArIDEpLCBidWZmZXIuZGF0YS5sZW4gKyAxLCBzaXplKTsKKwkJCXJldHVybjsKKwkJfQorCQlp
ZiAodmVyaWZ5KGJ1ZmZlci5kYXRhLnBieXRlcywgKGtleSAlIDI1NSksIHNpemUgLSAxLCBjaGls
ZCkpIHsKKwkJCXRzdF9yZXMoVEZBSUwsICJWZXJpZnkgZmFpbGVkIGluIGNoaWxkICVkIHJlYWQg
IyA9ICVkLCAiCisJCQkJImtleSA9ICVseFxuIiwgY2hpbGQsIChpICsgMSksIGtleSk7CisJCQly
ZXR1cm47CisJCX0KKwkJa2V5Kys7CisJfQorfQorCit2b2lkIGZpbGxfYnVmZmVyKGNoYXIgKmJ1
ZiwgY2hhciB2YWwsIGludCBzaXplKQoreworCWludCBpOworCisJZm9yIChpID0gMDsgaSA8IHNp
emU7IGkrKykKKwkJYnVmW2ldID0gdmFsOworfQorCit2b2lkIGRvX3dyaXRlcihsb25nIGtleSwg
aW50IHRpZCwgbG9uZyB0eXBlLCBpbnQgY2hpbGQsIGludCBucmVwcykKK3sKKwlpbnQgaSwgc2l6
ZTsKKwlpbnQgaWQ7CisJc3RydWN0IG1idWZmZXIgYnVmZmVyOworCisJaWQgPSBTQUZFX01TR0dF
VChrZXksIDApOworCWlmIChpZCAhPSB0aWQpIHsKKwkJdHN0X3JlcyhURkFJTCwgIk1lc3NhZ2Ug
cXVldWUgbWlzbWF0Y2ggaW4gdGhlIHJlYWRlciBvZiBjaGlsZCIKKwkJCSIgZ3JvdXAgJWQgZm9y
IG1lc3NhZ2UgcXVldWUgaWQgJWRcbiIsIGNoaWxkLCBpZCk7CisJCXJldHVybjsKKwl9CisKKwlm
b3IgKGkgPSAwOyBpIDwgbnJlcHM7IGkrKykgeworCQltZW1zZXQoJmJ1ZmZlciwgMCwgc2l6ZW9m
KGJ1ZmZlcikpOworCisJCWRvIHsKKwkJCXNpemUgPSAobHJhbmQ0OCgpICUgOTkpOworCQl9IHdo
aWxlIChzaXplID09IDApOworCQlmaWxsX2J1ZmZlcihidWZmZXIuZGF0YS5wYnl0ZXMsIChrZXkg
JSAyNTUpLCBzaXplKTsKKwkJYnVmZmVyLmRhdGEubGVuID0gc2l6ZTsKKwkJYnVmZmVyLnR5cGUg
PSB0eXBlOworCQlTQUZFX01TR1NORChpZCwgJmJ1ZmZlciwgc2l6ZSArIDEsIDApOworCQlrZXkr
KzsKKwl9Cit9CmRpZmYgLS1naXQgYS90ZXN0Y2FzZXMva2VybmVsL3N5c2NhbGxzL2lwYy9tc2dz
dHJlc3MvbXNnc3RyZXNzX2NvbW1vbi5oIGIvdGVzdGNhc2VzL2tlcm5lbC9zeXNjYWxscy9pcGMv
bXNnc3RyZXNzL21zZ3N0cmVzc19jb21tb24uaApuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAw
MDAwMDAwMDAuLjgxZTJmMjg4YgotLS0gL2Rldi9udWxsCisrKyBiL3Rlc3RjYXNlcy9rZXJuZWwv
c3lzY2FsbHMvaXBjL21zZ3N0cmVzcy9tc2dzdHJlc3NfY29tbW9uLmgKQEAgLTAsMCArMSwyNiBA
QAorLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQTC0yLjAtb3ItbGF0ZXIKKy8qCisgKiBD
b3B5cmlnaHQgKGMpIDIwMjAgRlVKSVRTVSBMSU1JVEVELiBBbGwgcmlnaHRzIHJlc2VydmVkLgor
ICogQXV0aG9yOiBZYW5nIFh1IDx4dXlhbmcyMDE4Lmp5QGNuLmZ1aml0c3UuY29tPgorICovCisK
KyNpZm5kZWYgTVNHU1RSRVNTX0NPTU1PTl9ICisjZGVmaW5lIE1TR1NUUkVTU19DT01NT05fSAor
CisjaW5jbHVkZSA8c3RkbGliLmg+CisjaW5jbHVkZSAidHN0X3NhZmVfc3lzdl9pcGMuaCIKKyNp
bmNsdWRlICJ0c3RfdGVzdC5oIgorCitzdHJ1Y3QgbWJ1ZmZlciB7CisJbG9uZyB0eXBlOworCXN0
cnVjdCB7CisJCWNoYXIgbGVuOworCQljaGFyIHBieXRlc1s5OV07CisJfSBkYXRhOworfTsKKwor
dm9pZCBkb19yZWFkZXIobG9uZyBrZXksIGludCB0aWQsIGxvbmcgdHlwZSwgaW50IGNoaWxkLCBp
bnQgbnJlcHMpOwordm9pZCBkb193cml0ZXIobG9uZyBrZXksIGludCB0aWQsIGxvbmcgdHlwZSwg
aW50IGNoaWxkLCBpbnQgbnJlcHMpOworCisjZW5kaWYKKwotLSAKMi4yMy4wCgoKCgotLSAKTWFp
bGluZyBsaXN0IGluZm86IGh0dHBzOi8vbGlzdHMubGludXguaXQvbGlzdGluZm8vbHRwCg==
