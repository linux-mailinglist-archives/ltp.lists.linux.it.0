Return-Path: <ltp-bounces+lists+linux-ltp=lfdr.de@lists.linux.it>
X-Original-To: lists+linux-ltp@lfdr.de
Delivered-To: lists+linux-ltp@lfdr.de
Received: from picard.linux.it (picard.linux.it [IPv6:2001:1418:10:5::2])
	by mail.lfdr.de (Postfix) with ESMTPS id 58517A119B0
	for <lists+linux-ltp@lfdr.de>; Wed, 15 Jan 2025 07:33:23 +0100 (CET)
Received: from picard.linux.it (localhost [IPv6:::1])
	by picard.linux.it (Postfix) with ESMTP id 710483C7B44
	for <lists+linux-ltp@lfdr.de>; Wed, 15 Jan 2025 07:33:22 +0100 (CET)
X-Original-To: ltp@lists.linux.it
Delivered-To: ltp@picard.linux.it
Received: from in-7.smtp.seeweb.it (in-7.smtp.seeweb.it
 [IPv6:2001:4b78:1:20::7])
 (using TLSv1.3 with cipher TLS_AES_256_GCM_SHA384 (256/256 bits)
 key-exchange X25519 server-signature ECDSA (secp384r1) server-digest SHA384)
 (No client certificate requested)
 by picard.linux.it (Postfix) with ESMTPS id 5981F3C7B0A
 for <ltp@lists.linux.it>; Wed, 15 Jan 2025 07:33:19 +0100 (CET)
Received: from mail-vk1-xa35.google.com (mail-vk1-xa35.google.com
 [IPv6:2607:f8b0:4864:20::a35])
 (using TLSv1.3 with cipher TLS_AES_128_GCM_SHA256 (128/128 bits)
 key-exchange X25519 server-signature RSA-PSS (2048 bits) server-digest SHA256)
 (No client certificate requested)
 by in-7.smtp.seeweb.it (Postfix) with ESMTPS id 2AE0A20A50B
 for <ltp@lists.linux.it>; Wed, 15 Jan 2025 07:33:19 +0100 (CET)
Received: by mail-vk1-xa35.google.com with SMTP id
 71dfb90a1353d-5174d53437eso3724416e0c.2
 for <ltp@lists.linux.it>; Tue, 14 Jan 2025 22:33:19 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20230601; t=1736922798; x=1737527598; darn=lists.linux.it;
 h=content-transfer-encoding:to:subject:message-id:date:from
 :in-reply-to:references:mime-version:from:to:cc:subject:date
 :message-id:reply-to;
 bh=tentZ8REsfsCYpWJg/FxUI9VfzU7oMKRZsv+ElXeSsg=;
 b=nNniUMSbzb3Q3mKzl5YUyu7sZOa3JbH/YO4J0NE/6sf3eevL8u1rfR7ANKrt2XJDgK
 ZUNG4t6SgckqMNpGTR5+i2ETOFdYLRUy57Xw9L/rXpL1+qSeM2NEYOU2ICdY3oqp9FfJ
 MdSiG0n+xo7o5JiS/dI/4ZqDhCOVf9PtC3ICFhF7Jt69EiKtVTyyMI80Y76GBPbVtGdN
 AHf0ZNMQ0g3nyJPvAQuVgmsKYsbNwWeDot9v4MtDvlIGjRIzT09NmEZCXSg48F9mdcED
 5xPzdvxt1d1CZTqGHX7X5CINiQIf3x3VSGQ1dkvjVbyhRELigCwfMh5pFN2nW6ihuYnM
 QjIA==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20230601; t=1736922798; x=1737527598;
 h=content-transfer-encoding:to:subject:message-id:date:from
 :in-reply-to:references:mime-version:x-gm-message-state:from:to:cc
 :subject:date:message-id:reply-to;
 bh=tentZ8REsfsCYpWJg/FxUI9VfzU7oMKRZsv+ElXeSsg=;
 b=NN16Nsr0wQk1hmCnXA9fJiVigmUMQVQbjHiwfsC6n/h+Pjy/DAApax/0HIOMugOFFU
 eF/bWxaKAi8gVmdaBy9HFon8cdXnZF0Q1V6WdY6L2pzghMZGo72l0DWAnGc+ESboKJRf
 EAeQU8eOaMrp/2Hf+krDOLoMLqgkPeDx5/Vynp5WhmlkoWCQVDcQS2hmY1k82cdO8MAq
 ZI3N9CNcdfoSVh9ZTz5GMRLv5OfSGuwEl1fmgTQ3XT0Hh2hJHR4WZs9pZ/ciyB4sPaUR
 FOgXLCAcQH8Qv3ztarBojCKIMoBkq7/wbehAq2CtaBDH2XU8hBnI1emOIH2GGVADyUKw
 bV3w==
X-Forwarded-Encrypted: i=1;
 AJvYcCWo32uDlVzNPKUwMMgb/QMNYw6cDE2EMzF9OJiNdAxbDUZUbmUVE2oTE1vDRsvJEtYoSZU=@lists.linux.it
X-Gm-Message-State: AOJu0YwXlry+SV94as9aL6wBjtQxTk5c367Qy0Zqu3GCrTTv1FpAqVpX
 UyKGB2zwqCFFUuyK46+TwW7DdgtBkkbQtc4h0S3lZcpDyUPac9m92mZuuU/YJcPHnU5t4sgND8l
 Gge5e/YO7yQdwNHZbnR777oDhYaQ=
X-Gm-Gg: ASbGncuqUp8oX0CViMiDDYSnj6boDIXGMmMHoIiC2fSgsnksK1l2dLNgjsg9EN5YmSd
 IUsTGZEWSL9eAsKjn2N2Nwld8V+aIHUJrzdTon/E=
X-Google-Smtp-Source: AGHT+IF/NqG2YRIqDGZvJ3gATnF+d4rOkbQ2w5YoulcaWmvPeAoYBp9os4k+DYCctarp7qdbGuhfAQnNJv8rKdZ0U5A=
X-Received: by 2002:a05:6122:2011:b0:518:89d9:dd99 with SMTP id
 71dfb90a1353d-51c6c1ff93fmr25067558e0c.3.1736922797890; Tue, 14 Jan 2025
 22:33:17 -0800 (PST)
MIME-Version: 1.0
References: <5a87594f-9066-4ee1-8bc7-5f9f2d71829a.jinguojie.jgj@alibaba-inc.com>
In-Reply-To: <5a87594f-9066-4ee1-8bc7-5f9f2d71829a.jinguojie.jgj@alibaba-inc.com>
From: Jin Guojie <guojie.jin@gmail.com>
Date: Wed, 15 Jan 2025 14:33:06 +0800
X-Gm-Features: AbW1kvbXDkq1ti0KHeqNahtDnl8XxEMSbGz914MWdPBYfji-ZhwBd74J04qsohQ
Message-ID: <CA+B+MYSmAjFQTbt98AZj-CRFSWT-dMc-3dAd5mQ=S6rDEYq+Sw@mail.gmail.com>
To: =?UTF-8?Q?Michal_Koutn=C3=BD?= <mkoutny@suse.com>, 
 Wei Gao <wegao@suse.com>, Li Wang <liwang@redhat.com>, ltp@lists.linux.it, 
 Andrea Cervesato <andrea.cervesato@suse.com>
X-Spam-Status: No, score=0.1 required=7.0 tests=DKIM_SIGNED,DKIM_VALID,
 DKIM_VALID_AU,DKIM_VALID_EF,FREEMAIL_FROM,SPF_HELO_NONE,SPF_PASS
 shortcircuit=no autolearn=disabled version=4.0.0
X-Spam-Checker-Version: SpamAssassin 4.0.0 (2022-12-13) on in-7.smtp.seeweb.it
X-Virus-Scanned: clamav-milter 1.0.3 at in-7.smtp.seeweb.it
X-Virus-Status: Clean
Subject: [LTP] [PATCH v3] memcg/memcontrol04: Fix judgment for
 recursive_protection
X-BeenThere: ltp@lists.linux.it
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Linux Test Project <ltp.lists.linux.it>
List-Unsubscribe: <https://lists.linux.it/options/ltp>,
 <mailto:ltp-request@lists.linux.it?subject=unsubscribe>
List-Archive: <http://lists.linux.it/pipermail/ltp/>
List-Post: <mailto:ltp@lists.linux.it>
List-Help: <mailto:ltp-request@lists.linux.it?subject=help>
List-Subscribe: <https://lists.linux.it/listinfo/ltp>,
 <mailto:ltp-request@lists.linux.it?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: ltp-bounces+lists+linux-ltp=lfdr.de@lists.linux.it
Sender: "ltp" <ltp-bounces+lists+linux-ltp=lfdr.de@lists.linux.it>

VjM6CiogRml4IGluaXRpYWxpemF0aW9uIG9mIHJvb3QtPm1lbW9yeV9yZWN1cnNpdmVwcm90Ciog
VGhlIHVzZSBvZiB0c3RfY2dfbWVtb3J5X3JlY3Vyc2l2ZXByb3QobGVhZl9jZ1tGXSkgaXMgY2hh
bmdlZCB0byBzYWZlIGNoZWNrCiogVGhlIHR5cGUgb2YgbWVtb3J5X3JlY3Vyc2l2ZXByb3QgaXMg
Y2hhbmdlZCB0byB1bnNpZ25lZCBpbnQKKiBSZWJhc2UgdGhlIGNvZGUgdG8gdGhlIGxhdGVzdCBi
cmFuY2gKClYyOgoqIENoYW5nZSB0aGUgZXhwZWN0ZWQgZXZlbnRzIGluIEYgZGVwZW5kaW5nIG9u
IG1lbW9yeV9yZWN1cnNpdmVwcm90CgpPbiBkaXN0cmlidXRpb25zIHdpdGggbWVtb3J5X3JlY3Vy
c2l2ZXByb3QgZW5hYmxlZCBieSBkZWZhdWx0IChmcm9tClVidW50dSAyMi4wNCB0byAyNC4xMCks
IHJ1bm5pbmcgdGhpcyBwYXNzZXPvvJoKCm1lbWNvbnRyb2wwNC5jOjIwODogVFBBU1M6IEV4cGVj
dDogKEMgb29tIGV2ZW50cz0wKSA9PSAwCm1lbWNvbnRyb2wwNC5jOjIxNDogVFBBU1M6IEV4cGVj
dDogKEMgbG93IGV2ZW50cz05NjQpID4gMAptZW1jb250cm9sMDQuYzoyMDg6IFRQQVNTOiBFeHBl
Y3Q6IChEIG9vbSBldmVudHM9MCkgPT0gMAptZW1jb250cm9sMDQuYzoyMTQ6IFRQQVNTOiBFeHBl
Y3Q6IChEIGxvdyBldmVudHM9OTY0KSA+IDAKbWVtY29udHJvbDA0LmM6MjA4OiBUUEFTUzogRXhw
ZWN0OiAoRSBvb20gZXZlbnRzPTApID09IDAKbWVtY29udHJvbDA0LmM6MjExOiBUUEFTUzogRXhw
ZWN0OiAoRSBsb3cgZXZlbnRzPTApID09IDAKbWVtY29udHJvbDA0LmM6MjA4OiBUUEFTUzogRXhw
ZWN0OiAoRiBvb20gZXZlbnRzPTApID09IDAKbWVtY29udHJvbDA0LmM6MjE0OiBUUEFTUzogRXhw
ZWN0OiAoRiBsb3cgZXZlbnRzPTg3OCkgPiAwCgpbMV0gaHR0cHM6Ly9saXN0cy5saW51eC5pdC9w
aXBlcm1haWwvbHRwLzIwMjQtTm92ZW1iZXIvMDQwOTQ2Lmh0bWwKWzJdIGh0dHBzOi8vbGlzdHMu
bGludXguaXQvcGlwZXJtYWlsL2x0cC8yMDI0LURlY2VtYmVyLzA0MTMxNi5odG1sCgpTaWduZWQt
b2ZmLWJ5OiBKaW4gR3VvamllIDxndW9qaWUuamluQGdtYWlsLmNvbT4KU3VnZ2VzdGVkLWJ5OiBS
aWNoYXJkIFBhbGV0aG9ycGUgPHJwYWxldGhvcnBlQHN1c2UuY29tPgpTdWdnZXN0ZWQtYnk6IE1p
Y2hhbCBLb3V0bsO9IDxta291dG55QHN1c2UuY29tPgpTdWdnZXN0ZWQtYnk6IFdlaSBHYW8gPHdl
Z2FvQHN1c2UuY29tPgpTdWdnZXN0ZWQtYnk6IExpIFdhbmcgPGxpd2FuZ0ByZWRoYXQuY29tPgot
LS0KIGluY2x1ZGUvdHN0X2Nncm91cC5oICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAg
MiArKwogbGliL3RzdF9jZ3JvdXAuYyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8
IDEzICsrKysrKysrKysrKysKIHRlc3RjYXNlcy9rZXJuZWwvY29udHJvbGxlcnMvbWVtY2cvbWVt
Y29udHJvbDA0LmMgfCAgOCArKysrLS0tLQogMyBmaWxlcyBjaGFuZ2VkLCAxOSBpbnNlcnRpb25z
KCspLCA0IGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2luY2x1ZGUvdHN0X2Nncm91cC5oIGIv
aW5jbHVkZS90c3RfY2dyb3VwLmgKaW5kZXggZDIzYThlNjUyLi4wNjhmZjgzMDYgMTAwNjQ0Ci0t
LSBhL2luY2x1ZGUvdHN0X2Nncm91cC5oCisrKyBiL2luY2x1ZGUvdHN0X2Nncm91cC5oCkBAIC0y
NTYsNCArMjU2LDYgQEAgaW50IHNhZmVfY2dfb2NjdXJzaW4oY29uc3QgY2hhciAqZmlsZSwgY29u
c3QgaW50IGxpbmVubywKICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNoYXIgKmNvbnN0
IGZpbGVfbmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNoYXIgKmNvbnN0IG5l
ZWRsZSk7CgoraW50IHRzdF9jZ19tZW1vcnlfcmVjdXJzaXZlcHJvdChzdHJ1Y3QgdHN0X2NnX2dy
b3VwICpjZyk7CisKICNlbmRpZiAvKiBUU1RfQ0dST1VQX0ggKi8KZGlmZiAtLWdpdCBhL2xpYi90
c3RfY2dyb3VwLmMgYi9saWIvdHN0X2Nncm91cC5jCmluZGV4IDYwNTUwMTVlYi4uMWY5MzU0YmE0
IDEwMDY0NAotLS0gYS9saWIvdHN0X2Nncm91cC5jCisrKyBiL2xpYi90c3RfY2dyb3VwLmMKQEAg
LTc2LDYgKzc2LDggQEAgc3RydWN0IGNncm91cF9yb290IHsKICAgICAgICBpbnQgd2VfbW91bnRl
ZF9pdDoxOwogICAgICAgIC8qIGNwdXNldCBpcyBpbiBjb21wYXRhYmlsaXR5IG1vZGUgKi8KICAg
ICAgICBpbnQgbm9fY3B1c2V0X3ByZWZpeDoxOworCisgICAgICAgdW5zaWduZWQgaW50IG1lbW9y
eV9yZWN1cnNpdmVwcm90OjE7CiB9OwoKIC8qIENvbnRyb2xsZXIgc3ViLXN5c3RlbXMgKi8KQEAg
LTU3Niw2ICs1NzgsNyBAQCBzdGF0aWMgdm9pZCBjZ3JvdXBfcm9vdF9zY2FuKGNvbnN0IGNoYXIg
KmNvbnN0IG1udF90eXBlLAogICAgICAgIHVpbnQzMl90IGN0cmxfZmllbGQgPSAwOwogICAgICAg
IGludCBub19wcmVmaXggPSAwOwogICAgICAgIGludCBuc2RlbGVnYXRlID0gMDsKKyAgICAgICBp
bnQgbWVtb3J5X3JlY3Vyc2l2ZXByb3QgPSAwOwogICAgICAgIGNoYXIgYnVmW0JVRlNJWl07CiAg
ICAgICAgY2hhciAqdG9rOwogICAgICAgIGNvbnN0IGludCBtbnRfZGZkID0gU0FGRV9PUEVOKG1u
dF9kaXIsIE9fUEFUSCB8IE9fRElSRUNUT1JZKTsKQEAgLTU5Miw2ICs1OTUsNyBAQCBzdGF0aWMg
dm9pZCBjZ3JvdXBfcm9vdF9zY2FuKGNvbnN0IGNoYXIgKmNvbnN0IG1udF90eXBlLAogICAgICAg
IH0KICAgICAgICBmb3IgKHRvayA9IHN0cnRvayhtbnRfb3B0cywgIiwiKTsgdG9rOyB0b2sgPSBz
dHJ0b2soTlVMTCwgIiwiKSkgewogICAgICAgICAgICAgICAgbnNkZWxlZ2F0ZSB8PSAhc3RyY21w
KCJuc2RlbGVnYXRlIiwgdG9rKTsKKyAgICAgICAgICAgICAgIG1lbW9yeV9yZWN1cnNpdmVwcm90
IHw9ICFzdHJjbXAoIm1lbW9yeV9yZWN1cnNpdmVwcm90IiwgdG9rKTsKICAgICAgICB9CgogICAg
ICAgIGlmIChyb290LT52ZXIgJiYgY3RybF9maWVsZCA9PSByb290LT5jdHJsX2ZpZWxkKQpAQCAt
NjQ0LDYgKzY0OCw3IEBAIGJhY2tyZWY6CiAgICAgICAgcm9vdC0+Y3RybF9maWVsZCA9IGN0cmxf
ZmllbGQ7CiAgICAgICAgcm9vdC0+bm9fY3B1c2V0X3ByZWZpeCA9IG5vX3ByZWZpeDsKICAgICAg
ICByb290LT5uc2RlbGVnYXRlID0gbnNkZWxlZ2F0ZTsKKyAgICAgICByb290LT5tZW1vcnlfcmVj
dXJzaXZlcHJvdCA9IG1lbW9yeV9yZWN1cnNpdmVwcm90OwoKICAgICAgICBmb3JfZWFjaF9jdHJs
KGN0cmwpIHsKICAgICAgICAgICAgICAgIGlmIChoYXNfY3RybChyb290LT5jdHJsX2ZpZWxkLCBj
dHJsKSkKQEAgLTE1MDksMyArMTUxNCwxMSBAQCBpbnQgc2FmZV9jZ19vY2N1cnNpbihjb25zdCBj
aGFyICpjb25zdCBmaWxlLApjb25zdCBpbnQgbGluZW5vLAoKICAgICAgICByZXR1cm4gISFzdHJz
dHIoYnVmLCBuZWVkbGUpOwogfQorCitpbnQgdHN0X2NnX21lbW9yeV9yZWN1cnNpdmVwcm90KHN0
cnVjdCB0c3RfY2dfZ3JvdXAgKmNnKQoreworICAgICAgIGlmIChjZyAmJiBjZy0+ZGlyc19ieV9j
dHJsWzBdLT5kaXJfcm9vdCkKKyAgICAgICAgICAgICAgIHJldHVybiBjZy0+ZGlyc19ieV9jdHJs
WzBdLT5kaXJfcm9vdC0+bWVtb3J5X3JlY3Vyc2l2ZXByb3Q7CisgICAgICAgcmV0dXJuIDA7Cit9
CisKZGlmZiAtLWdpdCBhL3Rlc3RjYXNlcy9rZXJuZWwvY29udHJvbGxlcnMvbWVtY2cvbWVtY29u
dHJvbDA0LmMKYi90ZXN0Y2FzZXMva2VybmVsL2NvbnRyb2xsZXJzL21lbWNnL21lbWNvbnRyb2ww
NC5jCmluZGV4IDFiOGQxMTVmOC4uMGE3N2Y2NjgxIDEwMDY0NAotLS0gYS90ZXN0Y2FzZXMva2Vy
bmVsL2NvbnRyb2xsZXJzL21lbWNnL21lbWNvbnRyb2wwNC5jCisrKyBiL3Rlc3RjYXNlcy9rZXJu
ZWwvY29udHJvbGxlcnMvbWVtY2cvbWVtY29udHJvbDA0LmMKQEAgLTIwNywxMiArMjA3LDEyIEBA
IHN0YXRpYyB2b2lkIHRlc3RfbWVtY2dfbG93KHZvaWQpCgogICAgICAgICAgICAgICAgVFNUX0VY
UF9FWFBSKG9vbSA9PSAwLCAiKCVjIG9vbSBldmVudHM9JWxkKSA9PSAwIiwgaWQsIG9vbSk7Cgot
ICAgICAgICAgICAgICAgaWYgKGkgPCBFKSB7Ci0gICAgICAgICAgICAgICAgICAgICAgIFRTVF9F
WFBfRVhQUihsb3cgPiAwLAotICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIigl
YyBsb3cgZXZlbnRzPSVsZCkgPiAwIiwgaWQsIGxvdyk7Ci0gICAgICAgICAgICAgICB9IGVsc2Ug
eworICAgICAgICAgICAgICAgaWYgKGkgPT0gRSB8fCAoKGkgPT0gRikgJiYKIXRzdF9jZ19tZW1v
cnlfcmVjdXJzaXZlcHJvdChsZWFmX2NnW0ZdKSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAg
VFNUX0VYUF9FWFBSKGxvdyA9PSAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIiglYyBsb3cgZXZlbnRzPSVsZCkgPT0gMCIsIGlkLCBsb3cpOworICAgICAgICAgICAgICAg
fSBlbHNlIHsKKyAgICAgICAgICAgICAgICAgICAgICAgVFNUX0VYUF9FWFBSKGxvdyA+IDAsCisg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiKCVjIGxvdyBldmVudHM9JWxkKSA+
IDAiLCBpZCwgbG93KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICB9CgotLQoyLjM0LjEKCi0t
IApNYWlsaW5nIGxpc3QgaW5mbzogaHR0cHM6Ly9saXN0cy5saW51eC5pdC9saXN0aW5mby9sdHAK
