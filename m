Return-Path: <ltp-bounces+lists+linux-ltp=lfdr.de@lists.linux.it>
X-Original-To: lists+linux-ltp@lfdr.de
Delivered-To: lists+linux-ltp@lfdr.de
Received: from picard.linux.it (picard.linux.it [IPv6:2001:1418:10:5::2])
	by mail.lfdr.de (Postfix) with ESMTPS id 60C59198C9B
	for <lists+linux-ltp@lfdr.de>; Tue, 31 Mar 2020 08:55:10 +0200 (CEST)
Received: from picard.linux.it (localhost [IPv6:::1])
	by picard.linux.it (Postfix) with ESMTP id F1AED3C30B9
	for <lists+linux-ltp@lfdr.de>; Tue, 31 Mar 2020 08:55:09 +0200 (CEST)
X-Original-To: ltp@lists.linux.it
Delivered-To: ltp@picard.linux.it
Received: from in-3.smtp.seeweb.it (in-3.smtp.seeweb.it
 [IPv6:2001:4b78:1:20::3])
 by picard.linux.it (Postfix) with ESMTP id 9833A3C30AC
 for <ltp@lists.linux.it>; Tue, 31 Mar 2020 08:55:07 +0200 (CEST)
Received: from mail-pg1-x544.google.com (mail-pg1-x544.google.com
 [IPv6:2607:f8b0:4864:20::544])
 (using TLSv1.2 with cipher ECDHE-RSA-AES128-GCM-SHA256 (128/128 bits))
 (No client certificate requested)
 by in-3.smtp.seeweb.it (Postfix) with ESMTPS id C48E61A01143
 for <ltp@lists.linux.it>; Tue, 31 Mar 2020 08:55:05 +0200 (CEST)
Received: by mail-pg1-x544.google.com with SMTP id a32so9926908pga.4
 for <ltp@lists.linux.it>; Mon, 30 Mar 2020 23:55:05 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20161025;
 h=from:to:cc:subject:date:message-id:mime-version
 :content-transfer-encoding;
 bh=qx/6gaVtDaINCT6z280hdBlD+xTalP/YkgtKVJxQHUI=;
 b=PXScykRo2whrLkuAQ0PC5aPRtdu2JE88E7UYsGeR9LUjAhpO6FE/UmTy6jV2BAJa/B
 Bb6cpjVIesDm7p3/Arw+S64lAIa6rl/mgXIQA+QyVYD/fwOJauqYH7kNwFti3FRqvGO0
 1aq1YdSCURuPaNVtYxGkkIf0QHHw04q/uX0MXBn5ZnlqvTggNL8vcUDDoWrwa/TNSZSL
 agi4cNnpbKVf93MbjrsM3w1klALq1Cg2u6CwZSqla/E9b2li8AUbFz7PrzkYLgP+GJkd
 NWRICkVCiErkCy8pG1Ho/xEfrxFR+nSOj1C2a2YxlMsMnOGrCb7aa3MXobCuxO2uB7ll
 3d6g==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:mime-version
 :content-transfer-encoding;
 bh=qx/6gaVtDaINCT6z280hdBlD+xTalP/YkgtKVJxQHUI=;
 b=dxaj6VaY5iXTLNsz7PWvEYB5pBIdjcBvDY0hla+kNdp1+94+SkJ65Twtwja1U1L6hv
 Hvj1Fyy/9cOYW0osxu/6fXQW6q4SaVe79gQFCZ6VYnPbMbwtIw6gjkqTrRYrL7YEMH8a
 MjqNvPdlyIKRsy2qFRhD4KVO7HiY2zhqnCd1DBnicKAERjk81Pc2GNpuGzDm4/z8YpC6
 XMMsnoku9QwRgKidfqnYTN0GVTJWvrUhzCDGTAsRPhjhp/Kkia7H175bh3AxAg65odUq
 hA+yebOfttBvBEMqYth2yFkoWYtRVV5RkUAhox7rN/lGFxqDhbN8r8fP0yB8ODLKhFiP
 XgUw==
X-Gm-Message-State: AGi0PuZzM0b57v2pkEjE4ZJ521XJOdGAhafoo1ZdqFuzkjavpD2iEOUw
 2iUdVD4lgrPlot4N1LuuXdvCYCZk
X-Google-Smtp-Source: APiQypIWnLZKmvg7zl0SvyQZrihgqQZpmIc6mmyHkHJ3CTWxG2Be7QnEm7F14t1G/UjAZJNAYutiSg==
X-Received: by 2002:aa7:9a47:: with SMTP id x7mr13861392pfj.29.1585637703465; 
 Mon, 30 Mar 2020 23:55:03 -0700 (PDT)
Received: from bj616583pcu.spreadtrum.com ([117.18.48.82])
 by smtp.gmail.com with ESMTPSA id 93sm1111936pjo.43.2020.03.30.23.55.00
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Mon, 30 Mar 2020 23:55:02 -0700 (PDT)
From: gengcixi@gmail.com
To: ltp@lists.linux.it
Date: Tue, 31 Mar 2020 14:54:42 +0800
Message-Id: <20200331065442.28591-1-gengcixi@gmail.com>
X-Mailer: git-send-email 2.17.1
MIME-Version: 1.0
X-Virus-Scanned: clamav-milter 0.99.2 at in-3.smtp.seeweb.it
X-Virus-Status: Clean
X-Spam-Status: No, score=0.1 required=7.0 tests=DKIM_SIGNED,DKIM_VALID,
 DKIM_VALID_AU,FREEMAIL_FROM,SPF_HELO_NONE,SPF_PASS autolearn=disabled
 version=3.4.0
X-Spam-Checker-Version: SpamAssassin 3.4.0 (2014-02-07) on in-3.smtp.seeweb.it
Subject: [LTP] [PATCH V3] uart: add uart testcase in kernel device-drivers
X-BeenThere: ltp@lists.linux.it
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Linux Test Project <ltp.lists.linux.it>
List-Unsubscribe: <https://lists.linux.it/options/ltp>,
 <mailto:ltp-request@lists.linux.it?subject=unsubscribe>
List-Archive: <http://lists.linux.it/pipermail/ltp/>
List-Post: <mailto:ltp@lists.linux.it>
List-Help: <mailto:ltp-request@lists.linux.it?subject=help>
List-Subscribe: <https://lists.linux.it/listinfo/ltp>,
 <mailto:ltp-request@lists.linux.it?subject=subscribe>
Cc: Orson Zhai <orsonzhai@gmail.com>, Carlos Hernandez <ceh@ti.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: ltp-bounces+lists+linux-ltp=lfdr.de@lists.linux.it
Sender: "ltp" <ltp-bounces+lists+linux-ltp=lfdr.de@lists.linux.it>

RnJvbTogQ2l4aSBHZW5nIDxnZW5nY2l4aUBnbWFpbC5jb20+CgotLS0KdGhlIHNlcmlhbGNoZWNr
LmMgaXMgZnJvbSBnaXRodWIoaHR0cHM6Ly9naXRodWIuY29tL25zZWtoYXIvc2VyaWFsY2hlY2su
Z2l0KQoKdGhlIHVhcnQuc2ggcmVmZXIgdG8gbHRwLWRkdCBzZXJpYWxjaGVjay5zaCB0ZXN0Y2Fz
ZS4KCnRlc3QgbG9nOgogICAgPDw8dGVzdF9vdXRwdXQ+Pj4KICAgIGluY3JlbWVudGluZyBzdG9w
CiAgICBzZXJpYWxjaGVjayAxIFRJTkZPOiB0aW1lb3V0IHBlciBydW4gaXMgMGggNW0gMHMKICAg
IHNlcmlhbGNoZWNrIDEgVElORk86IHN0YXJ0IHRlc3Qgb24gL2Rldi90dHlTMCAxMTUyMDAKICAg
IDErMCByZWNvcmRzIGluCiAgICAxKzAgcmVjb3JkcyBvdXQKICAgIDU3NjAwIGJ5dGVzICg1OCBr
QiwgNTYgS2lCKSBjb3BpZWQsIDAuMDAyNjA0IHMsIDIyLjEgTUIvcwogICAgTmVlZGVkIDAgcmVh
ZHMgMSB3cml0ZXMgbG9vcHMgNSAvIDUKICAgIGN0czogMCBkc3I6IDAgcm5nOiAwIGRjZDogMCBy
eDogMCB0eDogMjgzOTY4IGZyYW1lIDAgb3ZyIDAgcGFyOiAwIGJyazogMCBidWZfb3ZycjogMAog
ICAgc2VyaWFsY2hlY2sgMSBUUEFTUzogdWFydCAvZGV2L3R0eVMwIHRlc3QgMTE1MjAwIHBhc3Nl
ZAogICAgc2VyaWFsY2hlY2sgMSBUQ09ORjogdHR5UzEgcG9ydCBpcyB1c2VkLCBza2lwCiAgICAK
ICAgIFN1bW1hcnk6CiAgICBwYXNzZWQgICAxCiAgICBmYWlsZWQgICAwCiAgICBza2lwcGVkICAx
CiAgICB3YXJuaW5ncyAwCiAgICA8PDxleGVjdXRpb25fc3RhdHVzPj4+CiAgICBpbml0aWF0aW9u
X3N0YXR1cz0ib2siCiAgICBkdXJhdGlvbj0yNSB0ZXJtaW5hdGlvbl90eXBlPWV4aXRlZCB0ZXJt
aW5hdGlvbl9pZD0wIGNvcmVmaWxlPW5vCiAgICBjdXRpbWU9MjEgY3N0aW1lPTM2CiAgICA8PDx0
ZXN0X2VuZD4+PgotLS0KCnVzZSBzZXJpYWxjaGVjayB0b29sIHRlc3QgdWFydCBkZXZpY2UgaW4g
bG9vcGJhY2sgbW9kZS4KdGhlIHNoZWxsIHNjcmlwdHMgY2FuIGF1dG9tYXRpY2FsbHkgZGV0ZWN0
IHRoZSBtYWNoaW5lJ3MKdWFydCBkZXZpY2UsIGFuZCBmaWx0ZXIgb3V0IHRoZSBidXN5IHVzZWQg
cG9ydC4gdGhlbiBydW4Kc2VyaWFsY2hlY2sgdG8gdGVzdAoKU2lnbmVkLW9mZi1ieTogQ2FybG9z
IEhlcm5hbmRleiA8Y2VoQHRpLmNvbT4KU2lnbmVkLW9mZi1ieTogT3Jzb24gWmhhaSA8b3Jzb256
aGFpQGdtYWlsLmNvbT4KU2lnbmVkLW9mZi1ieTogQ2l4aSBHZW5nIDxnZW5nY2l4aUBnbWFpbC5j
b20+Ci0tLQogcnVudGVzdC91YXJ0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwg
ICA2ICsKIHRlc3RjYXNlcy9rZXJuZWwvZGV2aWNlLWRyaXZlcnMvTWFrZWZpbGUgICAgICB8ICAg
MSArCiB0ZXN0Y2FzZXMva2VybmVsL2RldmljZS1kcml2ZXJzL3VhcnQvTWFrZWZpbGUgfCAgMTMg
KwogLi4uL2tlcm5lbC9kZXZpY2UtZHJpdmVycy91YXJ0L3NlcmlhbGNoZWNrLmMgIHwgNTc4ICsr
KysrKysrKysrKysrKysrKwogdGVzdGNhc2VzL2tlcm5lbC9kZXZpY2UtZHJpdmVycy91YXJ0L3Vh
cnQuc2ggIHwgIDYxICsrCiA1IGZpbGVzIGNoYW5nZWQsIDY1OSBpbnNlcnRpb25zKCspCiBjcmVh
dGUgbW9kZSAxMDA2NDQgcnVudGVzdC91YXJ0CiBjcmVhdGUgbW9kZSAxMDA2NDQgdGVzdGNhc2Vz
L2tlcm5lbC9kZXZpY2UtZHJpdmVycy91YXJ0L01ha2VmaWxlCiBjcmVhdGUgbW9kZSAxMDA2NDQg
dGVzdGNhc2VzL2tlcm5lbC9kZXZpY2UtZHJpdmVycy91YXJ0L3NlcmlhbGNoZWNrLmMKIGNyZWF0
ZSBtb2RlIDEwMDc1NSB0ZXN0Y2FzZXMva2VybmVsL2RldmljZS1kcml2ZXJzL3VhcnQvdWFydC5z
aAoKZGlmZiAtLWdpdCBhL3J1bnRlc3QvdWFydCBiL3J1bnRlc3QvdWFydApuZXcgZmlsZSBtb2Rl
IDEwMDY0NAppbmRleCAwMDAwMDAwMDAuLjk5MGEwMTFhZgotLS0gL2Rldi9udWxsCisrKyBiL3J1
bnRlc3QvdWFydApAQCAtMCwwICsxLDYgQEAKKyMgdWFydCB0ZXN0IGluIGxvb3BiYWNrIG1vZGUK
K3VhcnRfOTYwMF9rIHVhcnQuc2ggOTYwMCA1IGsKK3VhcnRfMTkyMDBfayB1YXJ0LnNoIDE5MjAw
IDUgawordWFydF8zODQwMF9rIHVhcnQuc2ggMzg0MDAgNSBrCit1YXJ0XzU3NjAwX2sgIHVhcnQu
c2ggNTc2MDAgNSBrCit1YXJ0XzExNTIwMF9rIHVhcnQuc2ggMTE1MjAwIDUgawpkaWZmIC0tZ2l0
IGEvdGVzdGNhc2VzL2tlcm5lbC9kZXZpY2UtZHJpdmVycy9NYWtlZmlsZSBiL3Rlc3RjYXNlcy9r
ZXJuZWwvZGV2aWNlLWRyaXZlcnMvTWFrZWZpbGUKaW5kZXggNTVlMGQyNWEwLi5hMjE0ZjIxMWIg
MTAwNjQ0Ci0tLSBhL3Rlc3RjYXNlcy9rZXJuZWwvZGV2aWNlLWRyaXZlcnMvTWFrZWZpbGUKKysr
IGIvdGVzdGNhc2VzL2tlcm5lbC9kZXZpY2UtZHJpdmVycy9NYWtlZmlsZQpAQCAtMjcsNiArMjcs
NyBAQCBTVUJESVJTCQk6PSBhY3BpIFwKIAkJICAgcnRjIFwKIAkJICAgdGJpbyBcCiAJCSAgIHVh
Y2Nlc3MgXAorCQkgICB1YXJ0IFwKIAkJICAgenJhbQogCiBpbmNsdWRlICQodG9wX3NyY2Rpcikv
aW5jbHVkZS9tay9nZW5lcmljX3RydW5rX3RhcmdldC5tawpkaWZmIC0tZ2l0IGEvdGVzdGNhc2Vz
L2tlcm5lbC9kZXZpY2UtZHJpdmVycy91YXJ0L01ha2VmaWxlIGIvdGVzdGNhc2VzL2tlcm5lbC9k
ZXZpY2UtZHJpdmVycy91YXJ0L01ha2VmaWxlCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAw
MDAwMDAwMC4uMDVlNDFkNDQ0Ci0tLSAvZGV2L251bGwKKysrIGIvdGVzdGNhc2VzL2tlcm5lbC9k
ZXZpY2UtZHJpdmVycy91YXJ0L01ha2VmaWxlCkBAIC0wLDAgKzEsMTMgQEAKKyMhL2Jpbi9zaAor
IyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogR1BMLTIuMC1vci1sYXRlcgorIyBDb3B5cmlnaHQg
KGMpIDIwMTQtMjAxNSBPcmFjbGUgYW5kL29yIGl0cyBhZmZpbGlhdGVzLiBBbGwgUmlnaHRzIFJl
c2VydmVkLgorCit0b3Bfc3JjZGlyCT89IC4uLy4uLy4uLy4uCisKK0NGTEFHUys9LU8yIC1XYWxs
IC1XZXh0cmEgLWcgLVduby1zaWduLWNvbXBhcmUgLVduby1wb2ludGVyLXNpZ24KKworaW5jbHVk
ZSAkKHRvcF9zcmNkaXIpL2luY2x1ZGUvbWsvdGVzdGNhc2VzLm1rCisKK0lOU1RBTExfVEFSR0VU
UwkJOj0gKi5zaCBzZXJpYWxjaGVjaworCitpbmNsdWRlICQodG9wX3NyY2RpcikvaW5jbHVkZS9t
ay9nZW5lcmljX2xlYWZfdGFyZ2V0Lm1rCmRpZmYgLS1naXQgYS90ZXN0Y2FzZXMva2VybmVsL2Rl
dmljZS1kcml2ZXJzL3VhcnQvc2VyaWFsY2hlY2suYyBiL3Rlc3RjYXNlcy9rZXJuZWwvZGV2aWNl
LWRyaXZlcnMvdWFydC9zZXJpYWxjaGVjay5jCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAw
MDAwMDAwMC4uMWI3NWE4MTljCi0tLSAvZGV2L251bGwKKysrIGIvdGVzdGNhc2VzL2tlcm5lbC9k
ZXZpY2UtZHJpdmVycy91YXJ0L3NlcmlhbGNoZWNrLmMKQEAgLTAsMCArMSw1NzggQEAKKyNpbmNs
dWRlIDxhcmdwLmg+CisjaW5jbHVkZSA8c3RyaW5nLmg+CisjaW5jbHVkZSA8c3RkbGliLmg+Cisj
aW5jbHVkZSA8c3lzL3N0YXQuaD4KKyNpbmNsdWRlIDxmY250bC5oPgorI2luY2x1ZGUgPHRlcm1p
b3MuaD4KKyNpbmNsdWRlIDxzdGRhcmcuaD4KKyNpbmNsdWRlIDx1bmlzdGQuaD4KKyNpbmNsdWRl
IDxzeXMvbW1hbi5oPgorI2luY2x1ZGUgPHN0ZGludC5oPgorI2luY2x1ZGUgPHBvbGwuaD4KKyNp
bmNsdWRlIDxzeXMvaW9jdGwuaD4KKyNpbmNsdWRlIDxzaWduYWwuaD4KKyNpbmNsdWRlIDxzeXMv
dGltZS5oPgorI2luY2x1ZGUgPHN5cy9yZXNvdXJjZS5oPgorI2luY2x1ZGUgPGludHR5cGVzLmg+
CisKKyNpbmNsdWRlIDxsaW51eC9zZXJpYWwuaD4KKworI2RlZmluZSBUSU9DTV9PVVQxCTB4MjAw
MAorI2RlZmluZSBUSU9DTV9PVVQyCTB4NDAwMAorI2RlZmluZSBUSU9DTV9MT09QCTB4ODAwMAor
CisjZGVmaW5lIF9fc2FtZV90eXBlKGEsIGIpCV9fYnVpbHRpbl90eXBlc19jb21wYXRpYmxlX3Ao
dHlwZW9mKGEpLCB0eXBlb2YoYikpCisjZGVmaW5lIEJVSUxEX0JVR19PTl9aRVJPKGUpCShzaXpl
b2Yoc3RydWN0IHsgaW50Oi0hIShlKTsgfSkpCisjZGVmaW5lIF9fbXVzdF9iZV9hcnJheShhKQlC
VUlMRF9CVUdfT05fWkVSTyhfX3NhbWVfdHlwZSgoYSksICYoYSlbMF0pKQorI2RlZmluZSBBUlJB
WV9TSVpFKGFycikJKHNpemVvZihhcnIpIC8gc2l6ZW9mKChhcnIpWzBdKSArIF9fbXVzdF9iZV9h
cnJheShhcnIpKQorCisKKyNkZWZpbmUgbWluKHgsIHkpICh7CQkJXAorCQl0eXBlb2YoeCkgX21p
bjEgPSAoeCk7CVwKKwkJdHlwZW9mKHkpIF9taW4yID0gKHkpOwlcCisJCSh2b2lkKSAoJl9taW4x
ID09ICZfbWluMik7CVwKKwkJX21pbjEgPCBfbWluMiA/IF9taW4xIDogX21pbjI7CX0pCisKK3N0
YXRpYyBjb25zdCBjaGFyIGhleF9hc2NbXSA9ICIwMTIzNDU2Nzg5YWJjZGVmIjsKKyNkZWZpbmUg
aGV4X2FzY19sbyh4KQloZXhfYXNjWygoeCkgJiAweDBmKV0KKyNkZWZpbmUgaGV4X2FzY19oaSh4
KQloZXhfYXNjWygoeCkgJiAweGYwKSA+PiA0XQorCit2b2xhdGlsZSBzaWdfYXRvbWljX3QgaXNf
aW50ZXJydXB0ZWQgPSAwOworCit2b2lkIHNpZ2ludF9oYW5kbGVyKGludCBzaWcpCit7CisJcHJp
bnRmKCJDYXVnaHQgc2lnbmFsICVkXG4iLCBzaWcpOworCWlzX2ludGVycnVwdGVkID0gMTsKK30K
Kworc3RydWN0IGdfb3B0IHsKKwljaGFyICp1YXJ0X25hbWU7CisJY2hhciAqZmlsZV90cmFuczsK
Kwl1bnNpZ25lZCBpbnQgYmF1ZHJhdGU7CisjZGVmaW5lIE1PREVfRFVQTEVYCShNT0RFX1RYX09O
TFkgfCBNT0RFX1JYX09OTFkpCisjZGVmaW5lIE1PREVfVFhfT05MWQkoMSA8PCAwKQorI2RlZmlu
ZSBNT0RFX1JYX09OTFkJKDEgPDwgMSkKKwl1bnNpZ25lZCBpbnQgbW9kZTsKKwl1bnNpZ25lZCBp
bnQgbG9vcHM7CisJdW5zaWduZWQgY2hhciBoZmxvdzsKKwl1bnNpZ25lZCBjaGFyIGRvX3Rlcm1p
b3M7CisJdW5zaWduZWQgY2hhciAqY21wX2J1ZmY7CisJdW5zaWduZWQgY2hhciBsb29wYmFjazsK
K307CisKKy8qIG5hbWUsIGtleSwgYXJnLCBmbGFncywgZG9jLCBncm91cCAqLworc3RhdGljIHN0
cnVjdCBhcmdwX29wdGlvbiBvcHRpb25zW10gPSB7CisJeyJiYXVkIiwJJ2InLCAiTlVNIiwgIDAs
ICJiYXVkcmF0ZSIsIDB9LAorCXsiZGV2aWNlIiwJJ2QnLCAiRklMRSIsIDAsICJzZXJpYWwgbm9k
ZSBkZXZpY2UiLCAwfSwKKwl7ImZpbGUiLAknZicsICJGSUxFIiwgMCwgImJpbmFyeSBmaWxlIGZv
ciB0cmFuc2ZlcnMiLCAwfSwKKwl7ImhmbG93IiwJJ2gnLCBOVUxMLCAgIDAsICJlbmFibGUgaGFy
ZHdhcmUgZmxvdyBjb250cm9sIiwgMH0sCisJeyJtb2RlIiwJJ20nLCAiTSIsICAgIDAsICJ0cmFu
c2ZlciBtb2RlIChkID0gZHVwbGV4LCB0ID0gc2VuZCByID0gcmVjZWl2ZSkiLCAwfSwKKwl7Imxv
b3BzIiwJJ2wnLCAiTlVNIiwgIDAsICJsb29wcyB0byBwZXJmb3JtICgwID0+IHdhaXQgZm90IENU
UkwtQyIsIDB9LAorCXsibm8tdGVybWlvcyIsCSduJywgTlVMTCwgICAwLCAiTm8gdGVybWlvcyBj
aGFuZ2UgKGJhdWQgcmF0ZSBldGMuIHJlbWFpbnMgdW5jaGFuZ2VkKSIsIDB9LAorCXsibG9vcGJh
Y2siLAknaycsIE5VTEwsICAgMCwgImxvb3BiYWNrIG1vZGUiLCAwfSwKKwl7TlVMTCwgMCwgTlVM
TCwgMCwgTlVMTCwgMH0KK307CisKK3N0YXRpYyBlcnJvcl90IHBhcnNlX29wdChpbnQga2V5LCBj
aGFyICphcmcsIHN0cnVjdCBhcmdwX3N0YXRlICpzdGF0ZSkKK3sKKwlzdHJ1Y3QgZ19vcHQgKmdv
ID0gc3RhdGUtPmlucHV0OworCXVuc2lnbmVkIGxvbmcgbG9uZyBudW07CisJY2hhciAqcDsKKwll
cnJvcl90IHJldCA9IDA7CisKKwlzd2l0Y2ggKGtleSkgeworCWNhc2UgQVJHUF9LRVlfSU5JVDoK
KwkJbWVtc2V0KGdvLCAwLCBzaXplb2YoKmdvKSk7CisJCWdvLT5iYXVkcmF0ZSA9IDExNTIwMDsK
KwkJZ28tPmxvb3BzID0gVUlOVF9NQVg7CisJCWdvLT5kb190ZXJtaW9zID0gMTsKKwkJZ28tPmxv
b3BiYWNrID0gMDsKKwkJYnJlYWs7CisJY2FzZSBBUkdQX0tFWV9BUkc6CisJCXJldCA9ICBBUkdQ
X0VSUl9VTktOT1dOOworCQlicmVhazsKKwljYXNlICdiJzoKKwkJbnVtID0gc3RydG91bChhcmcs
ICZwLCAwKTsKKwkJaWYgKCFudW0gfHwgbnVtID4gVUlOVF9NQVggfHwgKnAgIT0gJ1wwJykgewor
CQkJcHJpbnRmKCJVbnN1cHBvcnRlZCBiYXVkcmF0ZTogJXNcbiIsIGFyZyk7CisJCQlyZXQgPSAg
QVJHUF9FUlJfVU5LTk9XTjsKKwkJfSBlbHNlCisJCQlnby0+YmF1ZHJhdGUgPSBudW07CisJCWJy
ZWFrOworCWNhc2UgJ2QnOgorCQlmcmVlKGdvLT51YXJ0X25hbWUpOworCQlnby0+dWFydF9uYW1l
ID0gc3RyZHVwKGFyZyk7CisJCWJyZWFrOworCWNhc2UgJ2YnOgorCQlmcmVlKGdvLT5maWxlX3Ry
YW5zKTsKKwkJZ28tPmZpbGVfdHJhbnMgPSBzdHJkdXAoYXJnKTsKKwkJYnJlYWs7CisJY2FzZSAn
aCc6CisJCWdvLT5oZmxvdyA9IDE7CisJCWJyZWFrOworCWNhc2UgJ20nOgorCQlpZiAoYXJnWzBd
ID09ICdyJykKKwkJCWdvLT5tb2RlID0gTU9ERV9SWF9PTkxZOworCQllbHNlIGlmIChhcmdbMF0g
PT0gJ3QnKQorCQkJZ28tPm1vZGUgPSBNT0RFX1RYX09OTFk7CisJCWVsc2UgaWYgKGFyZ1swXSA9
PSAnZCcpCisJCQlnby0+bW9kZSA9IE1PREVfRFVQTEVYOworCQllbHNlIHsKKwkJCXByaW50Zigi
VW5zdXBvcnRlZCBtb2RlOiAlc1xuIiwgYXJnKTsKKwkJCXJldCA9IEFSR1BfRVJSX1VOS05PV047
CisJCX0KKwkJYnJlYWs7CisJY2FzZSAnbic6CisJCWdvLT5kb190ZXJtaW9zID0gMDsKKwkJYnJl
YWs7CisJY2FzZSAnbCc6CisJCW51bSA9IHN0cnRvdWxsKGFyZywgJnAsIDApOworCQlpZiAobnVt
ID49IFVJTlRfTUFYIHx8ICpwICE9ICdcMCcpIHsKKwkJCXByaW50ZigiVW5zdXBvcnRlZCBsb29w
IGNvdW50OiAlc1xuIiwgYXJnKTsKKwkJCXJldCA9IEFSR1BfRVJSX1VOS05PV047CisJCX0gZWxz
ZQorCQkJZ28tPmxvb3BzID0gbnVtOworCQlicmVhazsKKwljYXNlICdrJzoKKwkJZ28tPmxvb3Bi
YWNrID0gMTsKKwkJYnJlYWs7CisJZGVmYXVsdDoKKwkJcmV0ID0gQVJHUF9FUlJfVU5LTk9XTjsK
Kwl9CisJcmV0dXJuIHJldDsKK30KKworc3RhdGljIHN0cnVjdCBhcmdwIGFyZ3AgPSB7CisJLm9w
dGlvbnMgPSBvcHRpb25zLAorCS5wYXJzZXIgPSBwYXJzZV9vcHQsCisJLmRvYyA9ICJ1c2VyIHN0
cmVzcyB0ZXN0aW5nIHRvb2wiLAorfTsKKworc3RhdGljIHZvaWQgZGllaChjb25zdCBjaGFyICpz
KQoreworCXByaW50ZigiRXJyb3I6ICVzLiBVc2UgLS1oZWxwXG4iLCBzKTsKKwlleGl0KDEpOwor
fQorCitzdGF0aWMgdm9pZCBkaWUoY29uc3QgY2hhciAqZm10LCAuLi4pCit7CisJdmFfbGlzdCBh
cDsKKworCXZhX3N0YXJ0KGFwLCBmbXQpOworCXZwcmludGYoZm10LCBhcCk7CisJdmFfZW5kKGFw
KTsKKwlleGl0KDEpOworfQorCitzdGF0aWMgaW50IHByaW50X3JldF9uZWcoY29uc3QgY2hhciAq
Zm10LCAuLi4pCit7CisJdmFfbGlzdCBhcDsKKworCXZhX3N0YXJ0KGFwLCBmbXQpOworCXZwcmlu
dGYoZm10LCBhcCk7CisJdmFfZW5kKGFwKTsKKwlyZXR1cm4gLTE7Cit9CisKK3N0YXRpYyBpbnQg
dnNjbnByaW50ZihjaGFyICpidWYsIHNpemVfdCBzaXplLCBjb25zdCBjaGFyICpmbXQsIHZhX2xp
c3QgYXJncykKK3sKKwlpbnQgaTsKKworCWkgPSB2c25wcmludGYoYnVmLCBzaXplLCBmbXQsIGFy
Z3MpOworCisJaWYgKGkgPCBzaXplKQorCQlyZXR1cm4gaTsKKwlpZiAoc2l6ZSAhPSAwKQorCQly
ZXR1cm4gc2l6ZSAtIDE7CisJcmV0dXJuIDA7Cit9CisKK3N0YXRpYyBpbnQgc2NucHJpbnRmKGNo
YXIgKmJ1Ziwgc2l6ZV90IHNpemUsIGNvbnN0IGNoYXIgKmZtdCwgLi4uKQoreworCXZhX2xpc3Qg
YXJnczsKKwlpbnQgaTsKKworCXZhX3N0YXJ0KGFyZ3MsIGZtdCk7CisJaSA9IHZzY25wcmludGYo
YnVmLCBzaXplLCBmbXQsIGFyZ3MpOworCXZhX2VuZChhcmdzKTsKKworCXJldHVybiBpOworfQor
CisKK3N0YXRpYyB2b2lkIGhleF9kdW1wX3RvX2J1ZmZlcihjb25zdCB2b2lkICpidWYsIHNpemVf
dCBsZW4sIGludCByb3dzaXplLAorCQlpbnQgZ3JvdXBzaXplLCBjaGFyICpsaW5lYnVmLCBzaXpl
X3QgbGluZWJ1ZmxlbiwKKwkJaW50IGFzY2lpKQoreworCWNvbnN0IHVpbnQ4X3QgKnB0ciA9IGJ1
ZjsKKwl1aW50OF90IGNoOworCWludCBqLCBseCA9IDA7CisJaW50IGFzY2lpX2NvbHVtbjsKKwor
CWlmIChyb3dzaXplICE9IDE2ICYmIHJvd3NpemUgIT0gMzIpCisJCXJvd3NpemUgPSAxNjsKKwor
CWlmICghbGVuKQorCQlnb3RvIG5pbDsKKwlpZiAobGVuID4gcm93c2l6ZSkgICAgICAgICAgICAg
IC8qIGxpbWl0IHRvIG9uZSBsaW5lIGF0IGEgdGltZSAqLworCQlsZW4gPSByb3dzaXplOworCWlm
ICgobGVuICUgZ3JvdXBzaXplKSAhPSAwKSAgICAgLyogbm8gbWl4ZWQgc2l6ZSBvdXRwdXQgKi8K
KwkJZ3JvdXBzaXplID0gMTsKKworCXN3aXRjaCAoZ3JvdXBzaXplKSB7CisJY2FzZSA4OiB7CisJ
CWNvbnN0IHVpbnQ2NF90ICpwdHI4ID0gYnVmOworCQlpbnQgbmdyb3VwcyA9IGxlbiAvIGdyb3Vw
c2l6ZTsKKworCQlmb3IgKGogPSAwOyBqIDwgbmdyb3VwczsgaisrKQorCQkJbHggKz0gc2NucHJp
bnRmKGxpbmVidWYgKyBseCwgbGluZWJ1ZmxlbiAtIGx4LAorCQkJCQkiJXMlMTYuMTZsbHgiLCBq
ID8gIiAiIDogIiIsCisJCQkJCSh1bnNpZ25lZCBsb25nIGxvbmcpKihwdHI4ICsgaikpOworCQlh
c2NpaV9jb2x1bW4gPSAxNyAqIG5ncm91cHMgKyAyOworCQlicmVhazsKKwkJfQorCisJY2FzZSA0
OiB7CisJCWNvbnN0IHVpbnQzMl90ICpwdHI0ID0gYnVmOworCQlpbnQgbmdyb3VwcyA9IGxlbiAv
IGdyb3Vwc2l6ZTsKKworCQlmb3IgKGogPSAwOyBqIDwgbmdyb3VwczsgaisrKQorCQkJbHggKz0g
c2NucHJpbnRmKGxpbmVidWYgKyBseCwgbGluZWJ1ZmxlbiAtIGx4LAorCQkJCQkiJXMlOC44eCIs
IGogPyAiICIgOiAiIiwgKihwdHI0ICsgaikpOworCQlhc2NpaV9jb2x1bW4gPSA5ICogbmdyb3Vw
cyArIDI7CisJCWJyZWFrOworCQl9CisKKwljYXNlIDI6IHsKKwkJY29uc3QgdWludDE2X3QgKnB0
cjIgPSBidWY7CisJCWludCBuZ3JvdXBzID0gbGVuIC8gZ3JvdXBzaXplOworCisJCWZvciAoaiA9
IDA7IGogPCBuZ3JvdXBzOyBqKyspCisJCQlseCArPSBzY25wcmludGYobGluZWJ1ZiArIGx4LCBs
aW5lYnVmbGVuIC0gbHgsCisJCQkJCSIlcyU0LjR4IiwgaiA/ICIgIiA6ICIiLCAqKHB0cjIgKyBq
KSk7CisJCWFzY2lpX2NvbHVtbiA9IDUgKiBuZ3JvdXBzICsgMjsKKwkJYnJlYWs7CisJCX0KKwor
CWRlZmF1bHQ6CisJCWZvciAoaiA9IDA7IChqIDwgbGVuKSAmJiAobHggKyAzKSA8PSBsaW5lYnVm
bGVuOyBqKyspIHsKKwkJCWNoID0gcHRyW2pdOworCQkJbGluZWJ1ZltseCsrXSA9IGhleF9hc2Nf
aGkoY2gpOworCQkJbGluZWJ1ZltseCsrXSA9IGhleF9hc2NfbG8oY2gpOworCQkJbGluZWJ1Zlts
eCsrXSA9ICcgJzsKKwkJCWlmIChqID09IDcpCisJCQkJbGluZWJ1ZltseCsrXSA9ICcgJzsKKwkJ
fQorCQlpZiAoaikKKwkJCWx4LS07CisKKwkJYXNjaWlfY29sdW1uID0gMyAqIHJvd3NpemUgKyAy
ICsgMjsKKwkJYnJlYWs7CisJfQorCWlmICghYXNjaWkpCisJCWdvdG8gbmlsOworCisJd2hpbGUg
KGx4IDwgKGxpbmVidWZsZW4gLSAxKSAmJiBseCA8IChhc2NpaV9jb2x1bW4gLSAxKSkKKwkJbGlu
ZWJ1ZltseCsrXSA9ICcgJzsKKwlmb3IgKGogPSAwOyAoaiA8IGxlbikgJiYgKGx4ICsgMikgPCBs
aW5lYnVmbGVuOyBqKyspIHsKKwkJY2ggPSBwdHJbal07CisJCWxpbmVidWZbbHgrK10gPSAoaXNh
c2NpaShjaCkgJiYgaXNwcmludChjaCkpID8gY2ggOiAnLic7CisJfQorbmlsOgorCWxpbmVidWZb
bHgrK10gPSAnXDAnOworfQorCitzdGF0aWMgdm9pZCBwcmludF9oZXhfZHVtcChjb25zdCB2b2lk
ICpidWYsIHNpemVfdCBsZW4sIGludCBvZmZzZXQpCit7CisJY29uc3QgdWludDhfdCAqcHRyID0g
YnVmOworCWludCBpLCBsaW5lbGVuLCByZW1haW5pbmcgPSBsZW47CisJdW5zaWduZWQgY2hhciBs
aW5lYnVmWzMyICogMyArIDIgKyAzMiArIDIgKyAxXTsKKwlpbnQgcm93c2l6ZSA9IDE2OworCWlu
dCBncm91cHNpemUgPSAxOworCisJaWYgKHJvd3NpemUgIT0gMTYgJiYgcm93c2l6ZSAhPSAzMikK
KwkJcm93c2l6ZSA9IDE2OworCisJZm9yIChpID0gMDsgaSA8IGxlbjsgaSArPSByb3dzaXplKSB7
CisJCWxpbmVsZW4gPSBtaW4ocmVtYWluaW5nLCByb3dzaXplKTsKKwkJcmVtYWluaW5nIC09IHJv
d3NpemU7CisKKwkJaGV4X2R1bXBfdG9fYnVmZmVyKHB0ciArIGksIGxpbmVsZW4sIHJvd3NpemUs
IGdyb3Vwc2l6ZSwKKwkJCQlsaW5lYnVmLCBzaXplb2YobGluZWJ1ZiksIDEpOworCisJCXByaW50
ZigiJS44eDogJXNcbiIsIGkgKyBvZmZzZXQsIGxpbmVidWYpOworCX0KK30KKworc3RhdGljIGlu
dCBzdHJlc3NfdGVzdF91YXJ0X29uY2Uoc3RydWN0IGdfb3B0ICpvcHRzLCBpbnQgZmQsIHVuc2ln
bmVkIGNoYXIgKmRhdGEsCisJCW9mZl90IGRhdGFfbGVuKQoreworCXVuc2lnbmVkIGNoYXIgKmNt
cF9kYXRhID0gb3B0cy0+Y21wX2J1ZmY7CisJc3NpemVfdCBzaXplOworCWludCB3YWl0X3J4Owor
CWludCB3YWl0X3R4OworCXNzaXplX3QgcHJvZ3Jlc3NfcnggPSAwOworCXNzaXplX3QgcHJvZ3Jl
c3NfdHggPSAwOworCXVuc2lnbmVkIGludCByZWFkcyA9IDA7CisJdW5zaWduZWQgaW50IHdyaXRl
cyA9IDA7CisKKwlkbyB7CisJCXN0cnVjdCBwb2xsZmQgcGZkID0geworCQkJLmZkID0gZmQsCisJ
CX07CisJCWludCByZXQ7CisKKwkJaWYgKG9wdHMtPm1vZGUgJiBNT0RFX1JYX09OTFkgJiYgcHJv
Z3Jlc3NfcnggPCBkYXRhX2xlbikgeworCQkJcGZkLmV2ZW50cyB8PSBQT0xMSU47CisJCQl3YWl0
X3J4ID0gMTsKKwkJfSBlbHNlIHsKKwkJCXdhaXRfcnggPSAwOworCQl9CisKKwkJaWYgKG9wdHMt
Pm1vZGUgJiBNT0RFX1RYX09OTFkgJiYgcHJvZ3Jlc3NfdHggPCBkYXRhX2xlbikgeworCQkJcGZk
LmV2ZW50cyB8PSBQT0xMT1VUOworCQkJd2FpdF90eCA9IDE7CisJCX0gZWxzZSB7CisJCQl3YWl0
X3R4ID0gMDsKKwkJfQorCisJCXJldCA9IHBvbGwoJnBmZCwgMSwgMTAwICogMTAwMCk7CisJCWlm
IChyZXQgPT0gMCkgeworCQkJcHJpbnRmKCJcbnRpbWVvdXQsIFJYL1RYOiAlemQvJXpkXG4iLCBw
cm9ncmVzc19yeCwgcHJvZ3Jlc3NfdHgpOworCQkJYnJlYWs7CisJCX0KKwkJaWYgKHJldCA8IDAp
CisJCQlyZXR1cm4gcHJpbnRfcmV0X25lZygiXG5wb2xsKCkgZmFpbGVkOiAlbVxuIik7CisKKwkJ
aWYgKHBmZC5yZXZlbnRzICYgUE9MTElOKSB7CisKKwkJCXNpemUgPSByZWFkKGZkLCBjbXBfZGF0
YSArIHByb2dyZXNzX3J4LCBkYXRhX2xlbiAtIHByb2dyZXNzX3J4KTsKKwkJCWlmIChzaXplIDwg
MCkKKwkJCQlyZXR1cm4gcHJpbnRfcmV0X25lZygiXG5SZWFkIGZhaWxlZDogJW1cbiIpOworCQkJ
cmVhZHMrKzsKKwkJCXByb2dyZXNzX3J4ICs9IHNpemU7CisJCQlpZiAocHJvZ3Jlc3NfcnggPj0g
ZGF0YV9sZW4pCisJCQkJd2FpdF9yeCA9IDA7CisJCX0KKworCQlpZiAocGZkLnJldmVudHMgJiBQ
T0xMT1VUKSB7CisKKwkJCXNpemUgPSB3cml0ZShmZCwgZGF0YSArIHByb2dyZXNzX3R4LCBkYXRh
X2xlbiAtIHByb2dyZXNzX3R4KTsKKwkJCWlmIChzaXplIDwgMCkKKwkJCQlyZXR1cm4gcHJpbnRf
cmV0X25lZygiXG53cml0ZSBmYWlsZWQ6ICVtXG4iKTsKKwkJCXdyaXRlcysrOworCQkJcHJvZ3Jl
c3NfdHggKz0gc2l6ZTsKKwkJCWlmIChwcm9ncmVzc190eCA+PSBkYXRhX2xlbikKKwkJCQl3YWl0
X3R4ID0gMDsKKwkJfQorCX0gd2hpbGUgKHdhaXRfcnggfHwgd2FpdF90eCk7CisKKwlwcmludGYo
Ik5lZWRlZCAldSByZWFkcyAldSB3cml0ZXMgIiwgcmVhZHMsIHdyaXRlcyk7CisJaWYgKG9wdHMt
Pm1vZGUgJiBNT0RFX1JYX09OTFkgJiYgbWVtY21wKGRhdGEsIGNtcF9kYXRhLCBkYXRhX2xlbikp
IHsKKwkJdW5zaWduZWQgaW50IGk7CisJCWludCBmb3VuZCA9IDA7CisJCXVuc2lnbmVkIGludCBt
aW5fcG9zOworCQl1bnNpZ25lZCBpbnQgbWF4X3BvczsKKworCQlmb3IgKGkgPSAwOyBpIDwgZGF0
YV9sZW4gJiYgIWZvdW5kOyBpKyspIHsKKwkJCWlmIChkYXRhW2ldICE9IGNtcF9kYXRhW2ldKSB7
CisJCQkJZm91bmQgPSAxOworCQkJCWJyZWFrOworCQkJfQorCQl9CisKKwkJaWYgKCFmb3VuZCkK
KwkJCXByaW50X3JldF9uZWcoIlxubWVtY21wKCkgZGlkbid0IG1hdGNoIGJ1dCBtYW51YWwgY21w
IGRpZFxuIik7CisKKwkJbWF4X3BvcyA9IChpICYgfjB4ZlVMTCkgKyAxNiAqIDM7CisJCWlmICht
YXhfcG9zID4gZGF0YV9sZW4pCisJCQltYXhfcG9zID0gZGF0YV9sZW47CisKKwkJbWluX3BvcyA9
IGkgJiB+MHhmVUxMOworCQlpZiAobWluX3BvcyA+IDE2ICogMykKKwkJCW1pbl9wb3MgLT0gMTYg
KiAzOworCQllbHNlCisJCQltaW5fcG9zID0gMDsKKworCQlwcmludGYoIk9oIG9oLCBpbmNvbnNp
c3RlbmN5IGF0IHBvcyAlZCAoMHgleCkuXG4iLCBpLCBpKTsKKworCQlwcmludGYoIlxuT3JpZ2lu
YWwgc2FtcGxlOlxuIik7CisJCXByaW50X2hleF9kdW1wKGRhdGEgKyBtaW5fcG9zLCBtYXhfcG9z
IC0gbWluX3BvcywgbWluX3Bvcyk7CisKKwkJcHJpbnRmKCJcblJlY2VpdmVkIHNhbXBsZTpcbiIp
OworCQlwcmludF9oZXhfZHVtcChjbXBfZGF0YSArIG1pbl9wb3MsIG1heF9wb3MgLSBtaW5fcG9z
LCBtaW5fcG9zKTsKKwkJcmV0dXJuIC0xOworCX0KKwlyZXR1cm4gMDsKK30KKworc3RhdGljIGlu
dCBzdHJlc3NfdGVzdF91YXJ0KHN0cnVjdCBnX29wdCAqb3B0cywgaW50IGZkLCB1bnNpZ25lZCBj
aGFyICpkYXRhLAorCQlvZmZfdCBkYXRhX2xlbikKK3sKKwl1bnNpZ25lZCBpbnQgbG9vcHMgPSAw
OworCWludCBzdGF0dXM7CisKKwlvcHRzLT5jbXBfYnVmZiA9IG1hbGxvYyhkYXRhX2xlbik7CisJ
aWYgKCFvcHRzLT5jbXBfYnVmZikKKwkJZGllKCJGYWlsZWQgdG8gbWFsbG9jKCVkKTogJW1cbiIs
IGRhdGFfbGVuKTsKKwltZW1zZXQob3B0cy0+Y21wX2J1ZmYsIDAsIGRhdGFfbGVuKTsKKworCWRv
IHsKKwkJc3RhdHVzID0gc3RyZXNzX3Rlc3RfdWFydF9vbmNlKG9wdHMsIGZkLCBkYXRhLCBkYXRh
X2xlbik7CisJCW1lbXNldChvcHRzLT5jbXBfYnVmZiwgMCwgZGF0YV9sZW4pOworCQlwcmludGYo
Imxvb3BzICV1IC8gJXUlY1tLXG4iLCBsb29wcyArIDEsIG9wdHMtPmxvb3BzLCAyNyk7CisJCWlm
ICghc3RhdHVzKQorCQkJcHJpbnRmKCIlY00iLCAyNyk7CisJfSB3aGlsZSAoKytsb29wcyA8IG9w
dHMtPmxvb3BzICYmICFzdGF0dXMgJiYgIWlzX2ludGVycnVwdGVkKTsKKwlwcmludGYoIlxuIik7
CisJZnJlZShvcHRzLT5jbXBfYnVmZik7CisJcmV0dXJuIHN0YXR1czsKK30KKwordm9pZCBzZXRf
bW9kZW0oaW50IGZkLCBpbnQgYml0cywgaW50IG1hc2spCit7CisJaW50IHN0YXR1cywgcmV0Owor
CisJcmV0ID0gaW9jdGwoZmQsIFRJT0NNR0VULCAmc3RhdHVzKTsKKwlpZiAocmV0IDwgMCkKKwkJ
ZGllKCJtY3IgZ2V0IGZhaWxlZDogJW1cbiIpOworCisJc3RhdHVzID0gKHN0YXR1cyAmIH5tYXNr
KSB8IChiaXRzICYgbWFzayk7CisKKwlyZXQgPSBpb2N0bChmZCwgVElPQ01TRVQsICZzdGF0dXMp
OworCWlmIChyZXQgPCAwKQorCQlkaWUoIm1jciBzZXQgZmFpbGVkOiAlbVxuIik7Cit9CisKK2lu
dCBtYWluKGludCBhcmdjLCBjaGFyICphcmd2W10pCit7CisJc3RydWN0IGdfb3B0IG9wdHM7CisJ
c3RydWN0IHNpZ2FjdGlvbiBzaWdpbnRfYWN0aW9uOworCXN0cnVjdCB0ZXJtaW9zIG9sZF90ZXJt
LCBuZXdfdGVybTsKKwlzdHJ1Y3Qgc2VyaWFsX2ljb3VudGVyX3N0cnVjdCBvbGRfY291bnRlcnM7
CisJc3RydWN0IHNlcmlhbF9pY291bnRlcl9zdHJ1Y3QgbmV3X2NvdW50ZXJzOworCXN0cnVjdCBz
dGF0IGRhdGFfc3RhdDsKKwlzdHJ1Y3QgcmxpbWl0IHJsaW07CisJaW50IGZkOworCWludCByZXQ7
CisJaW50IHN0YXR1czsKKwlpbnQgZmxhZ3M7CisJdW5zaWduZWQgY2hhciAqZGF0YTsKKwl1bnNp
Z25lZCBpbnQgb3Blbl9tb2RlOworCW9mZl90IGRhdGFfbGVuOworCisJYXJncF9wYXJzZSgmYXJn
cCwgYXJnYywgYXJndiwgMCwgTlVMTCwgJm9wdHMpOworCWlmICghb3B0cy5maWxlX3RyYW5zKQor
CQlkaWVoKCJNaXNzaW5nIGZpbGUgZm9yIHRyYW5zZmVycyIpOworCWlmICghb3B0cy51YXJ0X25h
bWUpCisJCWRpZWgoIk1pc3NpbmcgdWFydCBub2RlIik7CisJaWYgKCFvcHRzLm1vZGUpCisJCWRp
ZWgoIk1pc3NpbmcgbW9kZSIpOworCisJZmQgPSBvcGVuKG9wdHMuZmlsZV90cmFucywgT19SRE9O
TFkpOworCWlmIChmZCA8IDApCisJCWRpZSgiRmFpbGVkIHRvIG9wZW4gJXM6ICVtXG4iLCBvcHRz
LmZpbGVfdHJhbnMpOworCisJcmV0ID0gZnN0YXQoZmQsICZkYXRhX3N0YXQpOworCWlmIChyZXQg
PCAwKQorCQlkaWUoInN0YXQgb24gJXMgZmFpbGVkOiAlbVxuIiwgb3B0cy5maWxlX3RyYW5zKTsK
KworCWRhdGFfbGVuID0gZGF0YV9zdGF0LnN0X3NpemU7CisKKwlyZXQgPSBnZXRybGltaXQoUkxJ
TUlUX01FTUxPQ0ssICZybGltKTsKKwlpZiAocmV0IDwgMCkKKwkJZGllKCJnZXRybGltaXQoKSBm
YWlsZWQ6ICVtXG4iKTsKKworCWZsYWdzID0gTUFQX1NIQVJFRCB8IE1BUF9QT1BVTEFURTsKKwlp
ZiAocmxpbS5ybGltX2N1ciA8IChybGltX3QpZGF0YV9sZW4pCisJCXByaW50ZigiRmlsZSBvZiAl
amQgYnl0ZXMgY2FuJ3QgYmUgbG9ja2VkXG4iLCAoaW50bWF4X3QpZGF0YV9sZW4pOworCWVsc2UK
KwkJZmxhZ3MgfD0gTUFQX0xPQ0tFRDsKKworCWRhdGEgPSBtbWFwKE5VTEwsIGRhdGFfbGVuLCBQ
Uk9UX1JFQUQsIGZsYWdzLCBmZCwgMCk7CisJaWYgKGRhdGEgPT0gTUFQX0ZBSUxFRCkKKwkJZGll
KCJtbWFwKCkgb2YgJXMgc2l6ZSAlZCBmYWlsZWQ6ICVtXG4iLCBvcHRzLmZpbGVfdHJhbnMsCisJ
CQkJZGF0YV9sZW4pOworCWNsb3NlKGZkKTsKKworCWlmIChvcHRzLm1vZGUgPT0gTU9ERV9UWF9P
TkxZKQorCQlvcGVuX21vZGUgPSBPX1dST05MWTsKKwllbHNlIGlmIChvcHRzLm1vZGUgPT0gTU9E
RV9SWF9PTkxZKQorCQlvcGVuX21vZGUgPSBPX1JET05MWTsKKwllbHNlIGlmIChvcHRzLm1vZGUg
PT0gTU9ERV9EVVBMRVgpCisJCW9wZW5fbW9kZSA9IE9fUkRXUjsKKwllbHNlCisJCWRpZSgiVW5r
bm93biBtb2Rl4oCmXG4iKTsKKworCXNpZ2ludF9hY3Rpb24uc2FfaGFuZGxlciA9IHNpZ2ludF9o
YW5kbGVyOworCXNpZ2VtcHR5c2V0KCZzaWdpbnRfYWN0aW9uLnNhX21hc2spOworCXNpZ2ludF9h
Y3Rpb24uc2FfZmxhZ3MgPSAwOworCXNpZ2FjdGlvbihTSUdJTlQsICZzaWdpbnRfYWN0aW9uLCBO
VUxMKTsKKworCWZkID0gb3BlbihvcHRzLnVhcnRfbmFtZSwgb3Blbl9tb2RlIHwgT19OT05CTE9D
Syk7CisJaWYgKGZkIDwgMCkKKwkJZGllKCJGYWlsZWQgdG8gb3BlbiAlczogJW1cbiIsIG9wdHMu
dWFydF9uYW1lKTsKKworCXJldCA9IHRjZ2V0YXR0cihmZCwgJm9sZF90ZXJtKTsKKwlpZiAocmV0
IDwgMCkKKwkJZGllKCJ0Y2dldGF0dHIoKSBmYWlsZWQ6ICVtXG4iKTsKKworCW5ld190ZXJtID0g
b2xkX3Rlcm07CisKKwkvKiBvciBjX2NmbGFnIHw9IEJPVEhFUiBhbmQgY19vc3BlZWQgZm9yIGFu
eSBzcGVlZCAqLworCXJldCA9IGNmc2V0c3BlZWQoJm5ld190ZXJtLCBvcHRzLmJhdWRyYXRlKTsK
KwlpZiAocmV0IDwgMCkKKwkJZGllKCJjZnNldHNwZWVkKCwgJXUpIGZhaWxlZCAlbVxuIiwgb3B0
cy5iYXVkcmF0ZSk7CisJY2ZtYWtlcmF3KCZuZXdfdGVybSk7CisJbmV3X3Rlcm0uY19jZmxhZyB8
PSBDUkVBRDsKKwlpZiAob3B0cy5oZmxvdykKKwkJbmV3X3Rlcm0uY19jZmxhZyB8PSBDUlRTQ1RT
OworCWVsc2UKKwkJbmV3X3Rlcm0uY19jZmxhZyAmPSB+Q1JUU0NUUzsKKwluZXdfdGVybS5jX2Nj
W1ZNSU5dID0gNjQ7CisJbmV3X3Rlcm0uY19jY1tWVElNRV0gPSA4OworCisJcmV0ID0gdGNzZXRh
dHRyKGZkLCBUQ1NBTk9XLCAmbmV3X3Rlcm0pOworCWlmIChyZXQgPCAwKQorCQlkaWUoInRjc2V0
YXR0ciBmYWlsZWQ6ICVtXG4iKTsKKworCWlmIChvcHRzLmRvX3Rlcm1pb3MpIHsKKwkJcmV0ID0g
dGNmbHVzaChmZCwgVENJRkxVU0gpOworCQlpZiAocmV0IDwgMCkKKwkJCWRpZSgidGNmbHVzaCBm
YWlsZWQ6ICVtXG4iKTsKKwl9CisKKwlyZXQgPSBmY250bChmZCwgRl9TRVRGTCwgMCk7CisJaWYg
KHJldCkKKwkJcHJpbnRmKCJGYWlsZWQgdG8gcmVtb3ZlIG5vbmJsb2NrIG1vZGVcbiIpOworCisJ
c2V0X21vZGVtKGZkLCBvcHRzLmxvb3BiYWNrID8gVElPQ01fTE9PUCA6IDAsIFRJT0NNX0xPT1Ap
OworCisJcmV0ID0gaW9jdGwoZmQsIFRJT0NHSUNPVU5ULCAmb2xkX2NvdW50ZXJzKTsKKworCXN0
YXR1cyA9IHN0cmVzc190ZXN0X3VhcnQoJm9wdHMsIGZkLCBkYXRhLCBkYXRhX2xlbik7CisKKwlp
ZiAoIXJldCkgeworCQlyZXQgPSBpb2N0bChmZCwgVElPQ0dJQ09VTlQsICZuZXdfY291bnRlcnMp
OworCQlpZiAoIXJldCkgeworI2RlZmluZSBDTlQoeCkgKG5ld19jb3VudGVycy54IC0gb2xkX2Nv
dW50ZXJzLngpCisJCQlwcmludGYoImN0czogJWQgZHNyOiAlZCBybmc6ICVkIGRjZDogJWQgcng6
ICVkIHR4OiAlZCAiCisJCQkiZnJhbWUgJWQgb3ZyICVkIHBhcjogJWQgYnJrOiAlZCBidWZfb3Zy
cjogJWRcbiIsCisJCQlDTlQoY3RzKSwgQ05UKGRzciksIENOVChybmcpLCBDTlQoZGNkKSwgQ05U
KHJ4KSwKKwkJCUNOVCh0eCksIENOVChmcmFtZSksIENOVChvdmVycnVuKSwgQ05UKHBhcml0eSks
CisJCQlDTlQoYnJrKSwgQ05UKGJ1Zl9vdmVycnVuKSk7CisjdW5kZWYgQ05UCisJCX0KKwl9CisJ
aWYgKHJldCkKKwkJcHJpbnRmKCJGYWlsZWQgdG8gaW9jdGwoLFRJT0NHSUNPVU5ULClcbiIpOwor
CisJc2V0X21vZGVtKGZkLCAwLCBUSU9DTV9MT09QKTsKKworCXJldCA9IHRjc2V0YXR0cihmZCwg
VENTQUZMVVNILCAmb2xkX3Rlcm0pOworCWlmIChyZXQpCisJCXByaW50ZigidGNzZXRhdHRyKCkg
b2Ygb2xkIG9uZXMgZmFpbGVkOiAlbVxuIik7CisKKwljbG9zZShmZCk7CisJcmV0dXJuIHN0YXR1
czsKK30KZGlmZiAtLWdpdCBhL3Rlc3RjYXNlcy9rZXJuZWwvZGV2aWNlLWRyaXZlcnMvdWFydC91
YXJ0LnNoIGIvdGVzdGNhc2VzL2tlcm5lbC9kZXZpY2UtZHJpdmVycy91YXJ0L3VhcnQuc2gKbmV3
IGZpbGUgbW9kZSAxMDA3NTUKaW5kZXggMDAwMDAwMDAwLi45MzQzODMwMmYKLS0tIC9kZXYvbnVs
bAorKysgYi90ZXN0Y2FzZXMva2VybmVsL2RldmljZS1kcml2ZXJzL3VhcnQvdWFydC5zaApAQCAt
MCwwICsxLDYxIEBACisjIS9iaW4vc2gKKyMKKyMgU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQ
TC0yLjAtb3ItbGF0ZXIKKyMgQ29weXJpZ2h0IChDKSAyMDE1IFRleGFzIEluc3RydW1lbnRzIElu
Y29ycG9yYXRlZCAtIGh0dHA6Ly93d3cudGkuY29tLworIyBDb3B5cmlnaHQgKEMpIDIwMTksIFVu
aXNvYyBDb21tdW5pY2F0aW9ucyBJbmMuCisjCisjIFRlc3QgVUFSVCBwb3J0cyB1c2luZyBnaXQ6
Ly9naXQuYnJlYWtwb2ludC5jYy9iaWdlYXN5L3NlcmlhbGNoZWNrLmdpdAorCitUU1RfVEVTVEZV
TkM9ZG9fdGVzdAorVFNUX1BPU19BUkdTPTMKK1RTVF9VU0FHRT11c2FnZQorVFNUX05FRURTX1JP
T1Q9MQorVFNUX05FRURTX0NNRFM9Imxzb2YgZGQiCitUU1RfTkVFRFNfVE1QRElSPTEKKworLiB0
c3RfdGVzdC5zaAorCit1c2FnZSgpCit7CisgICAgZWNobyAidXNhZ2U6IC4vJHswfSB7LXIgVUFS
VF9SQVRFfSB7LWwgTE9PUFN9IHstaHxrIHRvIGVuYWJsZSBIVyBmbG93IGNvbnRyb2wgb3IgbG9v
cGJhY2t9IgorICAgIGV4aXQgMQorfQorCitVQVJUX1JBVEU9JDEKK1VBUlRfTE9PUFM9JDIKK1VB
UlRfTU9ERT0kMworCit0ZXN0X3NlcmlhbCgpCit7CisgICAgZGQgaWY9L2Rldi91cmFuZG9tIG9m
PWJpbmFyeSBjb3VudD0xIGJzPSQoKFVBUlRfUkFURSAvIDIpKQorICAgIHNlcmlhbGNoZWNrIC1i
ICRVQVJUX1JBVEUgLWQgJDEgLWYgYmluYXJ5IC1sICRVQVJUX0xPT1BTIC1tIHIgLSR7VUFSVF9N
T0RFfSAmCisgICAgUElEPSQhCisgICAgaWYgc2VyaWFsY2hlY2sgLWIgJFVBUlRfUkFURSAtZCAk
MSAtZiBiaW5hcnkgLWwgJFVBUlRfTE9PUFMgLW0gdCAtJHtVQVJUX01PREV9IDt0aGVuCisgICAg
ICAgIHRzdF9yZXMgVFBBU1MgInVhcnQgJDEgdGVzdCAkVUFSVF9SQVRFIHBhc3NlZCIKKyAgICBl
bHNlCisgICAgICAgIGtpbGwgLS0gLSRQSUQgMj4vZGV2L251bGwKKyAgICAgICAgdHN0X3JlcyBU
RkFJTCAidWFydCAkMSB0ZXN0ICRVQVJUX1JBVEUgZmFpbGVkIgorICAgIGZpCit9CisKK2RvX3Rl
c3QoKQoreworICAgIGxvY2FsIGkKKyAgICBmb3IgaSBpbiAvc3lzL2NsYXNzL3R0eS8qL3VhcnRj
bGsgO2RvCisgICAgICAgIFBPUlQ9YGVjaG8gJGkgfGN1dCAtZCAnLycgLWYgNWAKKyAgICAgICAg
IyBBY3RpdmF0ZSBwb3J0IGluIGNhc2UgaXQgd2lsbCBiZSBpbml0aWFsaXplZCBvbmx5IHdoZW4g
c3RhcnR1cAorICAgICAgICBlY2hvICJVQVJUIFRFU1RJTkciPiR7UE9SVH0gMj4vZGV2L251bGwK
KyAgICAgICAgUE9SVF9UT19URVNUPSIiCisgICAgICAgIGlmIFsgYGNhdCAvc3lzL2NsYXNzL3R0
eS8ke1BPUlR9L3VhcnRjbGtgIC1uZSAwIF07IHRoZW4KKyAgICAgICAgICAgIGxzb2YgfCBncmVw
ICIvZGV2LyR7UE9SVH0iICY+IC9kZXYvbnVsbCB8fCBQT1JUX1RPX1RFU1Q9Ii9kZXYvJHtQT1JU
fSIKKyAgICAgICAgICAgIGlmIFsgeCIke1BPUlRfVE9fVEVTVH0iID0geCBdIDt0aGVuCisgICAg
ICAgICAgICAgICAgdHN0X3JlcyBUQ09ORiAiJHtQT1JUfSBwb3J0IGlzIHVzZWQsIHNraXAiCisg
ICAgICAgICAgICBlbHNlCisgICAgICAgICAgICAgICAgdHN0X3JlcyBUSU5GTyAic3RhcnQgdGVz
dCBvbiAke1BPUlRfVE9fVEVTVH0gJHtVQVJUX1JBVEV9IgorICAgICAgICAgICAgICAgIHRlc3Rf
c2VyaWFsICR7UE9SVF9UT19URVNUfQorICAgICAgICAgICAgZmkKKyAgICAgICAgZmkKKyAgICBk
b25lCit9CisKK3RzdF9ydW4KLS0gCjIuMTcuMQoKCi0tIApNYWlsaW5nIGxpc3QgaW5mbzogaHR0
cHM6Ly9saXN0cy5saW51eC5pdC9saXN0aW5mby9sdHAK
