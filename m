Return-Path: <ltp-bounces+lists+linux-ltp=lfdr.de@lists.linux.it>
X-Original-To: lists+linux-ltp@lfdr.de
Delivered-To: lists+linux-ltp@lfdr.de
Received: from picard.linux.it (picard.linux.it [IPv6:2001:1418:10:5::2])
	by mail.lfdr.de (Postfix) with ESMTPS id 963654CB69
	for <lists+linux-ltp@lfdr.de>; Thu, 20 Jun 2019 11:58:10 +0200 (CEST)
Received: from picard.linux.it (localhost [IPv6:::1])
	by picard.linux.it (Postfix) with ESMTP id 6CCB129898E
	for <lists+linux-ltp@lfdr.de>; Thu, 20 Jun 2019 11:58:10 +0200 (CEST)
X-Original-To: ltp@lists.linux.it
Delivered-To: ltp@picard.linux.it
Received: from in-2.smtp.seeweb.it (in-2.smtp.seeweb.it
 [IPv6:2001:4b78:1:20::2])
 by picard.linux.it (Postfix) with ESMTP id 9DCF82987AA
 for <ltp@lists.linux.it>; Thu, 20 Jun 2019 11:58:07 +0200 (CEST)
Received: from mail-pf1-x444.google.com (mail-pf1-x444.google.com
 [IPv6:2607:f8b0:4864:20::444])
 (using TLSv1.2 with cipher ECDHE-RSA-AES128-GCM-SHA256 (128/128 bits))
 (No client certificate requested)
 by in-2.smtp.seeweb.it (Postfix) with ESMTPS id 5FF7860171F
 for <ltp@lists.linux.it>; Thu, 20 Jun 2019 11:58:06 +0200 (CEST)
Received: by mail-pf1-x444.google.com with SMTP id r7so1383723pfl.3
 for <ltp@lists.linux.it>; Thu, 20 Jun 2019 02:58:06 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=mbobrowski-org.20150623.gappssmtp.com; s=20150623;
 h=date:from:to:cc:subject:message-id:references:mime-version
 :content-disposition:in-reply-to:user-agent;
 bh=HWDuhh0V+2P3kK1BHp1zd5w27WGVUl/CaXnFSli9abg=;
 b=psGeH+1+ADIjfmKVGS0ztbMHyQ85bNy1S1PckjZS9OR5zf0oNdH0M8A20r0o1vozUw
 bKoxAuUW2amfRomtfYGadxKklsKZQyJxwLQDtZ+EWIS7gnIXl6KQRGwydvfegqq/IeKF
 et/UMQsmnmAwndGS+WziNsrhSJQ+jylto8JvIMC+yYYzse/fEYIAhNiSJnnXAOV9V++x
 tldkcXCiyDiCoC2WWOc3tftYKJna9n55jJROpEBW/7rSfxpjPo2G3srzIiUQFD/jzyl4
 NHqXI/skr3ZnIfu0UbDLwQoAydOdZ6wvbqYuzwyNL6AFI4lmfIGxPXUWRH2iOAKWSj+Z
 hXow==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:date:from:to:cc:subject:message-id:references
 :mime-version:content-disposition:in-reply-to:user-agent;
 bh=HWDuhh0V+2P3kK1BHp1zd5w27WGVUl/CaXnFSli9abg=;
 b=hGGzDnBWoA102HcLvPpWcumRPSAdjMXNacrgRNKENd43vs2kiMLpPmAlZOgwoIjL2h
 WzDidXYIbmryllhx6aZnWcHa+4hrLo1s3sXYrk/FbO0i5FwSX9GppJs02xkfKhe/1hpp
 B5IFagKz+7HPuR+13DKJS2/wOSrrAAXgzdgkoYyAr06rTb04tFNefPDDrBsEPabVtHfq
 hiTeArTTmsos8NnhteKB4PNJcFKLB3utoqZDFpozYnlQk2V6buSr+ikbvGC0MLASSpa4
 3JibhAAljRVC3aFu8V7oCZMwun05ku5X8GVX+m4r3pBAvc4VQQkB1Dgb1WNd8POTME6B
 bikg==
X-Gm-Message-State: APjAAAV0TW4gBuRIC4PVS0qkYkaEm+BGtrmU7TuNbHO8YyCgdW1vIn7l
 4mQnET2yQTEYGjDcB23JJmheGMFcTw==
X-Google-Smtp-Source: APXvYqxXSU7hvGNr1Qkye74wu2sxBz0FIg2Uoa22icysZ5cJvJz4YikoHxTP2/5894w75uoSVpnLBg==
X-Received: by 2002:a17:90a:7148:: with SMTP id
 g8mr2230918pjs.51.1561024684402; 
 Thu, 20 Jun 2019 02:58:04 -0700 (PDT)
Received: from neo.Home ([114.78.0.167])
 by smtp.gmail.com with ESMTPSA id p15sm18262999pgj.61.2019.06.20.02.58.01
 (version=TLS1_3 cipher=AEAD-AES256-GCM-SHA384 bits=256/256);
 Thu, 20 Jun 2019 02:58:03 -0700 (PDT)
Date: Thu, 20 Jun 2019 19:57:58 +1000
From: Matthew Bobrowski <mbobrowski@mbobrowski.org>
To: ltp@lists.linux.it
Message-ID: <74267e0b0abb151fdeadc7146fbc7536424066b6.1561018312.git.mbobrowski@mbobrowski.org>
References: <cover.1561018312.git.mbobrowski@mbobrowski.org>
MIME-Version: 1.0
Content-Disposition: inline
In-Reply-To: <cover.1561018312.git.mbobrowski@mbobrowski.org>
User-Agent: Mutt/1.10.1 (2018-07-13)
X-Virus-Scanned: clamav-milter 0.99.2 at in-2.smtp.seeweb.it
X-Virus-Status: Clean
X-Spam-Status: No, score=0.1 required=7.0 tests=DKIM_SIGNED,DKIM_VALID,
 SPF_HELO_NONE,SPF_NONE autolearn=disabled version=3.4.0
X-Spam-Checker-Version: SpamAssassin 3.4.0 (2014-02-07) on in-2.smtp.seeweb.it
Cc: jack@suse.cz
Subject: [LTP] [PATCH v5 1/4] syscalls/fanotify13: new test to verify
 FAN_REPORT_FID functionality
X-BeenThere: ltp@lists.linux.it
X-Mailman-Version: 2.1.18
Precedence: list
List-Id: Linux Test Project <ltp.lists.linux.it>
List-Unsubscribe: <https://lists.linux.it/options/ltp>,
 <mailto:ltp-request@lists.linux.it?subject=unsubscribe>
List-Archive: <http://lists.linux.it/pipermail/ltp/>
List-Post: <mailto:ltp@lists.linux.it>
List-Help: <mailto:ltp-request@lists.linux.it?subject=help>
List-Subscribe: <https://lists.linux.it/listinfo/ltp>,
 <mailto:ltp-request@lists.linux.it?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: ltp-bounces+lists+linux-ltp=lfdr.de@lists.linux.it
Sender: "ltp" <ltp-bounces+lists+linux-ltp=lfdr.de@lists.linux.it>

QSBuZXdseSBkZWZpbmVkIHRlc3QgZmlsZSB0byB2YWxpZGF0ZSB0aGUgZmFub3RpZnkgRkFOX1JF
UE9SVF9GSUQKZnVuY3Rpb25hbGl0eS4gQSBuZXcgbGluZSBlbnRyeSBmb3IgdGhpcyB0ZXN0IGZp
bGUgaGFzIGJlZW4gYWRkZWQgd2l0aGluCnJ1bnRlc3Qvc3lzY2FsbHMuCgpBZGRpdGlvbmFsbHks
IGRlZmluZWQgYSBoZWxwZXIgZnVuY3Rpb24gdGhhdCBjYW4gYmUgdXNlZCB0byBvYnRhaW4KX19r
ZXJuZWxfZnNpZF90IGFuZCBmaWxlX2hhbmRsZSBvYmplY3RzLiBUaGlzIGhlbHBlciB3aWxsIGJl
IHVzZWQgYnkKdGVzdCBmaWxlcyByZWxhdGVkIHRvIHZlcmlmeWluZyBGQU5fUkVQT1JUX0ZJRC4g
VGhlIG5hbWVfdG9faGFuZGxlX2F0KCkKZnVuY3Rpb24gaXMgY29uZGl0aW9uYWxseSBhZGRlZCB0
byBhY2NvbW1vZGF0ZSBmb3IgYnVpbGRzIG9uIG9sZGVyCmRpc3RyaWJ1dGlvbnMuCgpBZGRlZCBf
R05VX1NPVVJDRSBmZWF0dXJlIHRlc3QgbWFjcm8gdG8gc3lzY2FsbHMvZmFub3RpZnkwNSBpbiBv
cmRlciB0bwpyZXNvbHZlIGJ1aWxkIHdhcm5pbmdzLgoKU2lnbmVkLW9mZi1ieTogTWF0dGhldyBC
b2Jyb3dza2kgPG1ib2Jyb3dza2lAbWJvYnJvd3NraS5vcmc+ClJldmlld2VkLWJ5OiBBbWlyIEdv
bGRzdGVpbiA8YW1pcjczaWxAZ21haWwuY29tPgotLS0KIGNvbmZpZ3VyZS5hYyAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAxICsKIHJ1bnRlc3Qvc3lzY2FsbHMgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAxICsKIHRlc3RjYXNlcy9rZXJuZWwvc3lzY2Fs
bHMvZmFub3RpZnkvLmdpdGlnbm9yZSAgIHwgICAxICsKIHRlc3RjYXNlcy9rZXJuZWwvc3lzY2Fs
bHMvZmFub3RpZnkvZmFub3RpZnkuaCAgIHwgIDU2ICsrKystCiB0ZXN0Y2FzZXMva2VybmVsL3N5
c2NhbGxzL2Zhbm90aWZ5L2Zhbm90aWZ5MDUuYyB8ICAgMSArCiB0ZXN0Y2FzZXMva2VybmVsL3N5
c2NhbGxzL2Zhbm90aWZ5L2Zhbm90aWZ5MTMuYyB8IDMxNiArKysrKysrKysrKysrKysrKysrKysr
KysKIDYgZmlsZXMgY2hhbmdlZCwgMzczIGluc2VydGlvbnMoKyksIDMgZGVsZXRpb25zKC0pCiBj
cmVhdGUgbW9kZSAxMDA2NDQgdGVzdGNhc2VzL2tlcm5lbC9zeXNjYWxscy9mYW5vdGlmeS9mYW5v
dGlmeTEzLmMKCmRpZmYgLS1naXQgYS9jb25maWd1cmUuYWMgYi9jb25maWd1cmUuYWMKaW5kZXgg
NWVjYzkyNzgxLi45NTM4YjIzMjIgMTAwNjQ0Ci0tLSBhL2NvbmZpZ3VyZS5hYworKysgYi9jb25m
aWd1cmUuYWMKQEAgLTcwLDYgKzcwLDcgQEAgQUNfQ0hFQ0tfRlVOQ1MoWyBcCiAgICAga2NtcCBc
CiAgICAgbWtkaXJhdCBcCiAgICAgbWtub2RhdCBcCisgICAgbmFtZV90b19oYW5kbGVfYXQgXAog
ICAgIG9wZW5hdCBcCiAgICAgcHJlYWR2IFwKICAgICBwcmVhZHYyIFwKZGlmZiAtLWdpdCBhL3J1
bnRlc3Qvc3lzY2FsbHMgYi9ydW50ZXN0L3N5c2NhbGxzCmluZGV4IGExMTA2ZmI4NC4uZTY4MmY1
MDg3IDEwMDY0NAotLS0gYS9ydW50ZXN0L3N5c2NhbGxzCisrKyBiL3J1bnRlc3Qvc3lzY2FsbHMK
QEAgLTUzNCw2ICs1MzQsNyBAQCBmYW5vdGlmeTA5IGZhbm90aWZ5MDkKIGZhbm90aWZ5MTAgZmFu
b3RpZnkxMAogZmFub3RpZnkxMSBmYW5vdGlmeTExCiBmYW5vdGlmeTEyIGZhbm90aWZ5MTIKK2Zh
bm90aWZ5MTMgZmFub3RpZnkxMwogCiBpb3Blcm0wMSBpb3Blcm0wMQogaW9wZXJtMDIgaW9wZXJt
MDIKZGlmZiAtLWdpdCBhL3Rlc3RjYXNlcy9rZXJuZWwvc3lzY2FsbHMvZmFub3RpZnkvLmdpdGln
bm9yZSBiL3Rlc3RjYXNlcy9rZXJuZWwvc3lzY2FsbHMvZmFub3RpZnkvLmdpdGlnbm9yZQppbmRl
eCA0MjU2YjhjZDMuLjE2YmRkOTllNSAxMDA2NDQKLS0tIGEvdGVzdGNhc2VzL2tlcm5lbC9zeXNj
YWxscy9mYW5vdGlmeS8uZ2l0aWdub3JlCisrKyBiL3Rlc3RjYXNlcy9rZXJuZWwvc3lzY2FsbHMv
ZmFub3RpZnkvLmdpdGlnbm9yZQpAQCAtMTAsNCArMTAsNSBAQAogL2Zhbm90aWZ5MTAKIC9mYW5v
dGlmeTExCiAvZmFub3RpZnkxMgorL2Zhbm90aWZ5MTMKIC9mYW5vdGlmeV9jaGlsZApkaWZmIC0t
Z2l0IGEvdGVzdGNhc2VzL2tlcm5lbC9zeXNjYWxscy9mYW5vdGlmeS9mYW5vdGlmeS5oIGIvdGVz
dGNhc2VzL2tlcm5lbC9zeXNjYWxscy9mYW5vdGlmeS9mYW5vdGlmeS5oCmluZGV4IDE0NjU0Yjdj
Ny4uYTVhYzE0YWNiIDEwMDY0NAotLS0gYS90ZXN0Y2FzZXMva2VybmVsL3N5c2NhbGxzL2Zhbm90
aWZ5L2Zhbm90aWZ5LmgKKysrIGIvdGVzdGNhc2VzL2tlcm5lbC9zeXNjYWxscy9mYW5vdGlmeS9m
YW5vdGlmeS5oCkBAIC0yOSw2ICsyOSwxMSBAQAogI2RlZmluZQlfX0ZBTk9USUZZX0hfXwogCiAj
aW5jbHVkZSAiY29uZmlnLmgiCisjaW5jbHVkZSA8c3lzL3N0YXRmcy5oPgorI2luY2x1ZGUgPHN5
cy90eXBlcy5oPgorI2luY2x1ZGUgPHN5cy9zdGF0Lmg+CisjaW5jbHVkZSA8ZXJybm8uaD4KKyNp
bmNsdWRlIDxmY250bC5oPgogCiAjaWYgZGVmaW5lZChIQVZFX1NZU19GQU5PVElGWV9IKQogCkBA
IC01Nyw5ICs2Miw2IEBAIHN0YXRpYyBsb25nIGZhbm90aWZ5X21hcmsoaW50IGZkLCB1bnNpZ25l
ZCBpbnQgZmxhZ3MsIHVpbnQ2NF90IG1hc2ssCiAjaWZuZGVmIEZBTl9SRVBPUlRfVElECiAjZGVm
aW5lIEZBTl9SRVBPUlRfVElECQkweDAwMDAwMTAwCiAjZW5kaWYKLSNpZm5kZWYgRkFOX1JFUE9S
VF9GSUQKLSNkZWZpbmUgRkFOX1JFUE9SVF9GSUQJCTB4MDAwMDAyMDAKLSNlbmRpZgogCiAjaWZu
ZGVmIEZBTl9NQVJLX0lOT0RFCiAjZGVmaW5lIEZBTl9NQVJLX0lOT0RFCQkwCkBAIC04OSw2ICs5
MSw1NCBAQCBzdHJ1Y3QgZmFub3RpZnlfbWFya190eXBlIHsKIAljb25zdCBjaGFyICogbmFtZTsK
IH07CiAKKyNpZm5kZWYgRkFOX1JFUE9SVF9GSUQKKyNkZWZpbmUgRkFOX1JFUE9SVF9GSUQJCTB4
MDAwMDAyMDAKKworc3RydWN0IGZhbm90aWZ5X2V2ZW50X2luZm9faGVhZGVyIHsKKwl1aW50OF90
IGluZm9fdHlwZTsKKwl1aW50OF90IHBhZDsKKwl1aW50MTZfdCBsZW47Cit9OworCitzdHJ1Y3Qg
ZmFub3RpZnlfZXZlbnRfaW5mb19maWQgeworCXN0cnVjdCBmYW5vdGlmeV9ldmVudF9pbmZvX2hl
YWRlciBoZHI7CisJX19rZXJuZWxfZnNpZF90IGZzaWQ7CisJdW5zaWduZWQgY2hhciBoYW5kbGVb
MF07Cit9OworCisjZW5kaWYKKworLyoKKyAqIEhlbHBlciBmdW5jdGlvbiB1c2VkIHRvIG9idGFp
biBfX2tlcm5lbF9mc2lkX3QgYW5kIGZpbGVfaGFuZGxlIG9iamVjdHMKKyAqIGZvciBhIGdpdmVu
IHBhdGguIFVzZWQgYnkgdGVzdCBmaWxlcyBjb3JyZWxhdGVkIHRvIEZBTl9SRVBPUlRfRklECisg
KiBmdW5jdGlvbmFsaXR5LgorICovCitzdGF0aWMgaW5saW5lIHZvaWQgZmFub3RpZnlfZ2V0X2Zp
ZChjb25zdCBjaGFyICpwYXRoLCBfX2tlcm5lbF9mc2lkX3QgKmZzaWQsCisJCQlzdHJ1Y3QgZmls
ZV9oYW5kbGUgKmhhbmRsZSkKK3sKKwlpbnQgbW91bnRfaWQ7CisJc3RydWN0IHN0YXRmcyBzdGF0
czsKKworCWlmIChzdGF0ZnMocGF0aCwgJnN0YXRzKSA9PSAtMSkKKwkJdHN0X2JyayhUQlJPSyB8
IFRFUlJOTywKKwkJCSJzdGF0ZnMoJXMsIC4uLikgZmFpbGVkIiwgcGF0aCk7CisJbWVtY3B5KGZz
aWQsICZzdGF0cy5mX2ZzaWQsIHNpemVvZihzdGF0cy5mX2ZzaWQpKTsKKworI2lmZGVmIEhBVkVf
TkFNRV9UT19IQU5ETEVfQVQKKwlpZiAobmFtZV90b19oYW5kbGVfYXQoQVRfRkRDV0QsIHBhdGgs
IGhhbmRsZSwgJm1vdW50X2lkLCAwKSA9PSAtMSkgeworCQlpZiAoZXJybm8gPT0gRU9QTk9UU1VQ
UCkgeworCQkJdHN0X2JyayhUQ09ORiwKKwkJCQkiZmlsZXN5c3RlbSAlcyBkb2VzIG5vdCBzdXBw
b3J0IGZpbGUgaGFuZGxlcyIsCisJCQkJdHN0X2RldmljZS0+ZnNfdHlwZSk7CisJCX0KKwkJdHN0
X2JyayhUQlJPSyB8IFRFUlJOTywKKwkJCSJuYW1lX3RvX2hhbmRsZV9hdChBVF9GRENXRCwgJXMs
IC4uLikgZmFpbGVkIiwgcGF0aCk7CisJfQorI2Vsc2UKKwl0c3RfYnJrKFRDT05GLCAibmFtZV90
b19oYW5kbGVfYXQoKSBpcyBub3QgaW1wbG1lbnRlZCIpOworI2VuZGlmIC8qIEhBVkVfTkFNRV9U
T19IQU5ETEVfQVQgKi8KK30KKwogI2RlZmluZSBJTklUX0ZBTk9USUZZX01BUktfVFlQRSh0KSBc
CiAJeyBGQU5fTUFSS18gIyMgdCwgIkZBTl9NQVJLXyIgI3QgfQogCmRpZmYgLS1naXQgYS90ZXN0
Y2FzZXMva2VybmVsL3N5c2NhbGxzL2Zhbm90aWZ5L2Zhbm90aWZ5MDUuYyBiL3Rlc3RjYXNlcy9r
ZXJuZWwvc3lzY2FsbHMvZmFub3RpZnkvZmFub3RpZnkwNS5jCmluZGV4IGRlNzJlMzQ2YS4uMTEy
Mjk1NzA5IDEwMDY0NAotLS0gYS90ZXN0Y2FzZXMva2VybmVsL3N5c2NhbGxzL2Zhbm90aWZ5L2Zh
bm90aWZ5MDUuYworKysgYi90ZXN0Y2FzZXMva2VybmVsL3N5c2NhbGxzL2Zhbm90aWZ5L2Zhbm90
aWZ5MDUuYwpAQCAtMTEsNiArMTEsNyBAQAogICogICAgIEdlbmVyYXRlIGVub3VnaCBldmVudHMg
d2l0aG91dCByZWFkaW5nIHRoZW0gYW5kIGNoZWNrIHRoYXQgb3ZlcmZsb3cKICAqICAgICBldmVu
dCBpcyBnZW5lcmF0ZWQuCiAgKi8KKyNkZWZpbmUgX0dOVV9TT1VSQ0UKICNpbmNsdWRlICJjb25m
aWcuaCIKIAogI2luY2x1ZGUgPHN0ZGlvLmg+CmRpZmYgLS1naXQgYS90ZXN0Y2FzZXMva2VybmVs
L3N5c2NhbGxzL2Zhbm90aWZ5L2Zhbm90aWZ5MTMuYyBiL3Rlc3RjYXNlcy9rZXJuZWwvc3lzY2Fs
bHMvZmFub3RpZnkvZmFub3RpZnkxMy5jCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAw
MDAwMC4uMzNlZTJmMWM4Ci0tLSAvZGV2L251bGwKKysrIGIvdGVzdGNhc2VzL2tlcm5lbC9zeXNj
YWxscy9mYW5vdGlmeS9mYW5vdGlmeTEzLmMKQEAgLTAsMCArMSwzMTYgQEAKKy8vIFNQRFgtTGlj
ZW5zZS1JZGVudGlmaWVyOiBHUEwtMi4wCisvKgorICogQ29weXJpZ2h0IChjKSAyMDE4IE1hdHRo
ZXcgQm9icm93c2tpLiBBbGwgUmlnaHRzIFJlc2VydmVkLgorICoKKyAqIFN0YXJ0ZWQgYnkgTWF0
dGhldyBCb2Jyb3dza2kgPG1ib2Jyb3dza2lAbWJvYnJvd3NraS5vcmc+CisgKgorICogREVTQ1JJ
UFRJT04KKyAqCVZhbGlkYXRlIHRoYXQgdGhlIHZhbHVlcyByZXR1cm5lZCB3aXRoaW4gYW4gZXZl
bnQgd2hlbgorICoJRkFOX1JFUE9SVF9GSUQgaXMgc3BlY2lmaWVkIG1hdGNoZXMgdGhvc2UgdGhh
dCBhcmUgb2J0YWluZWQgdmlhCisgKglleHBsaWNpdCBpbnZvY2F0aW9uIHRvIHN5c3RlbSBjYWxs
cyBzdGF0ZnMoMikgYW5kCisgKgluYW1lX3RvX2hhbmRsZV9hdCgyKS4KKyAqLworI2RlZmluZSBf
R05VX1NPVVJDRQorI2luY2x1ZGUgImNvbmZpZy5oIgorCisjaW5jbHVkZSA8c3RkaW8uaD4KKyNp
bmNsdWRlIDxzdHJpbmcuaD4KKyNpbmNsdWRlIDxzeXMvc3RhdGZzLmg+CisjaW5jbHVkZSA8c3lz
L3R5cGVzLmg+CisjaW5jbHVkZSA8c3lzL3N0YXQuaD4KKyNpbmNsdWRlIDxmY250bC5oPgorI2lu
Y2x1ZGUgPGVycm5vLmg+CisjaW5jbHVkZSA8dW5pc3RkLmg+CisjaW5jbHVkZSAidHN0X3Rlc3Qu
aCIKKyNpbmNsdWRlICJmYW5vdGlmeS5oIgorCisjaWYgZGVmaW5lZChIQVZFX1NZU19GQU5PVElG
WV9IKQorI2luY2x1ZGUgPHN5cy9mYW5vdGlmeS5oPgorCisjZGVmaW5lIFBBVEhfTEVOIDEyOAor
I2RlZmluZSBCVUZfU0laRSAyNTYKKyNkZWZpbmUgRElSX09ORSAiZGlyX29uZSIKKyNkZWZpbmUg
RklMRV9PTkUgImZpbGVfb25lIgorI2RlZmluZSBGSUxFX1RXTyAiZmlsZV90d28iCisjZGVmaW5l
IE1PVU5UX1BBVEggIm1udHBvaW50IgorI2RlZmluZSBFVkVOVF9NQVggQVJSQVlfU0laRShvYmpl
Y3RzKQorI2RlZmluZSBESVJfUEFUSF9PTkUgTU9VTlRfUEFUSCIvIkRJUl9PTkUKKyNkZWZpbmUg
RklMRV9QQVRIX09ORSBNT1VOVF9QQVRIIi8iRklMRV9PTkUKKyNkZWZpbmUgRklMRV9QQVRIX1RX
TyBNT1VOVF9QQVRIIi8iRklMRV9UV08KKworc3RydWN0IGV2ZW50X3QgeworCXVuc2lnbmVkIGxv
bmcgbG9uZyBleHBlY3RlZF9tYXNrOworCV9fa2VybmVsX2ZzaWRfdCBmc2lkOworCXN0cnVjdCBm
aWxlX2hhbmRsZSBoYW5kbGU7CisJY2hhciBidWZbTUFYX0hBTkRMRV9TWl07Cit9OworCitzdGF0
aWMgc3RydWN0IG9iamVjdF90IHsKKwljb25zdCBjaGFyICpwYXRoOworCWludCBpc19kaXI7Cit9
IG9iamVjdHNbXSA9IHsKKwl7RklMRV9QQVRIX09ORSwgMH0sCisJe0ZJTEVfUEFUSF9UV08sIDB9
LAorCXtESVJfUEFUSF9PTkUsIDF9Cit9OworCitzdGF0aWMgc3RydWN0IHRlc3RfY2FzZV90IHsK
KwlzdHJ1Y3QgZmFub3RpZnlfbWFya190eXBlIG1hcms7CisJdW5zaWduZWQgbG9uZyBsb25nIG1h
c2s7Cit9IHRlc3RfY2FzZXNbXSA9IHsKKwl7CisJCUlOSVRfRkFOT1RJRllfTUFSS19UWVBFKElO
T0RFKSwKKwkJRkFOX09QRU4gfCBGQU5fQ0xPU0VfTk9XUklURQorCX0sCisJeworCQlJTklUX0ZB
Tk9USUZZX01BUktfVFlQRShJTk9ERSksCisJCUZBTl9PUEVOIHwgRkFOX0NMT1NFX05PV1JJVEUg
fCBGQU5fT05ESVIKKwl9LAorCXsKKwkJSU5JVF9GQU5PVElGWV9NQVJLX1RZUEUoTU9VTlQpLAor
CQlGQU5fT1BFTiB8IEZBTl9DTE9TRV9OT1dSSVRFCisJfSwKKwl7CisJCUlOSVRfRkFOT1RJRllf
TUFSS19UWVBFKE1PVU5UKSwKKwkJRkFOX09QRU4gfCBGQU5fQ0xPU0VfTk9XUklURSB8IEZBTl9P
TkRJUgorCX0sCisJeworCQlJTklUX0ZBTk9USUZZX01BUktfVFlQRShGSUxFU1lTVEVNKSwKKwkJ
RkFOX09QRU4gfCBGQU5fQ0xPU0VfTk9XUklURQorCX0sCisJeworCQlJTklUX0ZBTk9USUZZX01B
UktfVFlQRShGSUxFU1lTVEVNKSwKKwkJRkFOX09QRU4gfCBGQU5fQ0xPU0VfTk9XUklURSB8IEZB
Tl9PTkRJUgorCX0KK307CisKK3N0YXRpYyBpbnQgZmFub3RpZnlfZmQ7CitzdGF0aWMgY2hhciBl
dmVudHNfYnVmW0JVRl9TSVpFXTsKK3N0YXRpYyBzdHJ1Y3QgZXZlbnRfdCBldmVudF9zZXRbRVZF
TlRfTUFYXTsKKworc3RhdGljIHZvaWQgY3JlYXRlX29iamVjdHModm9pZCkKK3sKKwl1bnNpZ25l
ZCBpbnQgaTsKKworCWZvciAoaSA9IDA7IGkgPCBBUlJBWV9TSVpFKG9iamVjdHMpOyBpKyspIHsK
KwkJaWYgKG9iamVjdHNbaV0uaXNfZGlyKQorCQkJU0FGRV9NS0RJUihvYmplY3RzW2ldLnBhdGgs
IDA3NTUpOworCQllbHNlCisJCQlTQUZFX0ZJTEVfUFJJTlRGKG9iamVjdHNbaV0ucGF0aCwgIjAi
KTsKKwl9Cit9CisKK3N0YXRpYyB2b2lkIGdldF9vYmplY3Rfc3RhdHModm9pZCkKK3sKKwl1bnNp
Z25lZCBpbnQgaTsKKwlmb3IgKGkgPSAwOyBpIDwgQVJSQVlfU0laRShvYmplY3RzKTsgaSsrKSB7
CisJCWV2ZW50X3NldFtpXS5oYW5kbGUuaGFuZGxlX2J5dGVzID0gTUFYX0hBTkRMRV9TWjsKKwkJ
ZmFub3RpZnlfZ2V0X2ZpZChvYmplY3RzW2ldLnBhdGgsICZldmVudF9zZXRbaV0uZnNpZCwKKwkJ
CQkmZXZlbnRfc2V0W2ldLmhhbmRsZSk7CisJfQorfQorCitzdGF0aWMgaW50IHNldHVwX21hcmtz
KHVuc2lnbmVkIGludCBmZCwgc3RydWN0IHRlc3RfY2FzZV90ICp0YykKK3sKKwl1bnNpZ25lZCBp
bnQgaTsKKwlzdHJ1Y3QgZmFub3RpZnlfbWFya190eXBlICptYXJrID0gJnRjLT5tYXJrOworCisJ
Zm9yIChpID0gMDsgaSA8IEFSUkFZX1NJWkUob2JqZWN0cyk7IGkrKykgeworCQlpZiAoZmFub3Rp
ZnlfbWFyayhmZCwgRkFOX01BUktfQUREIHwgbWFyay0+ZmxhZywgdGMtPm1hc2ssCisJCQkJCUFU
X0ZEQ1dELCBvYmplY3RzW2ldLnBhdGgpID09IC0xKSB7CisJCQlpZiAoZXJybm8gPT0gRUlOVkFM
ICYmCisJCQkJbWFyay0+ZmxhZyAmIEZBTl9NQVJLX0ZJTEVTWVNURU0pIHsKKwkJCQl0c3RfcmVz
KFRDT05GLAorCQkJCQkiRkFOX01BUktfRklMRVNZU1RFTSBub3Qgc3VwcG9ydGVkIGJ5ICIKKwkJ
CQkJImtlcm5lbCIpOworCQkJCXJldHVybiAxOworCQkJfSBlbHNlIGlmIChlcnJubyA9PSBFTk9E
RVYgJiYKKwkJCQkJIWV2ZW50X3NldFtpXS5mc2lkLnZhbFswXSAmJgorCQkJCQkhZXZlbnRfc2V0
W2ldLmZzaWQudmFsWzFdKSB7CisJCQkJdHN0X3JlcyhUQ09ORiwKKwkJCQkJIkZBTl9SRVBPUlRf
RklEIG5vdCBzdXBwb3J0ZWQgb24gIgorCQkJCQkiZmlsZXN5c3RlbSB0eXBlICVzIiwKKwkJCQkJ
dHN0X2RldmljZS0+ZnNfdHlwZSk7CisJCQkJcmV0dXJuIDE7CisJCQl9CisJCQl0c3RfYnJrKFRC
Uk9LIHwgVEVSUk5PLAorCQkJCSJmYW5vdGlmeV9tYXJrKCVkLCBGQU5fTUFSS19BREQsIEZBTl9P
UEVOLCAiCisJCQkJIkFUX0ZEQ1dELCAlcykgZmFpbGVkIiwKKwkJCQlmYW5vdGlmeV9mZCwgb2Jq
ZWN0c1tpXS5wYXRoKTsKKwkJfQorCisJCS8qIFNldHVwIHRoZSBleHBlY3RlZCBtYXNrIGZvciBl
YWNoIGdlbmVyYXRlZCBldmVudCAqLworCQlldmVudF9zZXRbaV0uZXhwZWN0ZWRfbWFzayA9IHRj
LT5tYXNrOworCQlpZiAoIW9iamVjdHNbaV0uaXNfZGlyKQorCQkJZXZlbnRfc2V0W2ldLmV4cGVj
dGVkX21hc2sgJj0gfkZBTl9PTkRJUjsKKwl9CisJcmV0dXJuIDA7Cit9CisKK3N0YXRpYyB2b2lk
IGRvX3Rlc3QodW5zaWduZWQgaW50IG51bWJlcikKK3sKKwl1bnNpZ25lZCBpbnQgaTsKKwlpbnQg
bGVuLCBmZHNbQVJSQVlfU0laRShvYmplY3RzKV07CisKKwlzdHJ1Y3QgZmlsZV9oYW5kbGUgKmV2
ZW50X2ZpbGVfaGFuZGxlOworCXN0cnVjdCBmYW5vdGlmeV9ldmVudF9tZXRhZGF0YSAqbWV0YWRh
dGE7CisJc3RydWN0IGZhbm90aWZ5X2V2ZW50X2luZm9fZmlkICpldmVudF9maWQ7CisJc3RydWN0
IHRlc3RfY2FzZV90ICp0YyA9ICZ0ZXN0X2Nhc2VzW251bWJlcl07CisJc3RydWN0IGZhbm90aWZ5
X21hcmtfdHlwZSAqbWFyayA9ICZ0Yy0+bWFyazsKKworCXRzdF9yZXMoVElORk8sCisJCSJUZXN0
ICMlZDogRkFOX1JFUE9SVF9GSUQgd2l0aCBtYXJrIGZsYWc6ICVzIiwKKwkJbnVtYmVyLCBtYXJr
LT5uYW1lKTsKKworCWZhbm90aWZ5X2ZkID0gZmFub3RpZnlfaW5pdChGQU5fQ0xBU1NfTk9USUYg
fCBGQU5fUkVQT1JUX0ZJRCwgT19SRE9OTFkpOworCWlmIChmYW5vdGlmeV9mZCA9PSAtMSkgewor
CQlpZiAoZXJybm8gPT0gRUlOVkFMKSB7CisJCQl0c3RfcmVzKFRDT05GLAorCQkJCSJGQU5fUkVQ
T1JUX0ZJRCBub3Qgc3VwcG9ydGVkIGJ5IGtlcm5lbCIpOworCQkJcmV0dXJuOworCQl9CisJCXRz
dF9icmsoVEJST0sgfCBURVJSTk8sCisJCQkiZmFub3RpZnlfaW5pdChGQU5fQ0xBU1NfTk9USUYg
fCBGQU5fUkVQT1JUX0ZJRCwgIgorCQkJIk9fUkRPTkxZKSBmYWlsZWQiKTsKKwl9CisKKwkvKgor
CSAqIFBsYWNlIG1hcmtzIG9uIGEgc2V0IG9mIG9iamVjdHMgYW5kIHNldHVwIHRoZSBleHBlY3Rl
ZCBtYXNrcworCSAqIGZvciBlYWNoIGV2ZW50IHRoYXQgaXMgZXhwZWN0ZWQgdG8gYmUgZ2VuZXJh
dGVkLgorCSAqLworCWlmIChzZXR1cF9tYXJrcyhmYW5vdGlmeV9mZCwgdGMpICE9IDApCisJCWdv
dG8gb3V0OworCisJLyogR2VuZXJhdGUgc2VxdWVuY2Ugb2YgRkFOX09QRU4gZXZlbnRzIG9uIG9i
amVjdHMgKi8KKwlmb3IgKGkgPSAwOyBpIDwgQVJSQVlfU0laRShvYmplY3RzKTsgaSsrKQorCQlm
ZHNbaV0gPSBTQUZFX09QRU4ob2JqZWN0c1tpXS5wYXRoLCBPX1JET05MWSk7CisKKwkvKgorCSAq
IEdlbmVyYXRlIHNlcXVlbmNlIG9mIEZBTl9DTE9TRV9OT1dSSVRFIGV2ZW50cyBvbiBvYmplY3Rz
LiBFYWNoCisJICogRkFOX0NMT1NFX05PV1JJVEUgZXZlbnQgaXMgZXhwZWN0ZWQgdG8gYmUgbWVy
Z2VkIHdpdGggaXRzCisJICogcmVzcGVjdGl2ZSBGQU5fT1BFTiBldmVudCB0aGF0IHdhcyBwZXJm
b3JtZWQgb24gdGhlIHNhbWUgb2JqZWN0LgorCSAqLworCWZvciAoaSA9IDA7IGkgPCBBUlJBWV9T
SVpFKG9iamVjdHMpOyBpKyspIHsKKwkJaWYgKGZkc1tpXSA+IDApCisJCQlTQUZFX0NMT1NFKGZk
c1tpXSk7CisJfQorCisJLyogUmVhZCBldmVudHMgZnJvbSBldmVudCBxdWV1ZSAqLworCWxlbiA9
IFNBRkVfUkVBRCgwLCBmYW5vdGlmeV9mZCwgZXZlbnRzX2J1ZiwgQlVGX1NJWkUpOworCisJLyog
SXRlcmF0ZSBvdmVyIGV2ZW50IHF1ZXVlICovCisJZm9yIChpID0gMCwgbWV0YWRhdGEgPSAoc3Ry
dWN0IGZhbm90aWZ5X2V2ZW50X21ldGFkYXRhICopIGV2ZW50c19idWY7CisJCUZBTl9FVkVOVF9P
SyhtZXRhZGF0YSwgbGVuKTsKKwkJbWV0YWRhdGEgPSBGQU5fRVZFTlRfTkVYVChtZXRhZGF0YSwg
bGVuKSwgaSsrKSB7CisJCWV2ZW50X2ZpZCA9IChzdHJ1Y3QgZmFub3RpZnlfZXZlbnRfaW5mb19m
aWQgKikgKG1ldGFkYXRhICsgMSk7CisJCWV2ZW50X2ZpbGVfaGFuZGxlID0gKHN0cnVjdCBmaWxl
X2hhbmRsZSAqKSBldmVudF9maWQtPmhhbmRsZTsKKworCQkvKiBGaWxlIGRlc2NyaXB0b3IgaXMg
cmVkdW5kYW50IHdpdGggRkFOX1JFUE9SVF9GSUQgKi8KKwkJaWYgKG1ldGFkYXRhLT5mZCAhPSBG
QU5fTk9GRCkKKwkJCXRzdF9yZXMoVEZBSUwsCisJCQkJIlVuZXhwZWN0ZWRseSByZWNlaXZlZCBm
aWxlIGRlc2NyaXB0b3IgJWQgaW4gIgorCQkJCSJldmVudC4gRXhwZWN0ZWQgdG8gZ2V0IEZBTl9O
T0ZEKCVkKSIsCisJCQkJbWV0YWRhdGEtPmZkLCBGQU5fTk9GRCk7CisKKwkJLyogRW5zdXJlIHRo
YXQgdGhlIGNvcnJlY3QgbWFzayBoYXMgYmVlbiByZXBvcnRlZCBpbiBldmVudCAqLworCQlpZiAo
bWV0YWRhdGEtPm1hc2sgIT0gZXZlbnRfc2V0W2ldLmV4cGVjdGVkX21hc2spCisJCQl0c3RfcmVz
KFRGQUlMLAorCQkJCSJVbmV4cGVjdGVkIG1hc2sgcmVjZWl2ZWQ6ICVsbHggKGV4cGVjdGVkOiAi
CisJCQkJIiVsbHgpIGluIGV2ZW50IiwKKwkJCQltZXRhZGF0YS0+bWFzaywKKwkJCQlldmVudF9z
ZXRbaV0uZXhwZWN0ZWRfbWFzayk7CisKKwkJLyogVmVyaWZ5IGhhbmRsZV9ieXRlcyByZXR1cm5l
ZCBpbiBldmVudCAqLworCQlpZiAoZXZlbnRfZmlsZV9oYW5kbGUtPmhhbmRsZV9ieXRlcworCQkJ
CSE9IGV2ZW50X3NldFtpXS5oYW5kbGUuaGFuZGxlX2J5dGVzKSB7CisJCQl0c3RfcmVzKFRGQUlM
LAorCQkJCSJoYW5kbGVfYnl0ZXMgKCV4KSByZXR1cm5lZCBpbiBldmVudCBkb2VzIG5vdCAiCisJ
CQkJImVxdWFsIHRvIGhhbmRsZV9ieXRlcyAoJXgpIHJldHVybmVkIGluICIKKwkJCQkibmFtZV90
b19oYW5kbGVfYXQoMikiLAorCQkJCWV2ZW50X2ZpbGVfaGFuZGxlLT5oYW5kbGVfYnl0ZXMsCisJ
CQkJZXZlbnRfc2V0W2ldLmhhbmRsZS5oYW5kbGVfYnl0ZXMpOworCQkJY29udGludWU7CisJCX0K
KworCQkvKiBWZXJpZnkgaGFuZGxlX3R5cGUgcmV0dXJuZWQgaW4gZXZlbnQgKi8KKwkJaWYgKGV2
ZW50X2ZpbGVfaGFuZGxlLT5oYW5kbGVfdHlwZSAhPQorCQkJCWV2ZW50X3NldFtpXS5oYW5kbGUu
aGFuZGxlX3R5cGUpIHsKKwkJCXRzdF9yZXMoVEZBSUwsCisJCQkJImhhbmRsZV90eXBlICgleCkg
cmV0dXJuZWQgaW4gZXZlbnQgZG9lcyBub3QgIgorCQkJCSJlcXVhbCB0byBoYW5kbGVfdHlwZSAo
JXgpIHJldHVybmVkIGluICIKKwkJCQkibmFtZV90b19oYW5kbGVfYXQoMikiLAorCQkJCWV2ZW50
X2ZpbGVfaGFuZGxlLT5oYW5kbGVfdHlwZSwKKwkJCQlldmVudF9zZXRbaV0uaGFuZGxlLmhhbmRs
ZV90eXBlKTsKKwkJCWNvbnRpbnVlOworCQl9CisKKwkJLyogVmVyaWZ5IGZpbGUgaWRlbnRpZmll
ciBmX2hhbmRsZSByZXR1cm5lZCBpbiBldmVudCAqLworCQlpZiAobWVtY21wKGV2ZW50X2ZpbGVf
aGFuZGxlLT5mX2hhbmRsZSwKKwkJCQlldmVudF9zZXRbaV0uaGFuZGxlLmZfaGFuZGxlLAorCQkJ
CWV2ZW50X3NldFtpXS5oYW5kbGUuaGFuZGxlX2J5dGVzKSAhPSAwKSB7CisJCQl0c3RfcmVzKFRG
QUlMLAorCQkJCSJldmVudF9maWxlX2hhbmRsZS0+Zl9oYW5kbGUgZG9lcyBub3QgbWF0Y2ggIgor
CQkJCSJldmVudF9zZXRbaV0uaGFuZGxlLmZfaGFuZGxlIHJldHVybmVkIGluICIKKwkJCQkibmFt
ZV90b19oYW5kbGVfYXQoMikiKTsKKwkJCWNvbnRpbnVlOworCQl9CisKKwkJLyogVmVyaWZ5IGZp
bGVzeXN0ZW0gSUQgZnNpZCAgcmV0dXJuZWQgaW4gZXZlbnQgKi8KKwkJaWYgKG1lbWNtcCgmZXZl
bnRfZmlkLT5mc2lkLCAmZXZlbnRfc2V0W2ldLmZzaWQsCisJCQkJc2l6ZW9mKGV2ZW50X3NldFtp
XS5mc2lkKSkgIT0gMCkgeworCQkJdHN0X3JlcyhURkFJTCwKKwkJCQkiZXZlbnRfZmlkLmZzaWQg
IT0gc3RhdC5mX2ZzaWQgdGhhdCB3YXMgIgorCQkJCSJvYnRhaW5lZCB2aWEgc3RhdGZzKDIpIik7
CisJCQljb250aW51ZTsKKwkJfQorCisJCXRzdF9yZXMoVFBBU1MsCisJCQkiZ290IGV2ZW50OiBt
YXNrPSVsbHgsIHBpZD0lZCwgZmlkPSV4LiV4LiVseCB2YWx1ZXMgIgorCQkJInJldHVybmVkIGlu
IGV2ZW50IG1hdGNoIHRob3NlIHJldHVybmVkIGluIHN0YXRmcygyKSAiCisJCQkiYW5kIG5hbWVf
dG9faGFuZGxlX2F0KDIpIiwKKwkJCW1ldGFkYXRhLT5tYXNrLAorCQkJZ2V0cGlkKCksCisJCQll
dmVudF9maWQtPmZzaWQudmFsWzBdLAorCQkJZXZlbnRfZmlkLT5mc2lkLnZhbFsxXSwKKwkJCSoo
dW5zaWduZWQgbG9uZyAqKSBldmVudF9maWxlX2hhbmRsZS0+Zl9oYW5kbGUpOworCX0KK291dDoK
KwlTQUZFX0NMT1NFKGZhbm90aWZ5X2ZkKTsKK30KKworc3RhdGljIHZvaWQgZG9fc2V0dXAodm9p
ZCkKK3sKKwlpbnQgZmQ7CisKKwkvKiBDaGVjayBmb3Iga2VybmVsIGZhbm90aWZ5IHN1cHBvcnQg
Ki8KKwlmZCA9IFNBRkVfRkFOT1RJRllfSU5JVChGQU5fQ0xBU1NfTk9USUYsIE9fUkRPTkxZKTsK
KwlTQUZFX0NMT1NFKGZkKTsKKworCS8qIENyZWF0ZSBmaWxlIGFuZCBkaXJlY3Rvcnkgb2JqZWN0
cyBmb3IgdGVzdGluZyAqLworCWNyZWF0ZV9vYmplY3RzKCk7CisKKwkvKiBHZXQgdGhlIGZpbGVz
eXN0ZW0gZnNpZCBhbmQgZmlsZSBoYW5kbGUgZm9yIGVhY2ggY3JlYXRlZCBvYmplY3QgKi8KKwln
ZXRfb2JqZWN0X3N0YXRzKCk7Cit9CisKK3N0YXRpYyB2b2lkIGRvX2NsZWFudXAodm9pZCkKK3sK
KwlpZiAoZmFub3RpZnlfZmQgPiAwKQorCQlTQUZFX0NMT1NFKGZhbm90aWZ5X2ZkKTsKK30KKwor
c3RhdGljIHN0cnVjdCB0c3RfdGVzdCB0ZXN0ID0geworCS50ZXN0ID0gZG9fdGVzdCwKKwkudGNu
dCA9IEFSUkFZX1NJWkUodGVzdF9jYXNlcyksCisJLnNldHVwID0gZG9fc2V0dXAsCisJLmNsZWFu
dXAgPSBkb19jbGVhbnVwLAorCS5uZWVkc19yb290ID0gMSwKKwkubmVlZHNfdG1wZGlyID0gMSwK
KwkubW91bnRfZGV2aWNlID0gMSwKKwkubW50cG9pbnQgPSBNT1VOVF9QQVRILAorCS5hbGxfZmls
ZXN5c3RlbXMgPSAxCit9OworCisjZWxzZQorCVRTVF9URVNUX1RDT05GKCJTeXN0ZW0gZG9lcyBu
b3QgaGF2ZSByZXF1aXJlZCBmYW5vdGlmeSBzdXBwb3J0Iik7CisjZW5kaWYKLS0gCjIuMTYuNAoK
Ci0tIApNYXR0aGV3IEJvYnJvd3NraQoKLS0gCk1haWxpbmcgbGlzdCBpbmZvOiBodHRwczovL2xp
c3RzLmxpbnV4Lml0L2xpc3RpbmZvL2x0cAo=
